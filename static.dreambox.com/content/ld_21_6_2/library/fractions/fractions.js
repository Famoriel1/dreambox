var DBLFractionConstants,DBLFractionUtil,DBLFractionSetUtil,fractions,__extends=this&&this.__extends||(()=>{var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}})(),library_fractions=library_fractions||{};(t=>{function h(t,n){void 0===n&&(n=1),this._numerator=t=void 0===t?0:t,this._denominator=n}DBLRuntime.requireLibrary("library.generatorcore"),h.build=function(t,n){return new h(t,n)},Object.defineProperty(h.prototype,"numerator",{get:function(){return this._numerator},set:function(t){this._numerator=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"denominator",{get:function(){return this._denominator},set:function(t){this._denominator=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isWholeNumber",{get:function(){return this._numerator%this._denominator==0},enumerable:!1,configurable:!0}),h.prototype.reciprocal=function(){return new h(this._denominator,this._numerator)},h.prototype.abs=function(){return new h(Math.abs(this._numerator),Math.abs(this._denominator))},h.prototype.normalize=function(){var t;return this._numerator%1||this._denominator%1?(t=h.parseDecimal(this.toNumber()),this._numerator=t._numerator,this._denominator=t._denominator):this.simplify(),this},h.prototype.normalized=function(){return this.clone().normalize()},h.prototype.reduce=function(){var t,n,r,e;this.isNaN()||(t=this.toNumber()<0?-1:1,n=Math.abs(this._numerator),r=Math.abs(this._denominator),e=DBLNumberUtils.gcd(n,r),this._numerator=t*n/e,this._denominator=r/e)},h.prototype.reduced=function(){var t=this.clone();return this.equals(h.PI)||t.reduce(),t},h.prototype.simplify=function(){this.reduce(),this._denominator<0&&(this._numerator=-this._numerator,this._denominator=-this._denominator)},h.prototype.simplified=function(){var t=this.clone();return t.simplify(),t},h.prototype.mult=function(t,n){void 0===n&&(n=!1);var r=null,r=t instanceof h?t:new h(t),t=new h(this._numerator*r.numerator,this._denominator*r.denominator);return n?t.simplified():t},h.prototype.div=function(t,n){void 0===n&&(n=!1);var r=null,r=t instanceof h?t:new h(t),t=new h(this._numerator*r.denominator,r.numerator*this._denominator);return n?t.simplified():t},h.prototype.add=function(t,n){void 0===n&&(n=!1);var r=null,r=t instanceof h?t:new h(t),t=new h(this._numerator*r.denominator+this._denominator*r.numerator,this._denominator*r.denominator);return n?t.simplified():t},h.prototype.subtract=function(t,n){void 0===n&&(n=!1);var r=null,r=t instanceof h?t:new h(t),t=new h(this._numerator*r.denominator-this._denominator*r.numerator,this._denominator*r.denominator);return n?t.simplified():t},h.prototype.times=function(t,n){return void 0===n&&(n=!1),this.isNaN()?h.NAN:(t=h.build(this._numerator*t,this._denominator),n?t.simplified():t)},h.prototype.scaled=function(t){return new h(this._numerator*t,this._denominator*t)},h.prototype.scaledToDenominator=function(t){var n;return 0==t||t%(n=this.simplified()).denominator!=0?this.clone():n.scaled(t/n.denominator)},Object.defineProperty(h.prototype,"value",{get:function(){return this.toNumber()},enumerable:!1,configurable:!0}),h.prototype.equals=function(t){return this.isEqualTo(t)},h.prototype.isEqualTo=function(t){var n;return null!=t&&(n=null,n=t instanceof h?t:new h(t),this.isNaN()||n.isNaN()?this._numerator==n._numerator&&this._denominator==n._denominator:this.numerator*n.denominator==this.denominator*n.numerator)},h.prototype.lt=function(t){var n,r;return!this.isNaN()&&!t.isNaN()&&(n=this.numerator*t.denominator,r=this.denominator*t.numerator,0<this.denominator*t.denominator?n<r:r<n)},h.prototype.le=function(t){return this.lt(t)||this.isEqualTo(t)},h.prototype.gt=function(t){return t.lt(this)},h.prototype.ge=function(t){return t.le(this)},h.toFraction=function(t){return t instanceof h?t:DBLUtils.isString(t)?this.parse(t):DBLUtils.isBoolean(t)?t?h.ONE:h.ZERO:this.build(t,1)},h.parse=function(t){var n,r,e;return""==(t=DBLStringUtils.trim(t))?null:-1!=t.indexOf(".")?this.parseDecimal(parseFloat(t)):1<(n=t.split(/\s*\/\s*/)).length?1<(r=n[0].split(/\s+/)).length?new h(((e=parseInt(r[0],10))<0?-1:1)*((e=Math.abs(e))*parseInt(n[1],10)+parseInt(r[1],10)),parseInt(n[1],10)):new h(parseInt(n[0],10),parseInt(n[1],10)):new h(parseInt(t))},h.parseExact=function(t){t=String(t);var n=(t=DBLStringUtils.trim(t)).indexOf(".");return-1===n?h.parse(t):(n=Math.pow(10,t.length-n-1),new h(Math.round(parseFloat(t)*n),n).reduced())},h.parseDecimal=function(t){var n=t<0?-1:1,r=(-1==n&&(t=Math.abs(t)),Math.floor(t));if((t-=r)<1e-5)return new h(n*r,1);if(.99999<t)return new h(n*(r+1),1);for(var e=0,i=1,o=1,a=1;;){var s=e+o,u=i+a;if(u*(t+1e-5)<s)o=s,a=u;else{if(!(s<u*(t-1e-5)))return new h(n*(r*u+s),u);e=s,i=u}}},h.parseParts=function(t){var t=t.split("/"),n=[];return 1<t.length?(n=t[0].split(" ")).push(t[1]):n.push(t[0]),n},h.prototype.isNaN=function(){return 0==this._numerator&&0==this._denominator||isNaN(this._numerator)},h.prototype.toNumber=function(){return this._numerator/this._denominator},h.prototype.toInt=function(){return DBLUtils.toInt(this._numerator/this._denominator)},h.prototype.toString=function(){return!this.isNaN()&&(1==this._denominator||0==this._numerator)?this._numerator.toString():"".concat(this._numerator,"/").concat(this._denominator)},h.prototype.toFractionString=function(){return"".concat(this._numerator," / ").concat(this._denominator)},h.prototype.toMixedString=function(){var t,n;return this._numerator<this._denominator?this.toFractionString():this._numerator%this._denominator==0?this.toInt().toString():(t=this.toInt(),n=this._numerator%this._denominator,"".concat(t," ").concat(n," / ").concat(this._denominator))},h.prototype.toMixed=function(){var t=DBLUtils.toInt(this._numerator/this._denominator);return 0!=t?this._numerator%this._denominator!=0?t+" "+Math.abs(this._numerator%this._denominator)+"/"+this._denominator:t.toString():this.toString()},h.prototype.toStringParts=function(){var t,n,r,e=["","",""];return this.isNaN()||(t=this.toNumber()<0?"-":"",n=DBLUtils.toInt(Math.abs(this._numerator/this._denominator)),r=Math.abs(this._numerator%this._denominator),e[0]=t,1==this._denominator||0==r?e[0]+=n.toString():(e[1]=Math.abs(this._numerator).toString(),e[2]=Math.abs(this._denominator).toString())),e},h.prototype.toMixedParts=function(){var t,n,r,e=["","",""];return this.isNaN()||(t=this.toNumber()<0?"-":"",n=DBLUtils.toInt(Math.abs(this._numerator/this._denominator)),r=Math.abs(this._numerator%this._denominator),e[0]=t,(0!=n||0==n&&0==this._numerator)&&(e[0]+=n.toString()),1!=this._denominator&&0!=r&&(e[1]=r.toString(),e[2]=Math.abs(this._denominator).toString())),e},h.prototype.toBoolean=function(){return 0!=this._numerator},h.prototype.containsExactly=function(t){var n=!0,t=this.div(t);return n=t.toNumber()!=Math.round(t.toNumber())?!1:n},h.prototype.clone=function(){return new h(this._numerator,this._denominator)},h.prototype.transcriptObject=function(){var t={};return t.value=this.toString(),t},h.ZERO=new h,h.ONE=new h(1),h.PI=new h(Math.PI,1),h.NAN=new h(0,0),t.DBLFraction=h})(fractions=fractions||{}),(t=>{t.CONTEXT_FRACTIONS="fractions",t.CONTEXT_TIME="time",t.CONTEXT_MONEY="money",t.CONTEXT_DISTANCE="distance",t.CONTEXT_TARGET_FRACTION="targetFraction",t.CONTEXT_FORMAT_COMMAS="formatCommas",t.FRACTION_FORMAT_REGEXP=/^\s*\d*\s*(\d+\s*\/\s*\d+\s*)?$/,t.INTEGER_FORMAT_REGEXP=/^\s*\-?\d+\s*$/,t.DECIMAL_FORMAT_REGEXP=/^\s*\-?\d*\.\d+\s*$/,t.FRACTION_MIXED_REGEXP=/^\s*\d+\s+\d+\s*\/\s*\d+\s*$/,t.FRACTION_IMPROPER_REGEXP=/^\s*\d+\s*\/\s*\d+\s*$/})(DBLFractionConstants=DBLFractionConstants||{}),(t=>{function e(t){return fractions.DBLFraction.parse(t)||fractions.DBLFraction.ZERO.clone()}t.parseFractionString=e,t.parseStringsArray=function(t){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n},t.fractionToSimplifiedString=function(t){return 0==t.numerator?"0":1==(t=t.simplified()).denominator?t.numerator.toString():t.numerator+"/"+t.denominator},t.arrayContainsFractionWithSameValue=function(t,n){for(var r=0;r<t.length;++r)if(e(t[r]).isEqualTo(n))return!0;return!1},t.toWords=function(t,n){switch(n){case 15:return 1==t?"fifteenth":"fifteenths";case 20:return 1==t?"twentieth":"twentieths";case 25:return 1==t?"twentyfifth":"twentyfifths";case 50:return 1==t?"fiftieth":"fiftieths";default:return(1==t?["zero","one","half","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth"]:["zero","ones","halves","thirds","fourths","fifths","sixths","sevens","eighths","ninths","tenths","elevenths","twelfths"])[Math.abs(n)]}}})(DBLFractionUtil=DBLFractionUtil||{}),(t=>{var r;function n(t,n){return r.call(this,t=void 0===t?0:t,n=void 0===n?1:n)||this}r=t.DBLFraction,__extends(n,r),Object.defineProperty(n.prototype,"numerator",{get:function(){return this._numerator},set:function(t){if(!this.isWholeNumber&&t>this.denominator)throw new RangeError("Value for this.numerator ("+t+") would cause an improper fraction with this.denominator ("+this._denominator+")");this._numerator=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"denominator",{get:function(){return this._denominator},set:function(t){if(1!=t&&this._numerator>t)throw new RangeError("Value for this.denominator ("+t+") would cause an improper fraction with this.numerator ("+this._numerator+")");this._denominator=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isWholeNumber",{get:function(){return 1==this._denominator},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this._numerator,this._denominator)},t.DBLProperFraction=n})(fractions=fractions||{}),(t=>{function r(t,n){return t.equals(n)?0:t.lt(n)?-1:1}t.sortComparator=r,t.sortReverseComparator=function(t,n){return-r(t,n)},t.sortAndConcat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],e=0,i=t;e<i.length;e++)var o=i[e],r=r.concat(o.concat().sort(this.sortComparator));return r},t.setsAreEqual=function(t,n,r){if(!t||!n)return t==n;var e=t.length;if(n.length!=e)return!1;(r=void 0===r?!1:r)&&(t=t.concat().sort(this.sortComparator),n=n.concat().sort(this.sortComparator));for(var i=0;i<e;i++)if(!t[i].equals(n[i]))return!1;return!0},t.toStringArray=function(t){var n=[];if(t)for(var r=t.length,e=0;e<r;e++)n.push(t[e].toString());return n},t.populateWithClones=function(t,n,r){for(r=(r=void 0===r?null:r)||[];0<n--;)r.push(t.clone());return r},t.getNonUnitFractions=function(t,n){var r=[],e=Object.create(null);if(t)for(var i=t.length,o=0;o<i;o++){var a=t[o],s=a.denominator;!this.isNonUnitFraction(a)||n&&!e[s]&&-1==this.indexOfFirstUnitFraction(t,s)||(r.push(a),n&&(e[s]=!0))}return r},t.removeNonUnitFractions=function(t){var n=[];if(t)for(var r=0,e=t.length,i=0;i<e;i++){var o=t[i];1!=o.numerator&&!o.isWholeNumber||(n[r++]=o)}return n},t.containsANonUnitFraction=function(t){if(t)for(var n=t.length,r=0;r<n;r++)if(this.isNonUnitFraction(t[r]))return!0;return!1},t.containsANonWholeNumber=function(t,n){if(void 0===n&&(n=Number.MAX_VALUE),t)for(var r=Math.min(t.length,n),e=0;e<r;e++)if(!t[e].isWholeNumber)return!0;return!1},t.indexOfFirstEqualFraction=function(t,n){if(t&&n)for(var r=t.length,e=0;e<r;e++)if(t[e].equals(n))return e;return-1},t.indexOfFirstUnitFraction=function(t,n){if(t&&n)for(var r=t.length,e=0;e<r;e++){var i=t[e];if(i.denominator==n&&1==i.numerator)return e}return-1},t.isNonUnitFraction=function(t){return!t.isWholeNumber&&1<t.numerator}})(DBLFractionSetUtil=DBLFractionSetUtil||{}),(n=>{DBLRuntime.requireLibrary("library.manipulativecore");var i,r=DBLRuntime.requireFont("assets.fonts.Anivers"),t=(i=createjs.Container,__extends(e,i),Object.defineProperty(e.prototype,"vinculumYOffset",{get:function(){return this._vinculumYOffset},set:function(t){this._vinculumYOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"denominatorYOffset",{set:function(t){this._denominatorYOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mixed",{get:function(){return this._mixed},set:function(t){this._mixed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fraction",{get:function(){return this._fraction},set:function(t){this._fraction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.createText=function(){var t=new createjs.Text("",DBLFont.getFontString(r,this._fontSize),this._fontColor);return t.textAlign="center",t.textBaseline="alphabet",t},e.prototype.updateText=function(){this._whole.color=this._fontColor,this._whole.font=DBLFont.getFontString(r,this._fontSize),this._numerator.color=this._fontColor,this._numerator.font=DBLFont.getFontString(r,this._fontSize),this._denominator.color=this._fontColor,this._denominator.font=DBLFont.getFontString(r,this._fontSize),this.redraw()},Object.defineProperty(e.prototype,"isFract",{get:function(){return""!=this._numerator.text&&null!=this._numerator.text},enumerable:!1,configurable:!0}),e.prototype.redraw=function(){var t,n=this.getSize();this._vinculum&&(this.removeChild(this._vinculum),this._vinculum=null),this.isFract?(this._vinculum=DBLGraphicUtils.drawFilledRectangle(n,1,this._fontColor),this.addChild(this._vinculum),this._width?(this._numerator.x=this._width/2,this._denominator.x=this._width/2,this._vinculum.x=this._width/2-n/2):this._numerator.x=this._denominator.x=this._vinculum.x=0,this._numerator.y=this._numerator.getMeasuredHeight(),this._vinculum.y=this._numerator.getMeasuredHeight()+this._vinculumYOffset+1,this._denominator.y=this._numerator.getMeasuredHeight()+this._denominator.getMeasuredHeight()+2*this._vinculumYOffset+this._denominatorYOffset,this._height&&(t=(this._height-this._numerator.getMeasuredHeight()-this._denominator.getMeasuredHeight())/2-this._vinculumYOffset,this._denominator.y+=t,this._vinculum.y+=t,this._numerator.y+=t)):(this._width&&(this._whole.x=this._width/2),this._height&&(this._whole.y=this._height/2+this._whole.getMeasuredHeight()/2)),this._setMixedPos&&this._width&&this._height&&(this._vinculum.x=this._numerator.x=this._denominator.x=this._width/2+this._whole.getMeasuredWidth()/2,this._vinculum.x-=n/2,this._whole.x=this._width/2-n/2-2)},Object.defineProperty(e.prototype,"color",{get:function(){return this._fontColor},set:function(t){this._fontColor=t,this.updateText()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.updateText()},enumerable:!1,configurable:!0}),e.prototype.setSize=function(t,n){this._width=t,this._height=n,this.redraw()},e.prototype.updateFraction=function(t){this._setMixedPos=!1,this._fraction=n.DBLFraction.parse(t);var t=DBLUtils.toInt(this._fraction.numerator/this._fraction.denominator);this._mixed&&0!=t?(this._whole.text=t.toString(),0!=(t=Math.abs(this._fraction.numerator%this._fraction.denominator))?(this._numerator.text=t.toString(),this._denominator.text=this._fraction.denominator.toString(),this._setMixedPos=!0):(this._numerator.text="",this._denominator.text="")):(this._whole.text="",this._numerator.text=this._fraction.numerator.toString(),this._denominator.text=this._fraction.denominator.toString()),this.redraw()},e.prototype.getSize=function(){return 0==this._numerator.text.length?0:Math.max(12,Math.max(this._numerator.getMeasuredWidth(),this._denominator.getMeasuredWidth()))},Object.defineProperty(e.prototype,"text",{set:function(t){this.updateFraction(t)},enumerable:!1,configurable:!0}),e);function e(t,n,r){void 0===r&&(r=!1);var e=i.call(this)||this;return e._fontSize=15,e._fontColor="#555555",e._vinculumYOffset=3,e._denominatorYOffset=0,e._fontSize=t,e._fontColor=n,e._mixed=r,e._whole=e.createText(),e._whole.y=10,e.addChild(e._whole),e._numerator=e.createText(),e._numerator.y=3,e.addChild(e._numerator),e._denominator=e.createText(),e.addChild(e._denominator),e.redraw(),e}n.FractionField=t})(fractions=fractions||{});