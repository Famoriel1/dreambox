var engagement_intermediate_lessonchooserflex,__extends=this&&this.__extends||(()=>{var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}})(),__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,s=0,i=t.length;s<i;s++)!o&&s in t||((o=o||Array.prototype.slice.call(t,0,s))[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};(e=>{var t;function n(){return null!==t&&t.apply(this,arguments)||this}t=createjs.Container,__extends(n,t),Object.defineProperty(n.prototype,"clip",{set:function(e){this.cleanup(),this._clip=e,this._clip.gotoAndStop(0),this.addChild(this._clip)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{set:function(e){this._text=e},enumerable:!1,configurable:!0}),n.prototype.cleanup=function(){this._clip&&(this.removeChild(this._clip),this._clip=null),this._callback=null},n.prototype.play=function(e){this._callback=e=void 0===e?null:e,this._clip?this._clip.gotoAndPlay(0):this.complete()},n.prototype.complete=function(){this._callback&&this._callback()},n.prototype.tick24=function(){this._clip&&(DBLAsset.advanceMovieClip(this._clip),this._clip.assignmentCompleteText&&(DBLFont.fixFont(this._clip.assignmentCompleteText,FONT_TYPE_TITLE,"",FONT_TYPE_TITLE_WEIGHT),this._clip.assignmentCompleteText.text=this._text),this._clip.currentFrame==this._clip.timeline.duration-1)&&(this._clip.stop(),this.complete())},e.FlexCompleteAnimation=n})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(n=>{var e=DBLRuntime.requireBundle("assets.bundles.engagement.intermediate."+engagement+".DBLALessonChooser"),o=(DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.SFXChimes","SFXChimes"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.SFXCymbal","SFXCymbal"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.SFXSlide","SFXSlide"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.SFXWoosh","SFXWoosh"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.EffectAchievement","EffectAchievement"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.EffectLootCoin","EffectLootCoin"),DBLRuntime.requireAudio("assets.bundles.engagement.intermediate."+engagement+".sounds.EffectSuccess","EffectSuccess"),n.FLEX_BOX_BUNDLE="neon"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.intermediate.neon.FlexBox"):"",n.FLEX_LESSON_BUTTON_BUNDLE_STATIC=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.intermediate.neon.NeonLessonChooserButton_Static"),n.FLEX_LESSON_BUTTON_BUNDLE=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.intermediate.neon.NeonLessonChooserButton"),n.WEEKLY_GOAL_PROGRESS_PATH_FLEX="neon"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.intermediate.neon.NeonWeekStreak"):"",n.JSON_LAYOUT_PATH="assets.bundles.engagement.intermediate."+engagement+".layouts.Default",n.RECOMMENDATIONS="Recommendations",n.ASSIGNMENTS="Assignments",n.WEEKLY_GOALS="Weekly Goal",n.PASSED="PASSED",n.STATUS_FOR_BOX={RECOMMENDED:n.RECOMMENDATIONS,ASSIGNED:n.ASSIGNMENTS},["%c".concat("[FLEX]"),"".concat("background-color: #fe95f3; color: white","; padding: 1px; border-radius: 2px")]),e=(n.logInfo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,__spreadArray(__spreadArray([],o,!1),e,!1))},n.logDebug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __debugNeon&&n.logInfo.apply(void 0,e)},t.LESSONCHOOSER_BUNDLE=e,t.LESSONCHOOSER_ASSIGNEDLESSONCOMPLETE="DBLAAssignedLessonComplete",t.LESSONCHOOSER_ASSIGNEDLESSONCOMPLETE_ONGOING="DBLAAssignedLessonComplete_Ongoing",t.LESSONCHOOSER_LESSONBUTTONCORE="DBLALessonButtonCore",t.HELP_AUDIO="helpLessonChooserNeon",t);function t(){}n.FlexConstants=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(e=>{var t;function n(){return null!==t&&t.apply(this,arguments)||this}t=createjs.Container,__extends(n,t),n.prototype.cleanup=function(){this.removeAllChildren(),this._tempItem&&(this._tempItem.cleanup(),this._tempItem=null),this._item&&(this._item.cleanup(),this._item=null)},Object.defineProperty(n.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e,this.addChild(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tempItem",{get:function(){return this._tempItem},set:function(e){this._tempItem=e,this.addChild(e)},enumerable:!1,configurable:!0}),n.prototype.clearTempItem=function(){this._tempItem&&(this.removeChild(this._tempItem),this._tempItem.cleanup()),this._tempItem=null},n.prototype.tick24=function(){this._item&&this._item.tick24(),this._tempItem&&this._tempItem.tick24()},Object.defineProperty(n.prototype,"title",{get:function(){return this._item.title},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagText",{get:function(){return this._item.tagText},enumerable:!1,configurable:!0}),n.prototype.getAccessibilityData=function(){return this._item.getAccessibilityData()},e.FlexLayoutItem=n})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(t=>{var n;function e(){var e=n.call(this)||this;return e._weeklyGoalProgress=null,e._lessonData=new t.FlexLessonData,e._lessonAnimation=new t.FlexLessonAnimation,e}n=createjs.EventDispatcher,__extends(e,n),Object.defineProperty(e.prototype,"lessonData",{get:function(){return this._lessonData},enumerable:!1,configurable:!0}),e.prototype.renderChooser=function(e){},e.prototype.getBoxesPositions=function(){this._boxesPositions=getSessionProperty(DBLDataConstants.PREV_BOXES_POSITIONS)},e.prototype.setBoxesPositions=function(e){e=e.lessonLayout.getBoxes().map(function(e){return e.getBoxPos()});setSessionProperty(DBLDataConstants.PREV_BOXES_POSITIONS,e)},e.prototype.animateShow=function(e){},e.prototype.animateHide=function(e,t){},Object.defineProperty(e.prototype,"hasProgress",{get:function(){var e;return!!this._weeklyGoalProgress&&(e=getSessionProperty(DBLDataConstants.INITIAL_LESSONS_COMPLETED))+this._weeklyGoalProgress.prevSessionLessonsCompleted!=e+this._weeklyGoalProgress.curSessionLessonsCompleted},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){null!=this._weeklyGoalProgress&&(this._weeklyGoalProgress.removeAllEventListeners(),this._weeklyGoalProgress.cleanup(),this._weeklyGoalProgress=null),this._lessonData&&this._lessonData.cleanup(),setSessionProperty(DBLDataConstants.PREV_COINS_EARNED,getSessionProperty(DBLDataConstants.CUR_COINS_EARNED)),setSessionProperty(DBLDataConstants.PREV_LESSON_TIME,getSessionProperty(DBLDataConstants.CUR_LESSON_TIME))},e.prototype.tick24=function(){this._weeklyGoalProgress&&this._weeklyGoalProgress.tick24()},t.FlexSkinController=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(r=>{r.HIDE_DELAY=.3;var l="hideLabel",h="swapLabel",a="showLabel",c="moveLabel",p="completeLabel",t={lessonShow:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".LessonShow"),lessonHide:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".LessonShow"),slideUp:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".LessonHide"),hide:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".SlideOut"),swap:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".SlideIn"),complete:DBLRuntime.requireAudio("assets.audio.engagement.intermediate."+engagement+".SFXComplete")};function e(){this._animationData=[],this._soundData={},this._animationData=[]}e.prototype.cleanup=function(){},e.prototype.clearSounds=function(){this._soundData={}},e.prototype.playSound=function(e){!this._soundData[e]&&t[e]&&(DBLAsset.playSound(t[e]),this._soundData[e]=!0)},e.prototype.addAnimation=function(e,t,n){"hide"!=e.action&&"swap"!=e.action||this._animationData.push({index:t.getItemIndex(n),anim:e.action,box:e.boxName})},e.prototype.animateShow=function(t,e,n){var o,s=this,i=t.lessonLayout,a=(this._showTimeline=new gsap.TimelineLite({onComplete:function(){return i.enabled=!0}}),this.clearSounds(),this.playSound("lessonShow"),this.showBoxes(t),n&&this._showTimeline.to(this,.3,{}),e.assignedLessonComplete&&this.assignmentComplete(t),null!=e.lastLaunch&&this.animateLessonComplete(t,e),[]);for(o in this._animationData.forEach(function(e){"hide"==e.anim&&(s.animateHideItem(t,e.box,e.index),a[e.box]||(a[e.box]=[]),a[e.box].push(e.index),s._showTimeline.call(function(){return s.playSound("hide")},[],s,l)),"swap"==e.anim&&(s.animateSwapItem(t,e.box,e.index),s._showTimeline.call(function(){return s.playSound("swap")},[],s,h))}),a)0<a[o].length&&this.animateRefit(t,o,a[o]);n=i.getBox(r.ASSIGNMENTS);n&&e.needToHideAssignments()&&(e=n.fixHeight-n.minSize,this.animateBoxSize(t,r.ASSIGNMENTS,!1,n.minSize,!0),this.animatePositionY(t,r.RECOMMENDATIONS,e)),this._showTimeline.call(t.finishShow.bind(t))},e.prototype.animateHide=function(e,t){this._hideTimeline=new gsap.TimelineLite,this.hideBoxes(e),this._hideTimeline.add(gsap.TweenLite.to(e,1,{alpha:0})),this._hideTimeline.call(t)},e.prototype.getBox=function(e,t){e=e.lessonLayout.getBox(t);return e||null},e.prototype.setInitialOffset=function(e,t,n){"number"==typeof t.offset.x&&(e.x+=t.offset.x),"number"==typeof t.offset.y&&(e.y+=t.offset.y),t.alpha&&(e.alpha=0)},e.prototype.swapLayoutItem=function(e){null!=e&&e.tempItem&&(e.item.visible=!0,e.tempItem.visible=!1)},e.prototype.animateSwapItem=function(e,t,n){var e=this.getBox(e,t);e&&(t=e.getItem(n),e=e.getLayoutItem(n),t)&&(this._showTimeline.add(gsap.TweenLite.to(t,.3,{scaleX:0,scaleY:0,ease:gsap.Power3.easeInOut}),l),this._showTimeline.call(this.swapLayoutItem.bind(this),[e],this,h),this._showTimeline.add(gsap.TweenLite.to(t,.3,{scaleX:1,scaleY:1,ease:gsap.Power3.easeInOut}),a))},e.prototype.animateHideItem=function(e,t,n){e=this.getBox(e,t);e&&(t=e.getItem(n))&&this._showTimeline.add(gsap.TweenLite.to(t,.3,{scaleX:0,scaleY:0,ease:gsap.Power3.easeInOut}),l)},e.prototype.animateRefit=function(e,t,n){var o,s=this,i=this.getBox(e,t);i&&(i.hidden=n,o=i.positionItems(!0),i.getItems().forEach(function(e,t){t=o[t]||{x:0,y:0};s._showTimeline.add(gsap.TweenLite.to(e,.5,{x:t.x,y:t.y,ease:gsap.Power3.easeInOut}),a)}),this._showTimeline.call(function(){i.positionItems(),i.setScrollPosition(i.scrollPos,!0,.2)}))},e.prototype.animateBoxSize=function(e,t,n,o,s){void 0===o&&(o=0),void 0===s&&(s=!1);var i=this.getBox(e,t);i&&this._showTimeline.add(gsap.TweenLite.to(i,.5,{size:n?i.fullSize:o,ease:gsap.Power3.easeInOut,onComplete:function(){i.positionItems(),s&&i.addSubtitle()}}),c)},e.prototype.animatePositionY=function(e,t,n){var o=this,e=(void 0===n&&(n=0),this.getBox(e,t)),t=e.posY-n;e&&(this._showTimeline.add(gsap.TweenLite.to(e,.5,{y:t,ease:gsap.Power3.easeInOut}),c),e.y!=t)&&this._showTimeline.call(function(){return o.playSound("slideUp")},[],this,c)},e.prototype.animateLessonComplete=function(e,s){var i=this,e=e.lessonLayout.children,a=!1;e.forEach(function(o){o.getItems().forEach(function(e,t){var t=o.getLayoutItem(t),n=null==t?void 0:t.item;null!=n&&n.visible||(n=null==t?void 0:t.tempItem),s.isLessonComplete(null==n?void 0:n.lessonData)&&(i._showTimeline.call(n.playLessonComplete.bind(n),[],n,p),a||(i._showTimeline.call(function(){return i.playSound("complete")},[],i,p),i._showTimeline.to(i,2,{}),a=!0))})})},e.prototype.assignmentComplete=function(e){this._showTimeline.call(e.triggerShowAssignedLessonCompleteAdd.bind(e)),this._showTimeline.to(this,4.5,{})},e.prototype.showBoxes=function(e){var r=this,e=e.lessonLayout;e.enabled=!1;var l=0;e.children.forEach(function(a){var e,t;a instanceof FlexBox&&(a.showBoxAnim&&(e=a.x,t=a.y,r.setInitialOffset(a,a.showBoxAnim,a),r._showTimeline.add(gsap.TweenLite.to(a,a.showBoxAnim.duration,{alpha:1,x:e,y:t,ease:gsap.Power3.easeInOut}),"showBox")),l+=.5*(null==(e=a.showBoxAnim)?void 0:e.duration)||0,a.showItemsAnim)&&!a.isStatic&&a.getItems().forEach(function(e,t){var n=e.x,o=e.y,s=a.showItemsAnim.duration,i=a.showItemsAnim.step;r.setInitialOffset(e,a.showItemsAnim,a),r._showTimeline.add(gsap.TweenLite.to(e,s,{alpha:1,x:n,y:o,ease:gsap.Power3.easeOut}),l+i*t)})})},e.prototype.hideBoxes=function(e){var s=this,e=e.lessonLayout.children;this.playSound("lessonHide"),e.forEach(function(o){var e,t,n;o instanceof FlexBox&&(o.showItemsAnim&&!o.isStatic&&o.getItems().forEach(function(e){var t={x:e.x,y:e.y,alpha:1},n=.5*o.showItemsAnim.duration;s.setInitialOffset(t,o.showItemsAnim,o),s._hideTimeline.add(gsap.TweenLite.to(e,n,{alpha:t.alpha,x:t.x,y:t.y,ease:gsap.Quad.easeOut}),r.HIDE_DELAY)}),e=(.5*(null==(e=o.showItemsAnim)?void 0:e.duration)||0)+r.HIDE_DELAY,o.showBoxAnim)&&(t={x:o.x,y:o.y,alpha:1},n=.5*o.showBoxAnim.duration,s.setInitialOffset(t,o.showBoxAnim,o),s._hideTimeline.add(gsap.TweenLite.to(o,n,{alpha:t.alpha,x:t.x,y:t.y,ease:gsap.Quad.easeOut}),e))})},r.FlexLessonAnimation=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(h=>{function e(){this._lessonsPrev=[],this._indexComplete=-1,this.assignedLessonComplete=!1}Object.defineProperty(e.prototype,"lessonsPrev",{get:function(){return this._lessonsPrev},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lessons",{get:function(){return this._lessons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastLaunch",{get:function(){return this._lastLaunch},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexComplete",{get:function(){return this._indexComplete},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){this._lessons=null,this._lessonsPrev=null},e.prototype.infoMatch=function(e,t){return e.type==h.LessonChooserFlex.LESSONINFO_TYPE_DOOR&&t.type==h.LessonChooserFlex.LESSONINFO_TYPE_DOOR?getSessionProperty(DBLDataConstants.PREV_SCREEN_TYPE)!=DBLScreenConstants.NANOGAME_SCREEN:e.name==t.name&&e.lessonId==t.lessonId&&e.assignmentType==t.assignmentType&&e.lock==t.lock},e.prototype.loadPrevLessonData=function(){var e;this._lessonsPrev=getSessionProperty(DBLDataConstants.PREV_LESSONS),(!this._lessonsPrev||(e=this._lessonsPrev.some(function(e){return null==e?void 0:e.isNeonData}))&&!DBLDataUtils.isNeon||!e&&DBLDataUtils.isNeon)&&(this._lessonsPrev=[]),this._lastLaunch=getSessionProperty(DBLDataConstants.PREV_LAUNCH),getSessionProperty(DBLDataConstants.PREV_SCREEN_TYPE)==DBLScreenConstants.NANOGAME_SCREEN&&(this._lessons=this._lessonsPrev.concat(),this._lessons=this._lessons.filter(function(e){return e.type!=h.LessonChooserFlex.LESSONINFO_TYPE_DOOR}))},e.prototype.loadLessonData=function(e){this._lessons=[];for(var t=0;t<e.length;t++){var n=e[t];n.videoURL&&n.status==DBLLessonConstants.OPENING_VIDEO_PLAYED||this._lessons.push(n)}if(this._indexComplete=-1,0<this._lessonsPrev.length)for(t=0;t<this._lessonsPrev.length;t++)if(null!=this._lastLaunch&&this._lessonsPrev[t].name==this._lastLaunch.name&&this._lessonsPrev[t].lessonId==this._lastLaunch.lessonId){this._indexComplete=t;break}if(-1!=this._indexComplete)for(t=0;t<this._lessons.length;t++)if(this.infoMatch(this._lessons[t],this._lessonsPrev[this._indexComplete])){this._indexComplete=-1,DBLLog.log("Last lesson does not appear to be complete, as it is recommended again.",DBLLog.INFO);break}},e.prototype.recordPrevLessonData=function(){setSessionProperty(DBLDataConstants.PREV_LAUNCH,null),setSessionProperty(DBLDataConstants.PREV_LESSONS,this._lessons.concat())},e.prototype.recordAssignmentData=function(){var e=getSessionProperty(DBLDataConstants.CURRENT_ASSIGNMENTS)||{},t=getSessionProperty(DBLDataConstants.ASSIGNMENT_COMPLETIONS);if(t)for(var n in e)t[n]&&(this.assignedLessonComplete=!0);for(var e={},o=0,s=this._lessons;o<s.length;o++){var i=s[o];i.assignmentId&&(e[i.assignmentId]=i.assignmentType)}setSessionProperty(DBLDataConstants.CURRENT_ASSIGNMENTS,e)},e.prototype.filterAndOrderLessons=function(e){var o=this,s=this.lessons,i=this.lessonsPrev,a=[],r=[],l=[];s.forEach(function(n){n.statuses.forEach(function(e){var t;h.STATUS_FOR_BOX[e]!=h.RECOMMENDATIONS&&h.STATUS_FOR_BOX[e]!=h.ASSIGNMENTS||(t=__assign(__assign({},n),{boxName:h.STATUS_FOR_BOX[e],isNeonData:!0}),i.some(function(e){return o.infoMatch(e,t)}))||(t.action="show",t.boxName==h.RECOMMENDATIONS&&-1==n.statuses.indexOf("ASSIGNED")?l.push(t):t.boxName==h.ASSIGNMENTS&&r.push(t))})}),e&&l.push({lessonId:-1,name:"",fqln:"",statuses:[],type:h.LessonChooserFlex.LESSONINFO_TYPE_DOOR,boxName:h.RECOMMENDATIONS,isNeonData:!0}),i.forEach(function(t){var e,n;t.boxName!=h.RECOMMENDATIONS&&t.boxName!=h.ASSIGNMENTS||(n=s.filter(function(e){return o.infoMatch(t,e)})[0],e=t.boxName==h.RECOMMENDATIONS?l:r,n?(n=__assign(__assign({},n),{boxName:t.boxName,action:"none",isNeonData:!0}),a.push(n)):0<e.length?((n=e.pop()).action="swap",n.oldItemData=t,a.push(n)):(t.action="hide",a.push(t)))}),this._lessons=a.concat(l,r),h.logDebug("\nlessonsPrev",this.lessonsPrev,"\nLessons",this.lessons)},e.prototype.trimLessonData=function(){var e=this.lessons;e.forEach(function(e){"swap"==e.action&&(e.statuses=e.statuses.filter(function(e){return e!=h.PASSED}))}),this._lessons=e.filter(function(e){return"hide"!=e.action}),h.logDebug("trimmed Lessons",this.lessons)},e.prototype.needToHideAssignments=function(){return!this.lessons.some(function(e){return e.boxName==h.ASSIGNMENTS&&"hide"!=e.action})},e.prototype.oldAndNewAssignments=function(){var e=this.lessons,t=this.lessonsPrev;return e.concat(t).some(function(e){return e.boxName==h.ASSIGNMENTS})},e.prototype.isLessonComplete=function(e){var t=this.lessonsPrev[this.indexComplete];return t&&e&&e.name==t.name&&e.lessonId==t.lessonId},h.FlexLessonData=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(i=>{var s,a={TagDefault:{text:"Default",textColor:"#FFFFFF",icon:"TagIcon_AssignedLong",color:"#000000"},TagVideo:{text:"Video",textColor:"#FFFFFF",icon:"TagIcon_Video",color:"#110024"},TagNew:{text:"New",textColor:"#110024",icon:"TagIcon_New",color:"#FF95F3"},TagInProgress:{text:"In Progress",textColor:"#110024",icon:"TagIcon_InProgress",color:"#9DE99D"},TagDueSoon:{text:"Due Soon",textColor:"#110024",icon:"TagIcon_DueSoon",color:"#F0AB5D"},TagAssignedSpot:{text:"Assigned",textColor:"#110024",icon:"TagIcon_AssignedSpot",color:"#94C7EC"},TagAssignedGoal:{text:"Assigned",textColor:"#110024",icon:"TagIcon_AssignedGoal",color:"#94C7EC"},TagNanoGame:{text:"Brain Break",textColor:"#FFFFFF",icon:"TagIcon_BrainBreak",color:"#110024"}},r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=(s=createjs.Container,__extends(t,s),t.prototype.initButtonStates=function(){var n=this,t=this._instanceController.getRootButton();t&&(t.setDispatchStateChangeEvent(!0),t.addEventListener(DBLButtonStateChangeEvent.TYPE,function(e){switch(t.state){case DBLBaseButton.STATE_UP:n._background.gotoAndStop("Up");break;case DBLBaseButton.STATE_DOWN:n._background.gotoAndStop("Down");break;case DBLBaseButton.STATE_OVER:n._background.gotoAndPlay("OverStartAnimation")}}),this.addEventListener("mousedown",function(e){n._clickPosition=new createjs.Point(e.stageX,e.stageY)}),this.addEventListener("click",function(t){var e;10<Math.sqrt(Math.pow((null==(e=n._clickPosition)?void 0:e.x)-t.stageX,2)+Math.pow((null==(e=n._clickPosition)?void 0:e.y)-t.stageY,2))||n.contains(n._clickDownPulseClip)||((t.target=n).addChild(n._clickDownPulseClip),n._clickDownPulseClip.gotoAndPlay(1),n._clickDownPulseClip.addEventListener("pulseEndAnimation",function(e){n._clickDownPulseClip.gotoAndStop(1),n.removeAllEventListeners("pulseEndAnimation"),n.removeChild(n._clickDownPulseClip),n._clickHandler&&n._clickHandler(t)}))}))},t.prototype.showLessonComplete=function(){var e;this._completeClip.mouseEnabled=!1,this._completeClip.x=.5*(null==(e=this.getBounds())?void 0:e.width),this._completeClip.y=.5*(null==(e=this.getBounds())?void 0:e.height),this.addChild(this._completeClip)},t.prototype.playLessonComplete=function(){var t=this;this._completeClip.parent||this.showLessonComplete(),this._completeClip.gotoAndPlay("CompleteAnimationStart"),this._completeClip.addEventListener("completeEndAnimation",function(e){t._completeClip.gotoAndStop(0),t.removeAllEventListeners("completeEndAnimation"),t.removeChild(t._completeClip)})},Object.defineProperty(t.prototype,"lessonData",{get:function(){return this._lessonInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interactive",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){var n,o=this,e=(this._clickHandler=e,this.setTitle(this._lessonInfo.name),this._lessonInfo.type==i.LessonChooserFlex.LESSONINFO_TYPE_DOOR),s=e?"assets.media.engagement.intermediate.lessonicons.DBLANeonNanogamesIcon":this._lessonInfo.intermediateIcon||null;s&&(s=s.replace(/\./g,"/")+".png",(n=new DBLImageLoader).loadImage(s,"icon",function(e){e=new createjs.Bitmap(e);n.cleanup(),o._instanceController.setProxy("prxLessonIcon",e)})),this._lessonInfo.lock||(e?this.setTag("TagNanoGame"):this._lessonInfo.videoURL?this.setTag("TagVideo"):-1!=(null==(s=this._lessonInfo.statuses)?void 0:s.indexOf("ASSIGNED"))&&(e=this._lessonInfo.assignmentType.split("_")[0].toUpperCase(),s=this.getDueDateText(),"SPOT"==e?this.setTag("TagAssignedSpot",s):this.setTag("TagAssignedGoal",s)))},t.prototype.getDueDateText=function(){var e,t,n,o=new Date(this.lessonData.assignmentEndDate);return isNaN(o.getTime())?null:(n=((o=o.getTime())-Date.now())/36e5)<1?translate("Due Now"):n<24?(t=(e=Math.floor(n))<=1?translate("Hour"):translate("Hours"),"".concat(translate("Due in")," ").concat(e," ").concat(t)):n/24<=6?(e=new Date(o).getDay(),t=translate(r[e]),n=translate("Due on"),"".concat(n="Due on"==n?"Due":n," ").concat(t)):null},t.prototype.setTag=function(e,t){void 0===t&&(t=null);var n=new createjs.Container,e=(this._instanceController.setProxy("prxTag",n),a[e]),o=(this._tagText=null!=t?t:translate(e.text),this._instanceController.getMeta("prxTag")),s=this._instanceController.createClipFromLibrary("tagContent"),i=s.lblTag,t=(i.text=null!=t?t:translate(e.text),n.addChild(s),DBLFont.fixTextFields(i),i.color=e.textColor,s.icnTag),t=(t.visible=!1,s.removeChild(t),delete s.icnTag,this._instanceController.createClipFromLinkage(e.icon)),s=(t.x=5,s.addChild(t),i.getBounds().width),t=i.x+s+o.radius,i=DBLGraphicUtils.drawFilledRoundRectangle(t,o.height,e.color,o.radius);n.addChildAt(i,0)},t.prototype.cancelRender=function(){},t.prototype.cleanup=function(){},t.prototype.tick24=function(){this._background.paused||this._background.advance(),this._clickDownPulseClip.parent&&this._clickDownPulseClip.advance(),this._completeClip.parent&&this._completeClip.advance()},t.prototype.getAccessibilityData=function(){return{role:"button",display:{object:this}}},t.prototype.setTitle=function(e){function t(){DBLFont.resizeFont(n,o)}var n=this._instanceController.getText("lblTitle"),o=(this._defaultTitleTextHeight||(this._defaultTitleTextHeight=n.getBounds().height),n.text=e,24),s=DBLFont.getFontSize(n);for(DBLFont.fixTextFields(n),t();s<o&&this._defaultTitleTextHeight<n.getMeasuredHeight();)o-=2,t();n.visible=!0;var e=this._instanceController.getMeta("astTitle").align,i=e.bounds;n.getBounds()&&DBLAlign.align({container:this,child:n,vertical:e.vertical,horizontal:e.horizontal,containerBounds:new createjs.Rectangle(i.x,i.y,i.width,i.height)})},Object.defineProperty(t.prototype,"title",{get:function(){var e=this._instanceController.getText("lblTitle");return null==e?void 0:e.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagText",{get:function(){return this._tagText},enumerable:!1,configurable:!0}),t);function t(e,t,n){var o=s.call(this)||this;return o._chooser=e,o._lessonInfo=t,o._instanceController=n,o.addChild(n.getRootContainer()),o._background=o._instanceController.getSymbol("pnlBackground"),o._clickDownPulseClip=o._instanceController.createClipFromLibrary("ClickPulseAnimation"),o._completeClip=o._instanceController.createClipFromLibrary("lessonComplete"),o.initButtonStates(),o}i.NeonLessonButton=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(n=>{var o,t=[{id:"NeonVertical",templateFQN:"assets.data.engagement.intermediate."+engagement+".NeonLessonButtonVerticalTemplate",bundle:n.FLEX_LESSON_BUTTON_BUNDLE},{id:"NeonVerticalStatic",templateFQN:"assets.data.engagement.intermediate."+engagement+".NeonLessonButtonVerticalTemplateStatic",bundle:n.FLEX_LESSON_BUTTON_BUNDLE_STATIC},{id:"NeonHorizontalStatic",templateFQN:"assets.data.engagement.intermediate."+engagement+".NeonLessonButtonHorizontalTemplateStatic",bundle:n.FLEX_LESSON_BUTTON_BUNDLE_STATIC}],e=(n.BUTTONS_DATA={Recommendations:{type:"NeonVerticalStatic",width:184,heihght:184},Assignments:{type:"NeonHorizontalStatic",width:368,heihght:184}},o=bundleController.BundleTemplateFactories,__extends(s,o),s.prototype.load=function(e){this.loadTemplates(t,e)},s.prototype.obtain=function(e,t){if(this.hasTemplate(e))return e=this.createInstance(e),new n.NeonLessonButton(this._lessonChooser,t,e)},s);function s(e,t){t=o.call(this,t)||this;return t._lessonChooser=e,t}n.LessonChooserButtonsFactory=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(o=>{var t,s=engagement_shared.RatingLocations,i=engagement_shared.LessonFeedbackDialog,a=engagement_shared.LessonFeedbackEvents,e=(DBLRuntime.requireLibrary("library.manipulativecore"),DBLRuntime.requireLibrary("library.intermediateshared"),t=createjs.Container,__extends(r,t),Object.defineProperty(r.prototype,"lessonLayout",{get:function(){return this._lessonLayout},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buttonsFactory",{get:function(){return this._buttonsFactory},enumerable:!1,configurable:!0}),r.prototype.load=function(t){var n=this;this._buttonsFactory.loader.addFile(o.JSON_LAYOUT_PATH,".json"),this._buttonsFactory.load(function(){var e=n._buttonsFactory.loader.getJson(o.JSON_LAYOUT_PATH);n._lessonLayout=new FlexGroup(e,o.FLEX_BOX_BUNDLE),n.addChild(n._lessonLayout),setSessionProperty(DBLDataConstants.CUR_SCREEN_TYPE,DBLScreenConstants.CHOOSER_SCREEN),DBLStateManager.requestProperty(DBLDataConstants.SEEN_PRIMARY_FTUE),DBLStateManager.syncProperties(t)})},r.prototype.getMappings=function(){return[DBLDataConstants.NANOGAME_DATA_FQN,"assets.audio.engagement.intermediate.PlaySR","assets.audio.engagement.intermediate.TranslateSR"]},r.prototype.getBackScreen=function(){return""},r.prototype.ready=function(){shell.enableHeader(!1),null==this._skinController&&(this._skinController=new o.NeonSkinController,this._skinController.getBoxesPositions()),this._skinController.lessonData.loadPrevLessonData(),__messaging?shell.checkMessages(this.onMessagesChecked.bind(this)):this.onMessagesChecked()},r.prototype.onMessagesChecked=function(){DBLLog.log("Getting recommended lessons.",DBLLog.INFO),this._showDoor=this.showDoor();var e=this._showDoor?1:0;DBLLessonManager.getRecommendations([],this.LESSONS_PER_PAGE-e,null,this.onLessonsAvailable.bind(this))},r.prototype.cleanup=function(){this.removeAllChildren(),this._skinController.cleanup(),this._skinController=null,this._lessonLayout.cleanup(),this._assignedLessonComplete&&this._assignedLessonComplete.cleanup(),this._helpAudioHelper.cleanup(),this._enjoymentRatingDialog&&(this._enjoymentRatingDialog.cleanup(),this._enjoymentRatingDialog=null)},r.prototype.hide=function(e){this.cancelIconLoading(),this.mouseEnabled=this.mouseChildren=!1,this._skinController.setBoxesPositions(this),this._skinController.animateHide(this,e)},r.prototype.onLessonsAvailable=function(e){DBLLog.log("Recommended lessons received. ("+e.length+" total)",DBLLog.INFO),this._skinController.lessonData.loadLessonData(e),this._skinController.filterAndOrderLessons(this._showDoor),this.runStartLessonIfAvailable()||(this.initChooser(),this._skinController.animateShow(this),this._lessonLayout.mouseEnabled=this._lessonLayout.mouseChildren=!0)},r.prototype.showDoor=function(){getSessionProperty(DBLDataConstants.NANO_AWARDED)?DBLLog.log("LessonChooserNanogameDecision: Door already earned but not picked up - leaving it there",DBLLog.INFO):(t=DBLDataUtils.getEngagementData(DBLDataConstants.ED_NANOGAME_RULE),this._nanoGameSelectorFromEngagement=DBLDataUtils.getEngagementData(DBLDataConstants.ED_NANOGAME_SELECTOR),o=getSessionProperty(DBLDataConstants.NANO_LESSONS_SINCE_LAST),e=getSessionProperty(DBLDataConstants.NANO_TIME_SINCE_LAST)/6e4,t=(o>=(t=t.split(";")).length?t[t.length-1]:t[o]).split(","),t=Math.floor(e/5)>=t.length?t[t.length-1]:t[Math.floor(e/5)],t=Number(t),n=Math.random(),DBLLog.log("LessonChooserNanogameDecision: Decide whether to show a door: lessons="+o+" minutes="+e+" and "+n+" < "+t+"? so "+(n<t?"yes":"no"),DBLLog.INFO),n<t&&(setSessionProperty(DBLDataConstants.NANO_AWARDED,!0),setSessionProperty(DBLDataConstants.NANO_LESSONS_SINCE_LAST,0),setSessionProperty(DBLDataConstants.NANO_TIME_SINCE_LAST,0)));var e,t,n,o=getSessionProperty(DBLDataConstants.NANO_AWARDED);return o},r.prototype.initChooser=function(){this._skinController.renderChooser(this),this._skinController.lessonData.recordAssignmentData();var e="";-1!=this._skinController.lessonData.indexComplete&&(e+=" complete on "+this._skinController.lessonData.indexComplete),DBLLog.log("LessonChooserAnimation "+e,DBLLog.INFO)},r.prototype.runStartLessonIfAvailable=function(){var e,t=!1;return DBLStateManager.getProperty(DBLDataConstants.PROPERTY2_INTRO_VIDEO_SEEN_ENGAGEMENT+engagement)||(e=DBLDataUtils.getIntroMovieFqn(),e={name:"Welcome",videoURL:"assets/media/engagement/intermediate/videos/conceptvideos/"+language+"/high/"+e,openingVideo:!0,lessonId:-1,fqln:"",statuses:[],boxName:o.RECOMMENDATIONS,isNeonData:!0,type:r.LESSONINFO_TYPE_DOOR},this.adjustIntroVideoLessonInfo(e),this.doChooseLesson(e),t=!0),t},r.prototype.adjustIntroVideoLessonInfo=function(e){void 0!==rootParams.autosave&&DBLStateManager.getProperty(DBLDataConstants.SEEN_PRIMARY_FTUE)&&e.videoURL.indexOf("DBLAMoviePaperFrenzy.mp4")&&(e.videoURL=e.videoURL.replace("DBLAMoviePaperFrenzy.mp4","DBLAMovieGraduateAndPaperFrenzy.mp4"))},r.prototype.chooseLesson=function(e){var e=e.target,t=e.lessonData;shell.enableHelp=!1,this.mouseEnabled=this.mouseChildren=!1,t.type==r.LESSONINFO_TYPE_DOOR?(setSessionProperty(DBLDataConstants.NANO_AWARDED,!1),DBLLog.log("Nanogame door clicked",DBLLog.INFO),this.cancelIconLoading(),this.chooseNanogame(),this.progressToNanogame(e)):(DBLLog.log("id: "+t.name+" type: "+(null==(e=t.type)?void 0:e.toString())+" status: "+t.status,DBLLog.INFO),setSessionProperty(DBLDataConstants.PREV_LAUNCH,{name:t.name,lessonId:t.lessonId}),this.doChooseLesson(t))},r.prototype.progressToNanogame=function(e){setSessionProperty(DBLDataConstants.PREV_LAUNCH,null),this.doShowNanogame(e)},r.prototype.getRecentlyPlayedNanogames=function(){return DBLStateManager.getProperty(DBLDataConstants.PROPERTY2_NANOGAMES_RECENTLY_PLAYED)||[]},r.prototype.setNanogameInfo=function(e,t){DBLStateManager.setProperty(DBLDataConstants.PROPERTY2_NANOGAMES_RECENTLY_PLAYED,e),setSessionProperty(DBLDataConstants.NANO_VARIATION,t)},r.prototype.chooseNanogame=function(){var e,t=objectFromFQN(DBLDataConstants.NANOGAME_DATA_FQN),n=this.getRecentlyPlayedNanogames(),o=[];for(e in t)e&&-1==n.indexOf(e)&&t[e]instanceof Object&&o.push(e);0==o.length&&(o=n,n=[],1<o.length)&&o.pop();var s=Math.floor(Math.random()*o.length),i=t[o[s]],i=DBLCapabilities.hasKeyboard()?i.desktop_variations:i.mobile_variations,i=JSON.parse(i),a=Math.floor(Math.random()*i.length),r=o[s],i=(n.push(r),this.setNanogameInfo(n,i[a]),DBLStateManager.getProperty(DBLDataConstants.PROPERTY2_NANOGAME_PLAYS)||{});return i[r]=(i[r]||0)+1,DBLStateManager.setProperty(DBLDataConstants.PROPERTY2_NANOGAME_PLAYS,i),o[s]},r.prototype.doShowNanogame=function(e){DBLStateManager.syncProperties(function(){shell.loadScreen(DBLScreenConstants.NANOGAME_SCREEN)})},r.prototype.doChooseLesson=function(e){setSessionProperty(DBLDataConstants.CUR_ASSIGNMENT_TYPE,e.assignmentType),shell.loadLesson(e)},r.prototype.cancelIconLoading=function(){for(var e=0;e<this._lessonLayout.numChildren;e++){var t=this._lessonLayout.getItem(e);t.item&&t.item.cancelRender(),t.tempItem&&t.tempItem.cancelRender()}},r.prototype.triggerShowAssignedLessonCompleteAdd=function(){null==this._assignedLessonComplete&&(this._assignedLessonComplete=new o.FlexCompleteAnimation,this._assignedLessonComplete.x=520,this._assignedLessonComplete.y=303,this._assignedLessonComplete.text=translate("Assignment Complete!"),this._assignedLessonCompleteScrim=new createjs.Shape,this._assignedLessonCompleteScrim.graphics.beginFill(createjs.Graphics.getRGB(0,0,0,.3)),this._assignedLessonCompleteScrim.graphics.drawRect(0,0,1024,768),this._assignedLessonCompleteScrim.graphics.endFill()),this._assignedLessonComplete.clip="GOAL"==getSessionProperty(DBLDataConstants.CUR_ASSIGNMENT_TYPE)?this._assignedLessonComplete.clip=DBLAsset.create(o.FlexConstants.LESSONCHOOSER_ASSIGNEDLESSONCOMPLETE_ONGOING,o.FlexConstants.LESSONCHOOSER_BUNDLE):this._assignedLessonComplete.clip=DBLAsset.create(o.FlexConstants.LESSONCHOOSER_ASSIGNEDLESSONCOMPLETE,o.FlexConstants.LESSONCHOOSER_BUNDLE),this._assignedLessonComplete.play(this.triggerShowAssignedLessonCompleteRemove.bind(this)),this.addChild(this._assignedLessonCompleteScrim),this.addChild(this._assignedLessonComplete),a11y.playAlert("flexAlertAssignmentComplete")},r.prototype.triggerShowAssignedLessonCompleteRemove=function(){this.removeChild(this._assignedLessonCompleteScrim),this.removeChild(this._assignedLessonComplete),this._assignedLessonComplete.cleanup(),this._assignedLessonComplete=null,this._assignedLessonCompleteScrim=null},r.prototype.finishShow=function(){shell.enableHeader(!0),this.mouseEnabled=this.mouseChildren=!0,shell.enableHelp=!0,this._skinController.hasProgress&&0<__requestEnjoymentRating&&100*DBLRandom.seededRandomGeneralPurpose()<__requestEnjoymentRating&&(__requestEnjoymentRating=0,__requestLessonRating=0,this.createEnjoymentFeedbackDialog()),this._skinController.lessonData.recordPrevLessonData()},r.prototype.createEnjoymentFeedbackDialog=function(){var e=this,t=(shell.showContentScrim(!0),shell.enableShellComponents(!1,!1,!1,!1),engagementStage.getBounds()),n=t.width/1024;this._enjoymentRatingDialog=new i(!0,s.PERCENT_ENTER_CHOOSER),this._enjoymentRatingDialog.scaleX=this._enjoymentRatingDialog.scaleY=n,this._enjoymentRatingDialog.x=(t.width-this._enjoymentRatingDialog.getTransformedBounds().width)/2+7,this._enjoymentRatingDialog.y=r.Y_ENJOYMENT_FEEDBACK*n,this._enjoymentRatingDialog.addEventListener(a.SUBMIT_CLOSE,function(){e.closeLessonFeedbackDialog(!1)}),this._enjoymentRatingDialog.addEventListener(a.DISMISS_CLOSE,function(){e.closeLessonFeedbackDialog(!0)}),engagementStage.addChild(this._enjoymentRatingDialog)},r.prototype.resize=function(){var e=engagementStage.getBounds(),t=e.width/1024;this._enjoymentRatingDialog&&(this._enjoymentRatingDialog.scaleX=this._enjoymentRatingDialog.scaleY=t,this._enjoymentRatingDialog.x=(e.width-this._enjoymentRatingDialog.getTransformedBounds().width)/2+7,this._enjoymentRatingDialog.y=r.Y_ENJOYMENT_FEEDBACK*t)},r.prototype.closeLessonFeedbackDialog=function(e){void 0===e&&(e=!0),shell.hideContentScrim(),shell.enableShellComponents(!0,!0,!0,!0),engagementStage.removeChild(this._enjoymentRatingDialog),this._enjoymentRatingDialog.removeAllEventListeners(),this._enjoymentRatingDialog.cleanup(),this._enjoymentRatingDialog=null},r.prototype.help=function(){this._helpAudioHelper.help()},r.prototype.tick24=function(e){for(;0<e--;)this._lessonLayout&&this._lessonLayout.tick24(),this._skinController&&this._skinController.tick24(),this._assignedLessonComplete&&this._assignedLessonComplete.tick24()},r.prototype.getAccessibilityData=function(){return this._lessonLayout.getAccessibilityData()},r.LESSONINFO_TYPE_LESSON=0,r.LESSONINFO_TYPE_DOOR=3,r.Y_ENJOYMENT_FEEDBACK=135,r);function r(){var e=t.call(this)||this;return e.LESSONS_PER_PAGE=8,e._helpAudioHelper=new DBLHelpAudioHelper(o.FlexConstants.HELP_AUDIO),e._buttonsFactory=new o.LessonChooserButtonsFactory(e),e}o.LessonChooserFlex=e})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(l=>{var e;function t(){return e.call(this)||this}e=l.FlexSkinController,__extends(t,e),t.prototype.cleanup=function(){e.prototype.cleanup.call(this),this._lessonAnimation.cleanup()},t.prototype.loadLessonLayout=function(e,t){e.lessonLayout.loadLayout(t)},t.prototype.addLayoutItemForBox=function(e,t){var n,o,s=e.lessonLayout,i=l.BUTTONS_DATA[t.boxName];return t.boxName&&s.getBox(t.boxName)?((n=new l.FlexLayoutItem).setBounds(0,0,i.width,i.heihght),(o=e.buttonsFactory.obtain(i.type,t)).render(e.chooseLesson.bind(e),null),n.item=o,"swap"==t.action&&((o=e.buttonsFactory.obtain(i.type,t.oldItemData)).render(null,null),n.tempItem=o,n.item.visible=!1),s.addItemWithBox(n,t.boxName),n):null},t.prototype.renderChooser=function(o){var e,t,s=this,i=o.lessonLayout,n=this._lessonData.lessons,a=this._lessonData.lessonsPrev,r=DBLAsset.create(l.FlexConstants.LESSONCHOOSER_LESSONBUTTONCORE,l.FlexConstants.LESSONCHOOSER_BUNDLE),r=(DBLGraphicUtils.cacheContainer(r),getSessionProperty(DBLDataConstants.PREV_HAD_ASSIGNMENTS));return 0!=(null==a?void 0:a.length)&&r||this._lessonData.oldAndNewAssignments()?(this.loadLessonLayout(o,"Default"),this._lessonData.oldAndNewAssignments()||(r=i.getBox(l.RECOMMENDATIONS),t=(e=i.getBox(l.ASSIGNMENTS)).fixHeight-e.minSize,e.setEmptyBox(),e.addSubtitle(),r.y=r.posY-t),setSessionProperty(DBLDataConstants.PREV_HAD_ASSIGNMENTS,!0)):this.loadLessonLayout(o,"RecommendationsOnly"),this._weeklyGoalProgress=new l.WeeklyGoalProgress,this._weeklyGoalProgress.init(),i.addItemWithBox(this._weeklyGoalProgress,l.WEEKLY_GOALS),n&&0==(null==a?void 0:a.length)?n.forEach(function(e){s.addLayoutItemForBox(o,e)}):n.forEach(function(e){var t,n=s.addLayoutItemForBox(o,e);n&&(t=i.getBox(e.boxName),s._lessonAnimation.addAnimation(e,t,n))}),this._lessonData.trimLessonData(),this._boxesPositions&&i.getBoxes().forEach(function(e,t){e.setBoxPos(s._boxesPositions[t])}),!0},t.prototype.filterAndOrderLessons=function(e){this._lessonData.filterAndOrderLessons(e)},t.prototype.animateShow=function(e){this._lessonAnimation.animateShow(e,this._lessonData,this.hasProgress)},t.prototype.animateHide=function(e,t){this._lessonAnimation.animateHide(e,t)},l.NeonSkinController=t})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(e=>{var t;function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._prevSessionLessonsCompleted=0,e._curSessionLessonsCompleted=0,e._sessionStartTime=0,e._timesLastUpdateTime=0,e}function h(e){console.error(e),alert(e)}t=createjs.Container,__extends(n,t),n.prototype.init=function(){this.initSessionData(),this.setLessonsCompletedThisWeek(),this.initUI()},n.prototype.initUI=function(){},n.prototype.initSessionData=function(){this._sessionStartTime=getSessionProperty(DBLDataConstants.CUR_SESSION_START),this._sessionStartTime||(this._sessionStartTime=(new Date).getTime(),setSessionProperty(DBLDataConstants.CUR_SESSION_START,this._sessionStartTime))},n.prototype.setLessonsCompletedThisWeek=function(){var e=getSessionProperty(DBLDataConstants.INITIAL_LESSONS_COMPLETED),t=__lessonsCompletedThisWeek||0;this._prevSessionLessonsCompleted=getSessionProperty(DBLDataConstants.CUR_LESSONS_COMPLETED),this._curSessionLessonsCompleted=Math.max(0,t-e),setSessionProperty(DBLDataConstants.CUR_LESSONS_COMPLETED,this._curSessionLessonsCompleted)},n.prototype.updateSessionAndWeeklyTime=function(){var e=(new Date).getTime();1e3<Math.max(0,e-this._timesLastUpdateTime)&&(this._timesLastUpdateTime=e,e=Math.max(0,e-this._sessionStartTime),this.updateVisualSessionAndWeeklyTime(e,__initialWeeklyTime))},n.prototype.updateVisualSessionAndWeeklyTime=function(e,t){},n.prototype.tick24=function(){this.updateSessionAndWeeklyTime(),this.tick24Hook()},n.prototype.tick24Hook=function(){},Object.defineProperty(n.prototype,"prevSessionLessonsCompleted",{get:function(){return this._prevSessionLessonsCompleted},set:function(e){this._prevSessionLessonsCompleted=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"curSessionLessonsCompleted",{get:function(){return this._curSessionLessonsCompleted},set:function(e){this._curSessionLessonsCompleted=e},enumerable:!1,configurable:!0}),n.prototype.cleanup=function(){this.removeAllEventListeners(),this.cleanupHook(),this.removeAllChildren()},n.prototype.cleanupHook=function(){},e.WeeklyGoalView=n,e.createTimeString=function(e,t){void 0===t&&(t=!0);var e=DBLUtils.toInt(e/1e3),n=DBLUtils.toInt(e/3600),o=(e%=3600,DBLUtils.toInt(e/60).toString()),e=(e%=60).toString();return 1==o.length&&(o="0"+o),1==e.length&&(e="0"+e),t?(0<n?n+":":"")+o+":"+e:translate("<H>h <M>m").replace("<H>",n.toString()).replace("<M>",o)},e.findChild=function e(t,n,o,s){void 0===o&&(o=null),void 0===s&&(s=!0);var i=n instanceof Array&&1<n.length,a=n instanceof Array?n[0]:n,r=t.getChildByName(a);if(!r)for(var l in t)if(l==a&&t[l]instanceof createjs.DisplayObject){r=t[l];break}if(!r||i||!o||r instanceof o||h("Found child with name '"+a+"' is not of the expected type "+o.name),!r)for(var l in t)if(t[l]instanceof createjs.Container&&t[l]!=t.parent&&(r=e(t[l],a,o,!1)))break;return i&&r?r instanceof createjs.Container?e(r,n.slice(1),o,s):(h("Found DisplayObject with name '"+a+"' is not a Container"),null):(s&&!r&&(i="Cannot find "+(o?o.name+" ":"")+(n instanceof Array?n.join("->"):a),t.name&&(i+=" in "+t.name),h(i)),r)},e.showError=h})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{}),(e=>{var t;function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._streakNodesCount=5,e.count=0,e.currentWeekStreak=0,e.animationFlagStop=!1,e}t=e.WeeklyGoalView,__extends(n,t),n.prototype.initUI=function(){this._background=DBLAsset.create("WeekStreakLayout",e.WEEKLY_GOAL_PROGRESS_PATH_FLEX),this._streakNodesCount=this.getWeekStreakNodesCount(),this._background.setBounds(0,0,180,45),this.addChild(this._background),this._background.lblSubtitle.text=translate(this._background.lblSubtitle.text),DBLFont.fixTextFields(this._background.lblSubtitle),this._background.lblLessonsComplete.text=__lessonsCompletedThisWeek,DBLFont.fixTextFields(this._background.lblLessonsComplete),this.mouseEnabled=!1},n.prototype.getWeekStreakNodesCount=function(){return this._background.children.reduce(function(e,t){return e+(-1!==t.name.indexOf("astWeekStreak")?1:0)},0)},n.prototype.tick24Hook=function(){if(!this.animationFlagStop)if(this.count++,__lessonsCompletedThisWeek>this._streakNodesCount){this.currentWeekStreak=this._streakNodesCount,this.animationFlagStop=!0;for(var e=0;e<this._streakNodesCount;e++){var t=this._background["astWeekStreak_".concat(e)];t&&t.gotoAndStop(t.totalFrames-1)}}else{var n;24<this.count&&this.currentWeekStreak<__lessonsCompletedThisWeek&&((n=this._background["astWeekStreak_".concat(this.currentWeekStreak)])&&!n.hasEventListener("nodeEndAnimation")&&n.addEventListener("nodeEndAnimation",this.onNodeEndAnimation.bind(this)),DBLAsset.advanceMovieClip(n))}},n.prototype.onNodeEndAnimation=function(e){e=e.currentTarget;e&&e.removeEventListener("nodeEndAnimation",this.onNodeEndAnimation.bind(this)),this.currentWeekStreak++,(this.currentWeekStreak>=__lessonsCompletedThisWeek||this.currentWeekStreak>=this._streakNodesCount)&&(this.animationFlagStop=!0)},n.prototype.getAccessibilityData=function(){return{role:"span",display:{object:this._background},tabIndex:-1,label:a11y.findMappingAndReplace({id:"weeklyProgressLabel",params:{weeklyLessonsCompleted:"".concat(__lessonsCompletedThisWeek)}}),enabled:!0}},e.WeeklyGoalProgress=n})(engagement_intermediate_lessonchooserflex=engagement_intermediate_lessonchooserflex||{});