var DBLArrayUtilities,DBLAlgoUtils,DBLArrangeWorkingSetUtils,DBLExpressionUtils,library_generatorcore,DBLSeededRandomDeprecated,DBLSeededRandomUtils,DBLStringUtils,__extends=this&&this.__extends||(()=>{var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}})(),DBLDupHelper=(library_generatorcore=library_generatorcore||{},(t=>{function n(t,e){for(var r=t.length-1;0<=r;--r)t[r]==e&&t.splice(r,1)}function i(t){return 0==t.length?null:t.shift()}function e(t,e){var r;e>=t.length-1||(r=t[e],t.splice(e,1),t.push(r))}function o(t,e){for(var r=t.length-1;0<=r;--r)t[r]==e&&t.splice(r,1)}t.flatten=function t(e){if(1==e.length&&!(e[0]instanceof Array))return e;for(var r=[],n=0;n<e.length;n++)r=e[n]instanceof Array?r.concat(t(e[n])):r.concat(e[n]);return r},t.swap=function(t,e,r){var n=t[e];t[e]=t[r],t[r]=n},t.compare=function t(e,r){var n=!0;if(DBLUtils.isUndefOrNull(e)&&DBLUtils.isUndefOrNull(r))n=!0;else if(DBLUtils.isUndefOrNull(e)||DBLUtils.isUndefOrNull(r))n=!1;else if(e.length!=r.length)n=!1;else for(var i=0;i<e.length;i++)if(e[i]instanceof Array&&r[i]instanceof Array){if(!t(e[i],r[i])){n=!1;break}}else{if(e[i]instanceof Array||r[i]instanceof Array)throw new Error("Attempt to compare array to non-array.");if(e[i]!=r[i]){n=!1;break}}return n},t.quickCompare=function t(e,r,n,i){if(void 0===i&&(i=!1),!e||!r)return e==r;var o=e.length;if(r.length!=o)return!1;(n=void 0!==n&&n)&&(e=e.concat().sort(),r=r.concat().sort());for(var a=0;a<o;a++)if(e[a]!=r[a]){if(!(i&&e[a]instanceof Array&&r[a]instanceof Array))return!1;if(!t(e[a],r[a],n,!0))return!1}return!0},t.fromCSV=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=",");var n=[];if(null!=t&&""!=t)for(var i=t.split(r),o=i.length,a=0;a<o;a++)n[a]=e?i[a].replace(/^\s+|\s+$/g,""):i[a];return n},t.concatUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],n=0;n<t.length;n++)if(t[n]instanceof Array)for(var i=0;i<t[n].length;i++)-1==r.indexOf(t[n][i])&&r.push(t[n][i]);return r},t.constructArray=function(t,e){for(var r=[],n=0;n<t;n++)r.push(e);return r},t.crossProduct=function(t,e){for(var r=[],n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r.push([t[n],e[i]]);return r},t.fillWithValue=function(t,e,r,n,i){var o;for(void 0===i&&(i=1),o=n=void 0===n?0:n;o<n+r*i;o+=i)t[o]=e;return t},t.removeDuplicates=function(t){for(var e=[],r=0;r<t.length;r++){for(var n=!1,i=0;i<e.length;i++)if(e[i]==t[r]){n=!0;break}n||e.push(t[r])}return e},t.removeDuplicates2=function(t,e){for(var r=[],n=0;n<t.length;n++){for(var i=!1,o=0;o<e.length;o++)if(e[o]==t[n]){i=!0;break}i||r.push(t[n])}return r},t.removeValueFromArray=n,t.removeValuesFromArray=function(t,e){for(var r=0;r<e.length;r++)n(t,e[r])},t.arrayDifference=function(t,e){for(var r=[],n=0;n<t.length;n++){for(var i=!0,o=0;o<e.length&&i;o++)DBLUtils.equal(t[n],e[o])&&(i=!1);i&&r.push(t[n])}return r},t.replaceValueInArrayWithValue=function(t,e,r){for(var n=!1,i=0;i<t.length;i++)if(t[i]==e){n=!0,t[i]=r;break}return n},t.removeValueAtFromArray=function(t,e){var r=t[e];return t.splice(e,1),r},t.sequenceFillInteger=function(t,e,r,n,i){void 0===n&&(n=1),void 0===i&&(i=1);for(var o,a=0,s=0;s<i;s++)for(o=e;o<=r;o+=n)t[a++]=o;return t},t.sum=function(t,e){void 0===e&&(e=!1);for(var r=0,n=0;n<t.length;n++)"number"==typeof t[n]?r+=t[n]:e&&!isNaN(t[n])&&"string"==typeof t[n]&&(r+=parseFloat(t[n]));return r},t.absSum=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.abs(t[r]);return e},t.commonItems=function(t,e){for(var r=[],n=0;n<t.length;n++)-1!=e.indexOf(t[n])&&-1===r.indexOf(t[n])&&r.push(t[n]);return r},t.numCommonItems=function(t,e){for(var r=0,n=0;n<t.length;n++)-1!=e.indexOf(t[n])&&r++;return r},t.arrayContainsValue=function(t,e){return-1!=t.indexOf(e)},t.arrayContainsLesserValue=function(t,e){for(var r=!1,n=0;n<t.length;n++)if(t[n]<e){r=!0;break}return r},t.arrayContainsGreaterValue=function(t,e){for(var r=!1,n=0;n<t.length;n++)if(e<t[n]){r=!0;break}return r},t.nullArrayEntriesByIndex=function(t,e){for(var r=t.slice(),n=0;n<e.length;n++)r[e[n]]=null;return r},t.nullArrayEntriesByIndexNot=function(t,e){for(var r=t.slice(),n=0;n<t.length;n++){for(var i=!0,o=0;o<e.length;o++)e[o]==n&&(i=!1);i&&(r[n]=null)}return r},t.getKeys=function(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e);return r},t.generateAllCombinations=function t(e,r){var n=[];if(0==r)return[[]];for(var i=0;i<e.length-r+1;i++)for(var o=t(e.slice(i+1),r-1),a=0;a<o.length;a++)o[a].unshift(e[i]),n.push(o[a]);return n},t.generateAllPermutations=function(t){for(var e=[[[0]]],r=1;r<t;r++){e.push([]);for(var n=0;n<e[r-1].length;n++)for(var i=0;i<=r;i++){var o=e[r-1][n].concat();o.splice(i,0,r),e[r].push(o)}}return e},t.generateArrayPermutations=function t(e,r,n){var i;if(void 0===r&&(r=[]),(n=void 0===n?0:n)>=e.length-1)r.push(e.concat());else for(var o=n;o<e.length;o++)e[n]=(i=[e[o],e[n]])[0],e[o]=i[1],t(e,r,n+1),e[n]=(i=[e[o],e[n]])[0],e[o]=i[1];return r},t.generatePermutationWithDuplicates=function(t,e){var r=[];return function t(e,r,n,i,o){if(e==r)o.push(i.concat());else for(var a=0;a<n;a++)i[e]=a,t(e+1,r,n,i,o)}(0,e,t,new Array(e),r),r},t.generateVariations=function(t,e){var r=[];return function t(e,r,n,i,o){if(r==n)o.push(i.concat());else if(r<n)if(r+1==n)i[r]=e,t(0,r+1,n,i,o);else for(var a=e;0<=a;a--)i[r]=a,t(e-a,r+1,n,i,o)}(e,0,t,new Array(t),r),r},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.replicateToSize=function(t,e){for(var r=[];r.length<e;)r.splice(r.length,0,t);return r.slice(0,e)},t.takeOne=i,t.takeSome=function(t,e){for(var r=[],n=0;n<e;++n)r.push(i(t));return r},t.moveNthToEnd=e,t.moveOneToEnd=function(t){e(t,0)},t.concatArray=function(t,e){for(var r=0;r<e.length;++r)t.push(e[r])},t.removeValue=o,t.removeValues=function(t,e){for(var r=t.length-1;0<=r;--r)-1<e.indexOf(t[r])&&t.splice(r,1)},t.nullifyValue=function(t,e){for(var r=t.length-1;0<=r;--r)t[r]==e&&(t[r]=null)},t.nullifyValues=function(t,e){for(var r=t.length-1;0<=r;--r)-1<e.indexOf(t[r])&&(t[r]=null)},t.removeNulls=function(t){o(t,null)},t.removeDuplicatesCollection=function(t){for(var e={},r=0;r<t.length-1;++r)if(t[r]!=e)for(var n=r+1;n<t.length;++n)t[n]==t[r]&&(t[n]=e);o(t,e)},t.removeMatching=function(t,e){for(var r=t.length-1;0<=r;--r)e.apply(t[r])&&t.splice(r,1)},t.removeNonMatching=function(t,e){for(var r=t.length-1;0<=r;--r)e.apply(t[r])||t.splice(r,1)},t.nullifyMatching=function(t,e){for(var r=t.length-1;0<=r;--r)e.apply(t[r])&&(t[r]=null)},t.nullifyNonMatching=function(t,e){for(var r=t.length-1;0<=r;--r)e.apply(t[r])||(t[r]=null)},t.mapFunction=function(t,e,r){for(var n=[0].concat(r=void 0===r?null:r),i=0;i<t.length;++i)n[0]=t[i],t[i]=e.apply(null,n)},t.multiplyByNumber=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push(t[n]*e);return r},t.reverseArray=function(t){for(var e=0;e<(t.length-1)/2;++e){var r=t[e];t[e]=t[t.length-1-e],t[t.length-1-e]=r}},t.getLastEntries=function(t,e){return e=e>t.length?0:t.length-e,t.slice(e)},t.toString=function(t){return"["+t.join(", ")+"]"},t.average=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length},t.max=function(t){for(var e=Number.MIN_VALUE,r=0;r<t.length;r++)e=Math.max(e,t[r]);return e},t.min=function(t){for(var e=Number.MAX_VALUE,r=0;r<t.length;r++)e=Math.min(e,t[r]);return e},t.detectIndex=function(t,e){for(var r=0;r<t.length;r++)if(e instanceof Function){if(e.call(null,t[r]))return r}else if(e instanceof RegExp&&t[r].toString().match(e))return r;return-1},t.map=function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e.call(t[n],t[n]);return r},t.join=function(t,e){for(var r="",n=0;n<t.length;n++)r+=(0<n?e:"")+t[n];return r},t.filter=function(t,e){for(var r=[],n=0;n<t.length;n++)e.call(t[n],t[n])&&r.push(t[n]);return r},t.NUMERIC=function(t,e){return t-e},t.sortOn=function(t,r,n){t.sort(function(t,e){return n(t[r],e[r])})},t.range=function(t,e){if(e<t)return[];for(var r=[],n=t;n<=e;n++)r.push(n);return r},t.topologicalSort=function(t,e){for(var r=[],n=t.concat();r.length<t.length;){for(var i=!1,o=0;o<n.length;o++){var a=n[o];if(!e[a]||!Object.keys(e[a]).length){r.push(a),n[o]=n[n.length-1],n.pop();for(var s=0,u=n;s<u.length;s++){var l=u[s];e[l]&&delete e[l][a]}i=!0;break}}if(!i)throw"Cyclic dependencies found ".concat(JSON.stringify(e))}return r}})(DBLArrayUtilities=DBLArrayUtilities||{}),(t=>{t.getPossibleSums=function(t,e,r){return(t=((t,e,r)=>{var n=new Array(t.length+1),i=(n[0]=DBLArrayUtilities.constructArray(e+1,!1),n[0][0]=!0,new Array(t.length+1));i[0]=DBLArrayUtilities.constructArray(e+1,0);for(var o=1;o<n.length;o++){n[o]=new Array(e+1),i[o]=new Array(e+1);for(var a,s,u=0;u<=e;u++)n[o][u]=n[o-1][u],i[o][u]=i[o-1][u],u>=t[o-1]&&(a=u-t[o-1],s=i[o][a]+1,n[o][a])&&(!n[o][u]||s<i[o][u])&&(-1==r||s<=r)&&(n[o][u]=!0,i[o][u]=s)}return n})(t,e,r=void 0===r?-1:r))[t.length-1]},t.howToBuildSum=function(t,e,r,n){void 0===n&&(n=!0),null==(r=void 0===r?null:r)&&(r=t);var i,o=new Array(t.length+1);for(o[0]=[{p:!0,m:0}],i=1;i<=e;i++)o[0][i]={p:!1,m:0};for(i=1;i<o.length;i++){o[i]=new Array(e+1);for(var a=0;a<=e;a++){o[i][a]=DBLArrayUtilities.clone(o[i-1][a]);var s,u=n?i:i-1;0<=(s=a-t[i-1])&&o[u][s].p&&(u=1+o[u][s].m,!o[i][a].p||o[i][a].m>u)&&(o[i][a].p=!0,o[i][a].m=u)}}var l=[];if(o[o.length-1][e].p)for(var h=o.length-1,c=e;0<h&&0<c;)0<=(s=c-t[h-1])&&o[h][s].p&&o[h][c].m-1==o[h][s].m?(l.push(r[h-1]),c-=t[h-1]):h--;return l.reverse()}})(DBLAlgoUtils=DBLAlgoUtils||{}),(t=>{t.arrangeGreedy=function(t,e){if(null==t||t.length<=2)return t;for(var r=this.groupByCollection(t,e),n=[],i=[],o=0;o<r.length;o++)n[o]=t.length/r[o].length,i[o]=0;for(var a=[];0<r.length;){for(var s=0,o=1;o<r.length;o++){r[o];(i[o]<i[s]||i[o]==i[s]&&r[o].length>r[s].length)&&(s=o)}var u=r[s];for(a.push(u[u.length-1]),u.splice(u.length-1,1),i[s]=n[s],0==u.length&&(r.splice(s,1),n.splice(s,1),i.splice(s,1)),o=0;o<r.length;o++)i[o]=Math.max(0,i[o]-1)}return a},t.arrangeRandom=function(t,e){for(var r=this.groupByCollection(t,e),n=[];1<r.length;){var i=DBLSeededRandomUtils.generateRandomInteger(1,r.length-1),o=r[i];n.push(o.pop()),0<o.length?DBLArrayUtilities.swap(r,0,i):r.splice(i,1)}if(1==r.length)for(var a=0;a<r[0].length;a++)n.push(r[0][a]);return n},t.groupByCollection=function(t,e){for(var r=[],n=0,i=t;n<i.length;n++){for(var o=i[n],a=null,s=0,u=r;s<u.length;s++){var l=u[s];if(e.apply(null,[l[0],o])){a=l;break}}a?a.push(o):r.push(a=[o])}return r}})(DBLArrangeWorkingSetUtils=DBLArrangeWorkingSetUtils||{}),(()=>{function t(){this.DEFAULT_GAP_BETWEEN_DUPES=!1===rootParams.dedup?0:3,this._gap=this.DEFAULT_GAP_BETWEEN_DUPES,this._dupesWindow=[]}return t.prototype.setGapBetweenDupes=function(t){!1!==rootParams.dedup&&(this._gap=t)},t.prototype.getGapBetweenDupes=function(){return this._gap},t.prototype.setCompareFunction=function(t){this._compareFunction=t},t.prototype.rearrangeWorkingSet=function(t){for(var e=this._dupesWindow.concat().reverse(),r=t.length,n=!1,i=0;i<r&&0<e.length;i++){for(var o,a=i;a<r&&this.arrayContainsValue(e,t[a]);)a++;if(a==r)return void DBLLog.log("Cannot remove dupes!",DBLLog.WARN);a!=i&&(o=t[i],t[i]=t[a],t[a]=o,n=!0),e.length>=this._gap-i&&e.pop()}n&&DBLLog.log("Dup-helped had to rearrange the working set.",DBLLog.DEBUG)},t.prototype.valuesEqual=function(t,e){return t.toString()==e.toString()},t.prototype.arrayContainsValue=function(t,e){for(var r=this._compareFunction||this.valuesEqual,n=0;n<t.length;n++)if(r.call(this,t[n],e))return!0;return!1},t.prototype.slideDupesWindow=function(t){for(;0<this._dupesWindow.length&&this._dupesWindow.length>=this._gap;)this._dupesWindow.splice(0,1);0<this._gap&&this._dupesWindow.push(t)},t})()),DBLSolution=((t=>{function h(t){switch(t){case DBLUtils.PLUS_SYMBOL:case DBLUtils.MINUS_SYMBOL:return 2;case DBLUtils.TIMES_SYMBOL:case DBLUtils.MODULUS_SYMBOL:case DBLUtils.DIVIDE_SYMBOL:return 3;case DBLUtils.EQUAL_SYMBOL:case DBLUtils.NE_SYMBOL:case DBLUtils.LT_SYMBOL:case DBLUtils.LE_SYMBOL:case DBLUtils.GT_SYMBOL:case DBLUtils.GE_SYMBOL:return 1;default:return 0}}function c(t,e,r,n){switch(void 0===n&&(n=!1),DBLUtils.normalizeSymbol(t)){case DBLUtils.PLUS_SYMBOL:return e+r;case DBLUtils.MINUS_SYMBOL:return e-r;case DBLUtils.TIMES_SYMBOL:return e*r;case DBLUtils.DIVIDE_SYMBOL:return Math.floor(e/r);case DBLUtils.EQUAL_SYMBOL:return e==r?n?e:1:0;case DBLUtils.NE_SYMBOL:return e!=r?1:0;case DBLUtils.GT_SYMBOL:return r<e?1:0;case DBLUtils.GE_SYMBOL:return r<=e?1:0;case DBLUtils.LT_SYMBOL:return e<r?1:0;case DBLUtils.LE_SYMBOL:return e<=r?1:0;case DBLUtils.MODULUS_SYMBOL:return e%r;default:return 0}}t.isNumber=function(t){return parseInt(t).toString()==t},t.splitNumber=function(t,e,r,n){for(var i=0,o=0,a=[],s=0;s<e;s++)i+=r[s],o+=n[s];if(t<i||o<t)return[];for(s=0;s<e;s++)a.push(r[s]);for(var u=i,l=DBLSeededRandomDeprecated.makeIntRandom(0,e-1);u<t;){for(s=0;s<e;s++){var h,c=l[s];a[c]!=n[c]&&t!=u&&(h=DBLSeededRandomUtils.generateRandomInteger(1,Math.min(n[c]-a[c],t-u)),a[c]+=h,u+=h)}DBLSeededRandomDeprecated.randomizeArray(l)}return a},t.constructExpression=function(t,e){for(var r="",n=0;n<t.length;n++)""!=r&&(r+=" "+e+" "),r+=t[n];return r},t.isVariable=function(t){return 1==t.length&&t.charCodeAt(0)>="A".charCodeAt(0)&&t.charCodeAt(0)<="Z".charCodeAt(0)},t.isOperation=function(t){return t==DBLUtils.EQUAL_SYMBOL||t==DBLUtils.PLUS_SYMBOL||t==DBLUtils.TIMES_SYMBOL||t==DBLUtils.DIVIDE_SYMBOL||t==DBLUtils.MINUS_SYMBOL||t==DBLUtils.NE_SYMBOL||t==DBLUtils.MODULUS_SYMBOL||t==DBLUtils.GT_SYMBOL||t==DBLUtils.GE_SYMBOL||t==DBLUtils.LT_SYMBOL||t==DBLUtils.LE_SYMBOL||t==DBLUtils.UNKNOWN_SYMBOL},t.isModulusRule=function(t){return!DBLUtils.isUndefOrNull(t)&&!(5!=(t=t.split(" ")).length||!this.isVariable(t[0])||"0"!=t[4]||DBLUtils.normalizeSymbol(t[1])!=DBLUtils.MODULUS_SYMBOL||DBLUtils.normalizeSymbol(t[3])!=DBLUtils.EQUAL_SYMBOL)},t.getModuleOfModulusRule=function(t){return parseInt(t.split(" ")[2])},t.getPriority=h,t.getChildFriendlyName=function(t){if(DBLUtils.isUndefOrNull(t)||0==t.length)return"";switch(t=t.replace("*",DBLUtils.TIMES_SYMBOL).replace("/",DBLUtils.DIVIDE_SYMBOL)){case"A × 2 = B":case"2 × A = B":case"B = A × 2":case"B = 2 × A":return"Double";case"A × 2 + 1 = B":case"2 × A + 1 = B":case"B = A × 2 + 1":case"B = 2 × A + 1":return"Double + 1";case"A × 2 - 1 = B":case"2 × A - 1 = B":case"B = A × 2 - 1":case"B = 2 × A - 1":return"Double - 1";default:return"A"==t.charAt(0)&&9<=t.length?t.substr(2,t.length-6):"B"==t.charAt(0)&&9<=t.length?t.substr(6,t.length-6):t}},t.performOperation=c,t.evaluateExpression=function(t,e){if(0==t.length)return 0;for(var r,n,i=[],o=[],a=t.split(" "),s=0;s<a.length;s++){var u=a[s].toUpperCase();if(this.isVariable(u)&&(u=e[u.charCodeAt(0)-"A".charCodeAt(0)].toString()),u=DBLUtils.normalizeSymbol(u),this.isOperation(u)){for(;0<i.length;){var l=i[i.length-1];if(!(h(l)>=h(u)))break;i.pop(),r=parseFloat(o.pop()),n=parseFloat(o.pop()),o.push(c(l,n,r))}i.push(u)}else o.push(parseInt(u))}for(;0<i.length;)r=parseInt(o.pop()),n=parseInt(o.pop()),o.push(c(i.pop(),n,r));return o[0]},t.generateAllMatchingConstraints=function(t,e,r){for(var n=[],i=t;i<=e;i++)this.checkConstraints(r,i)&&n.push(i);return DBLSeededRandomDeprecated.randomize(n)},t.replaceVarsAndCheckConstraints=function(t,e){for(var r=0;r<t.length;r++)if(!this.replaceVarsAndCheckConstraint(t[r],e))return!1;return!0},t.replaceVarsAndCheckConstraint=function(t,e){return""==t||(t=this.replaceVariables(t,e),1==this.evaluateExpression(t,[]))},t.getVariableCount=function(t){for(var e=0,r=0;r<t.length;r++)this.isVariable(t.charAt(r))&&e++;return e},t.getConstraintVariable=function(t){for(var e=0;e<t.length;e++)if(this.isVariable(t.charAt(e)))return t.charAt(e);return""},t.replaceVariables=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t.charAt(n);this.isVariable(i)?r+=e[i]:r+=i}for(var o=r.indexOf(")");-1!=o;){var a=r.substr(0,o).lastIndexOf("(");if(-1==a)throw new Error("Malformed expression: "+t);var s=r.substr(a+1,o-a-1),o=(r=r.substr(0,a)+this.evaluateExpression(s,[])+r.substr(o+1)).indexOf(")")}return r},t.checkConstraints=function(t,e){for(var r=0;r<t.length;r++)if(!this.checkConstraint(t[r],e))return!1;return!0},t.checkConstraint=function(t,e){return""==t||1==this.evaluateExpression(t,[e])},t.clearPlusMinusSigns=function(t){return t.replace(/\+\s*\-/g,"-")},t.clearExplicitMultiplication=function(e,t){return t.forEach(function(t){e=DBLStringUtils.replaceAll(e,"* ".concat(t),"".concat(t)),e=DBLStringUtils.replaceAll(e,"*".concat(t),"".concat(t))}),e=DBLStringUtils.replaceAll(e,"*(","("),e=DBLStringUtils.replaceAll(e,"* (","(")}})(DBLExpressionUtils=DBLExpressionUtils||{}),(t=>{function e(){}e.calculateNumberOfFactors=function(t){for(var e=1,r=t<0?-t:t,n=2;n*n<=r;n++){for(var i=0;r%n==0;)i++,r/=n;e*=i+1}return 1<r&&(e*=2),e},e.calculatePrimeFactors=function(t){for(var e=[1],r=t<0?-t:t,n=1,i=2;i<=3&&i*i<=r;i++)for(;r%i==0;)r/=e[n++]=i;for(i=6;i*i<=r;i+=6){for(;r%(i-1)==0;)e[n++]=i-1,r/=i-1;for(;r%(i+1)==0;)e[n++]=i+1,r/=i+1}return 1!=r&&(e[n++]=r),r!=t&&(e[n]=t),e},e.isPrime=function(t){return 2==this.calculateNumberOfFactors(t)},e.factorial=function(t){for(var e=t<0?-t:t,r=0==e?1:e;1<--e;)r*=e;return r},t.DBLFactoringUtil=e})(library_generatorcore=library_generatorcore||{}),(t=>{function e(){this._maxAttempts=1e5,this._questionsCount=1,this._previousProblems=[],this._workingSetInvalid=!0,this._gapBetweenDups=10,this._logLevelWhenDupFound=DBLLog.OFF,this._logAfterRetriesMade=Number.MAX_VALUE}e.prototype.isGenerator=function(){return!0},e.prototype.ready=function(){},e.prototype.cleanup=function(){},Object.defineProperty(e.prototype,"questionCount",{get:function(){return this._questionsCount},enumerable:!1,configurable:!0}),e.prototype.logMessage=function(t,e){void 0===e&&(e=DBLLog.ERROR),DBLLog.log(t,e)},e.prototype.generateOneProblem=function(){if(this._workingSetInvalid&&(this._previousProblems=[],this._workingSetInvalid=!1),!1!==rootParams.dedup)for(;this._previousProblems.length>this._gapBetweenDups;)this._previousProblems.shift();for(var t=0;t<this._maxAttempts;t++){var e=this.buildProblem();if(null!=e){for(var r=!1,n=0,i=this._previousProblems;n<i.length;n++){var o=i[n];if(this.valuesEqual(e,o)){r=!0;break}}if(!r){this._previousProblems.push(e);break}}}if(t>this._logAfterRetriesMade&&this.logMessage("Took "+t+" retries to generate the problem.",DBLLog.DEBUG),r&&this._logLevelWhenDupFound<DBLLog.OFF&&this.logMessage("Generator detected a possible duplicate problem.",this._logLevelWhenDupFound),null==e)throw new Error("DBLGeneratorBase exceeded maximum number of attempts");return e},e.prototype.valuesEqual=function(t,e){return!1},e.prototype.buildProblem=function(){return null},e.prototype.generateProblem=function(){},t.DBLGeneratorBase=e})(library_generatorcore=library_generatorcore||{}),(f=>{function n(t,e){for(var r=i(t,e=void 0===e?"generator":e),n=0;n<r.length;++n)t[n]=r[n]}function i(t,e){var r,n=[],i=t.length,o="generator"==(e=void 0===e?"generator":e)?DBLRandom.seededRandomForGenerators:DBLRandom.seededRandomGeneralPurpose,a=Math.floor(o()*i);if(t.length)do{for(r=t.pop();null!=n[a];)a=Math.floor(o()*i)}while(n[a]=r,t.length);return n}f.makeIntRandom=function(t,e,r){return n(t=DBLSeededRandomUtils.makeIntRange(t,e,r=void 0===r?1:r)),t},f.randomizeArray=n,f.randomize=i,f.randomize2=function(t){for(var e,r=t.concat(),n=[],i=0;i<r.length;i++)e=Math.floor(DBLRandom.seededRandomForGenerators()*r.length),n.push(r[e]),r.splice(e,1),i--;return n},f.randomizeFast=function(t,e){if(!t)return null;for(var r=(e=void 0===e?!0:e)?t:t.concat(),n=t.length,i=0;i<n;i++){var o=r[i],a=Math.floor(DBLRandom.seededRandomForGenerators()*n);r[i]=r[a],r[a]=o}return r},f.generateRandomUniqueIntegers=function(t,e,r,n,i){void 0===i&&(i="generator");var o=(n=void 0===n?null:n)?DBLArrayUtilities.removeDuplicates(n):[];if(e<t)throw new Error("Min can NOT be greather then Max: "+t+","+e);var a=0;for(l=0;l<o.length;l++)t<=o[l]&&o[l]<=e&&a++;if(e-t-a+1<r)throw new Error("It is impossible to generate the array of unique numbers given the constraints: Min = "+t+", Max = "+e+", Count = "+r+", Exclude = "+o.toString());var s=[];if(e-t-o.length<5*r||0==r){for(var u=[],l=t;l<=e;l++)DBLArrayUtilities.arrayContainsValue(o,l)||u.push(l);s=(u=f.randomize(u,i)).slice(0,r)}else{for(var h,c=0;s.length<r&&c<10*r;)h=DBLSeededRandomUtils.generateRandomInteger(t,e,i),DBLArrayUtilities.arrayContainsValue(o,h)||DBLArrayUtilities.arrayContainsValue(s,h)||s.push(h),c++;if(c==10*r)throw new Error("Unable to come up with random number that meets the constraints: Min = "+t+", Max = "+e+", Count = "+r+", Exclude = "+o.toString())}return s}})(DBLSeededRandomDeprecated=DBLSeededRandomDeprecated||{}),(l=>{function r(t,e,r){return void 0===r&&(r="generator"),DBLRandom.seededGenerateRandomInteger(t,e,r)}l.makeIntRange=function(t,e,r){void 0===r&&(r=1);var n,i=[];for(t<e&&r<1?r=1:e<t&&-1<r&&(r=-1),n=t;n<=e;n+=r)i.push(n);return i},l.pickRandom=function(t,e){return t[r(0,t.length-1,e=void 0===e?"generator":e)]},l.shuffle=function(t,e){return void 0===e&&(e="generator"),DBLRandom.seededShuffle(t,e)},l.randomElement=function(t,e){return void 0===e&&(e="generator"),0==t.length?null:t[r(0,t.length-1,e)]},l.drawFrom=function(t,e){for(var r=[],n=e,i=t.length,o=0;o<i&&0<n;o++)DBLRandom.seededRandomForGenerators()<n/(i-o)&&(r.push(t[o]),n--);return r},l.generateRandomInteger=r,l.generateRandomBoolean=function(t,e){return("generator"==(e=void 0===e?"generator":e)?DBLRandom.seededRandomForGenerators():DBLRandom.seededRandomGeneralPurpose())<t},l.chooseWeightedRandom=function(r,t,e){for(var n="generator"==(e=void 0===e?"generator":e)?DBLRandom.seededRandomForGenerators():DBLRandom.seededRandomGeneralPurpose(),i=(t=null==t?Object.keys(r):t).reduce(function(t,e){return t+(r[e]||0)},0),o=0,a=0,s=t;a<s.length;a++){var u=s[a];if(n<(o+=r[u]||0)/i)return u}return l.randomElement(t,e)}})(DBLSeededRandomUtils=DBLSeededRandomUtils||{}),(()=>{function t(){}return Object.defineProperty(t.prototype,"typeOfProblem",{get:function(){return this._typeOfProblem},set:function(t){this._typeOfProblem=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operationRequired",{get:function(){return this._operationRequired},set:function(t){this._operationRequired=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),t.prototype.toObject=function(){var t={};return t.typeOfProblem=this._typeOfProblem,t.operationRequired=this._operationRequired,t.data=this._data,t},t})()),DBLStrategyConstants=((t=>{t.compressSpaces=function(t){return t=(t=t.replace(/\s+/g," ")).replace(/\s([\.,?!%:;])/g,"$1")},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.removeSpaces=function(t){return t.replace(/\s+/g,"")},t.capitalize=function(t){return t=t.length?t.charAt(0).toUpperCase()+t.substr(1):t},t.addThousandsCommas=function(t){var e=Math.abs(parseInt(t));if(999<e)for(var r=t.lastIndexOf(".")+1,n=(0!=r&&(r=t.length-r+1),(""+e).length),i=3;i<n;i+=3){var o=r+i+i/3-1;t=t.substring(0,t.length-o)+","+t.substring(t.length-o)}return t},t.escapeRegexCharacters=function(t){return t=t.length?t.replace(/([{}\(\)\^$&.\*\?\/\+\|\[\\\\]|\]|\-)/g,"\\$1"):t},t.restrictCharactersSimple=function(t,e){if(null==e)return t;if(""==e)return"";for(var r="",n=t.length,i=0;i<n;i++){var o=t.charAt(i);-1!=e.indexOf(o)&&(r+=o)}return r},t.restrictCharacters=function(t,e){if(null==e)return t;if(""==e)return"";for(var r=[],n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);this.testCharacter(o,e)&&r.push(o)}return String.fromCharCode.apply(null,r)},t.testCharacter=function(t,e){var r=!1,n=!1,i=!1,o=!0,a=0,s=e.length;0<s&&94==(l=e.charCodeAt(0))&&(r=!0);for(var u=0;u<s;u++){var l=e.charCodeAt(u),h=!1;n?n=!(h=!0):45==l?i=!0:94==l?o=!o:92==l?n=!0:h=!0,h&&(a=i?(a<=t&&t<=l&&(r=o),i=!1,0):(t==l&&(r=o),l))}return r},t.repeat=function(t,e){for(var r="",n=0;n<e;n++)r+=t;return r},t.replaceAll=function(t,e,r){for(;-1!=t.indexOf(e);)t=t.replace(e,r);return t}})(DBLStringUtils=DBLStringUtils||{}),(()=>{function t(){}return t.BASIC_FACT_MIN=2,t.BASIC_FACT_MAX=12,t.NUMBERLINE_MYSTERIES_BENCHMARKS=[1,2,3,5,10],t.NUMBERLINE_MYSTERIES_CHALLENGES=[4,6,7,8,9,11,12],t.MAX_BLOCKS_ON_MAT=12,t})()),DBLNumbergramVariantData=(()=>{function o(){}return o.genVariantIndex=function(t,e){return-1==(e=o.VARIANTS[t].length<=(e=void 0===e?-1:e)?0:e)&&(t=o.VARIANTS[t].length,e=DBLSeededRandomUtils.generateRandomInteger(0,t-1)),e},o.genVariantIndexNotThis=function(t,e){var r=-1;if(-1==(r=o.VARIANTS[t].length<=r?0:r)){var n=o.VARIANTS[t].length;if(1==n)return this.genVariantIndex(t,-1);e<=(r=DBLSeededRandomUtils.generateRandomInteger(0,--n-1))&&r++}return r},o.genMappingTable=function(){var t,e,r,n,i=0;if(null==this.mappingTable){for(t=1;t<o.VARIANTS.length;t++)o.VARIANTS[t].length>i&&(i=o.VARIANTS[t].length);for(this.mappingTable=new Array(10*i),t=1;t<=10;t++){for(n=(r=t-1)+10*o.VARIANTS[t].length,e=r;e<n;e+=10)this.mappingTable[e]=!0;for(n=r+10*i;e<n;)this.mappingTable[e]=!1,e+=10}}return this.mappingTable},o.VARIANTS=[[[]],[[1]],[[1,1],[1,0,0,0,0,0,1,0,0,0,0,0]],[[1,1,1],[1,2,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,1],[1,1,2]],[[1,1,0,0,0,0,1,1],[1,2,0,0,0,0,1,2],[1,0,0,0,0,0,1,2,0,0,0,0,1],[1,1,1,0,0,0,2]],[[1,0,1,0,0,0,0,1,0,0,0,0,1,0,1],[1,0,0,0,0,0,1,2,2,0,0,0,1],[1,1,2,0,0,0,1,1],[1,1,1,0,0,0,2,2]],[[1,1,1,0,0,0,1,1,1],[1,0,1,0,0,0,0,1,0,2,0,0,1,0,1],[1,2,0,0,0,0,1,2,0,0,0,0,1,2],[1,1,2,2,0,0,1,1],[1,1,0,0,0,0,1,1,0,0,0,0,1,1],[1,1,1,0,0,0,2,2,2],[1,1,0,0,0,0,2,2,0,0,0,0,1,1,0,0,0,0]],[[1,0,1,0,0,0,0,1,0,2,2,0,1,0,1],[1,1,2,2,2,0,1,1],[1,1,0,0,0,0,1,1,2,0,0,0,1,1],[1,2,0,0,0,0,1,2,1,0,0,0,1,2]],[[1,1,2,2,0,0,1,1,2,2],[1,0,1,0,0,0,0,1,0,2,2,2,1,0,1],[1,1,0,0,0,0,1,1,2,2,0,0,1,1]],[[1,1,1,0,0,0,1,1,1,0,0,0,1,1,1],[1,1,0,0,0,0,1,1,2,2,2,0,1,1],[1,0,1,2,2,0,0,1,0,2,2,0,1,0,1],[1,1,2,2,1,0,1,1,2,2],[1,2,1,0,0,0,1,2,1,0,0,0,1,2,1]],[[1,0,1,2,0,2,0,1,0,0,2,0,1,0,1,2,0,2],[1,1,1,0,0,0,1,1,1,2,0,0,1,1,1],[1,1,2,2,0,0,1,1,2,2,0,0,1,1],[1,1,2,2,1,1,1,1,2,2]]],o.VARIANT_CHUNKS=[[[]],[[1]],[[1,1],[1,0,0,0,0,0,1,0,0,0,0,0]],[[1,1,1],[1,2,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,1],[1,1,2]],[[1,1,0,0,0,0,1,1],[1,2,0,0,0,0,1,2],[1,0,0,0,0,0,1,2,0,0,0,0,1],[1,1,1,0,0,0,2]],[[1,0,1,0,0,0,0,1,0,0,0,0,1,0,1],[1,0,0,0,0,0,1,2,2,0,0,0,1],[1,1,2,0,0,0,1,1],[1,1,1,0,0,0,2,2]],[[1,1,1,0,0,0,1,1,1],[1,0,1,0,0,0,0,1,0,2,0,0,1,0,1],[1,2,0,0,0,0,1,2,0,0,0,0,1,2],[1,1,2,2,0,0,1,1],[1,1,0,0,0,0,1,1,0,0,0,0,1,1],[1,1,1,0,0,0,2,2,2],[1,1,0,0,0,0,2,2,0,0,0,0,3,3,0,0,0,0]],[[1,0,1,0,0,0,0,1,0,2,2,0,1,0,1],[1,1,2,2,2,0,1,1],[1,1,0,0,0,0,1,1,2,0,0,0,1,1],[1,2,0,0,0,0,1,2,3,0,0,0,1,2]],[[1,1,2,2,0,0,1,1,2,2],[1,0,1,0,0,0,0,1,0,2,2,2,1,0,1],[1,1,0,0,0,0,1,1,2,2,0,0,1,1]],[[1,1,1,0,0,0,1,1,1,0,0,0,1,1,1],[1,1,0,0,0,0,1,1,2,2,2,0,1,1],[1,0,1,2,2,0,0,1,0,2,2,0,1,0,1],[1,1,2,2,3,0,1,1,2,2],[1,2,3,0,0,0,1,2,3,0,0,0,1,2,3]],[[1,0,1,2,0,2,0,1,0,0,2,0,1,0,1,2,0,2],[1,1,1,0,0,0,1,1,1,2,0,0,1,1,1],[1,1,2,2,0,0,1,1,2,2,0,0,1,1],[1,1,2,2,3,3,1,1,2,2]]],o.VARIANT_CHUNK_SIZES=[[[]],[[1]],[[2],[2]],[[3],[2,1],[3],[2,1]],[[4],[2,2],[3,1],[3,1]],[[5],[3,2],[4,1],[3,2]],[[6],[5,1],[3,3],[4,2],[6],[3,3],[2,2,2]],[[5,2],[4,3],[6,1],[3,3,2]],[[4,4],[5,3],[6,2]],[[9],[6,3],[5,4],[4,4,1],[3,3,3]],[[5,5],[9,1],[6,4],[4,4,2]]],o.VARIANT_CHUNKS_BINS=[[[]],[[1]],[[1,1],[1,0,0,0,0,0,1,0,0,0,0,0]],[[1,1,1],[1,2,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,1],[1,1,2]],[[1,2,0,0,0,0,1,2],[1,2,0,0,0,0,1,2],[1,0,0,0,0,0,1,2,0,0,0,0,1],[1,1,1,0,0,0,2]],[[1,0,1,0,0,0,0,1,0,0,0,0,1,0,1],[1,0,0,0,0,0,1,2,2,0,0,0,1],[1,2,3,0,0,0,1,2],[1,1,1,0,0,0,2,2]],[[1,1,1,0,0,0,2,2,2],[1,0,1,0,0,0,0,1,0,2,0,0,1,0,1],[1,2,0,0,0,0,1,2,0,0,0,0,1,2],[1,2,3,3,0,0,1,2],[1,2,0,0,0,0,1,2,0,0,0,0,1,2],[1,1,1,0,0,0,2,2,2],[1,1,0,0,0,0,2,2,0,0,0,0,3,3,0,0,0,0]],[[1,0,1,0,0,0,0,1,0,2,2,0,1,0,1],[1,2,3,3,3,0,1,2],[1,2,0,0,0,0,1,2,3,0,0,0,1,2],[1,2,0,0,0,0,1,2,3,0,0,0,1,2]],[[1,2,3,4,0,0,1,2,3,4],[1,0,1,0,0,0,0,1,0,2,2,2,1,0,1],[1,2,0,0,0,0,1,2,3,3,0,0,1,2]],[[1,2,3,0,0,0,1,2,3,0,0,0,1,2,3],[1,2,0,0,0,0,1,2,3,3,3,0,1,2],[1,0,1,2,3,0,0,1,0,2,3,0,1,0,1],[1,2,3,4,5,0,1,2,3,4],[1,2,3,0,0,0,1,2,3,0,0,0,1,2,3]],[[1,0,1,2,0,2,0,1,0,0,2,0,1,0,1,2,0,2],[1,2,3,0,0,0,1,2,3,4,0,0,1,2,3],[1,2,3,4,0,0,1,2,3,4,0,0,1,2],[1,2,3,4,5,5,1,2,3,4]]],o.VARIANT_CHUNK_SIZES_BINS=[[[]],[[1]],[[2],[2]],[[3],[2,1],[3],[2,1]],[[2,2],[2,2],[3,1],[3,1]],[[5],[3,2],[2,2,1],[3,2]],[[3,3],[5,1],[3,3],[2,2,2],[3,3],[3,3],[2,2,2]],[[5,2],[2,2,3],[3,3,1],[3,3,1]],[[2,2,2,2],[5,3],[3,3,2]],[[3,3,3],[3,3,3],[5,2,2],[2,2,2,2,1],[3,3,3]],[[5,5],[3,3,3,1],[3,3,2,2],[2,2,2,2,2]]],o.mappingTable=null,o})(),DBLNumbergramValue=(()=>{function i(){this._singleColor=!1}return Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"variant",{get:function(){return this._variant},set:function(t){this._variant=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"singleColor",{get:function(){return this._singleColor},set:function(t){this._singleColor=t},enumerable:!1,configurable:!0}),i.prototype.setValueGenerateVariant=function(t){return this._value=t,this._singleColor?this._variant=0:this._variant=DBLNumbergramVariantData.genVariantIndex(this._value,-1),this},i.prototype.setValueGenerateVariantNotThis=function(t,e){return this._value=t,this._singleColor?this._variant=0:e.value==t?this._variant=DBLNumbergramVariantData.genVariantIndexNotThis(this._value,e.variant):this._variant=DBLNumbergramVariantData.genVariantIndex(this._value,-1),this},i.convertArrayToNumberGrams=function(t){for(var e,r=[],n=0;n<t.length;n++)e=new i,r[n]=e.setValueGenerateVariant(DBLUtils.toInt(t[n]));return r},i.prototype.setCurrentValue=function(t){t instanceof i?(this._value=t.value,this._variant=t.variant):DBLUtils.isArray(t)&&2==t.length?(this._value=DBLUtils.toInt(t[0]),this._variant=DBLUtils.toInt(t[1])-1):(this._value=DBLUtils.toInt(t),this._variant=DBLNumbergramVariantData.genVariantIndex(t,-1)),this._singleColor&&(this._variant=0),10<this._value&&(this._value=10),this._value<1&&(this._value=1),this._variant=DBLNumbergramVariantData.genVariantIndex(this._value,this._variant)},i.prototype.setValueWithIndex=function(t,e){this._value=t,this._variant=e},i.prototype.toString=function(){return this._value.toString()},i})(),PERFORMANCE_THRESHOLD=1e7,DBLGeneratorStrategiesBaseHelper=(()=>{function t(){}return t.prototype.performanceCheck=function(t,e,r){for(var n=t.length+1,i=0;i<e.length;i++){var o=e[i];n*=r[o].MAX-r[o].MIN+1}return n<=PERFORMANCE_THRESHOLD},t.prototype.getVariableRangesAsString=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];r+=i+" is between "+e[i].MIN+" and "+e[i].MAX+"\n"}return r},t.prototype.getConstraintsAsString=function(t){for(var e="",r=0;r<t.length;r++)e+=t[r]+"\n";return e},t.prototype.extractVariables=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charAt(r);DBLExpressionUtils.isVariable(n)&&-1==e.indexOf(n)&&e.push(n)}return e},t.prototype.checkPossibleConstraints=function(t,e,r,n,i){for(var o=[],a=0;a<i;a++)o.push(r[a]);for(a=0;a<e.length;a++){for(var s=!0,u=0;u<e[a].length;u++)if(-1==o.indexOf(e[a][u])){s=!1;break}if(s&&!this.checkConstraint(t[a],n))return!1}return!0},t.prototype.checkAllConstraints=function(t,e){for(var r=0;r<t.length;r++)if(!this.checkConstraint(t[r],e))return!1;return!0},t.prototype.checkConstraint=function(t,e){if(""==t)return!0;switch(t){case"AB != CD":return DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE)!=DBLUtils.toInt(e.C.VALUE.toString()+e.D.VALUE);case"AB + CD < 100":return DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE)+DBLUtils.toInt(e.C.VALUE.toString()+e.D.VALUE)<100;case"AB + CD < 1000":return DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE)+DBLUtils.toInt(e.C.VALUE.toString()+e.D.VALUE)<1e3;case"B != 5":return 5!=DBLUtils.toInt(e.B.VALUE);case"D != 5":return 5!=DBLUtils.toInt(e.D.VALUE);case"B + D > 10":return 10<DBLUtils.toInt(e.B.VALUE)+DBLUtils.toInt(e.D.VALUE);case"B + D < 10":return DBLUtils.toInt(e.B.VALUE)+DBLUtils.toInt(e.D.VALUE)<10;case"B + D = 10":return DBLUtils.toInt(e.B.VALUE)+DBLUtils.toInt(e.D.VALUE)==10;case"AB - N00 = 1,2,3":return 1==(i=(r=DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE))-(n=100*Math.round(r/100)))||2==i||3==i;case"AB - N00 = 11,12,13":return 11==(i=(r=DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE))-(n=100*Math.round(r/100)))||12==i||13==i;case"|AB - N00| < 3":var r=DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE),n=100*Math.round(r/100);return(i=Math.abs(r-n))<3;case"|AB - N000| < 3":var i,r=DBLUtils.toInt(e.A.VALUE.toString()+e.B.VALUE),n=1e3*Math.round(r/1e3);return(i=Math.abs(r-n))<3}t=this.replaceVariables(t,e);return 1==DBLExpressionUtils.evaluateExpression(t,[])},t.prototype.replaceVariables=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t.charAt(n);DBLExpressionUtils.isVariable(i)?r+=e[i].VALUE:r+=i}for(var o=r.indexOf(")");-1!=o;){var a=r.substr(0,o).lastIndexOf("(");if(-1==a)return DBLLog.log("Malformed expression: "+t,DBLLog.DEBUG),t;var s=r.substr(a+1,o-a-1),o=(r=r.substr(0,a)+DBLExpressionUtils.evaluateExpression(s,[])+r.substr(o+1)).indexOf(")")}return r},t.prototype.cloneConfiguration=function(t,e){for(var r={},n=0;n<t.length;n++){var i=t[n];DBLUtils.isUndefOrNull(e[i])||(r[i]={VALUE:e[i].VALUE})}return r},t.prototype.configurationsEqual=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n],o=DBLUtils.isUndefOrNull(e[i]);if(o!=DBLUtils.isUndefOrNull(r[i])||0==o&&e[i].VALUE!=r[i].VALUE)return!1}return!0},t.MIN="MIN",t.MAX="MAX",t.VALUE="VALUE",t})(),DBLPlaceValueGeneratorBase=(()=>{function a(){this._digitsMinMax=null,this._usePositions=null,this._workingSetInvalid=!0,this._workingSet=[],this._digitsMinMax=[];for(var t=0;t<DBLPlaceValueUtilities.MAX_DIGITS;t++)this._digitsMinMax.push({MIN:0,MAX:Number.MAX_VALUE});this._usePositions=[];for(t=0;t<DBLPlaceValueUtilities.MAX_DIGITS;t++)this._usePositions.push(Math.pow(10,t));this._dupHelper=new DBLDupHelper}return a.prototype.setGapBetweenDupes=function(t){this._dupHelper.setGapBetweenDupes(t),this._workingSetInvalid=!0},a.prototype.setMinMax=function(t,e){this._min==t&&this._max==e||(this._min=Math.min(t,e),this._max=Math.max(t,e),this._workingSetInvalid=!0)},a.prototype.setPositionMinMax=function(t,e,r){t>Math.pow(10,DBLPlaceValueUtilities.MAX_DIGITS-1)?this.logMessage("Position too big! You specified "+t+", and the valid values are 1, 10, 100 and 1000."):(t=DBLPlaceValueUtilities.MAX_DIGITS-DBLNumberUtils.log10(t)-1,this._digitsMinMax[t][a.MIN]=e,this._digitsMinMax[t][a.MAX]=r,this._workingSetInvalid=!0)},a.prototype.usePositions=function(t){-1==t.indexOf(1)?this.logMessage("Invalid positions array: "+t+". You must always include leftovers column!"):(this._usePositions=t.concat(),this._workingSetInvalid=!0)},a.prototype.getValidNumbers=function(t){for(var e=[],r=this._min;r<=this._max;r++){for(var n=t?DBLPlaceValueUtilities.getDigitsNormalized(r,this._usePositions):DBLPlaceValueUtilities.getDigitsNormalizedConstrained(r,this._usePositions,this._digitsMinMax),i=!0,o=0;o<DBLPlaceValueUtilities.MAX_DIGITS&&i;o++)(this._digitsMinMax[o][a.MIN]>n[o]||this._digitsMinMax[o][a.MAX]<n[o])&&(i=!1);i&&e.push(r)}return e},a.prototype.isPlaceValueUsed=function(t){return-1!=this._usePositions.indexOf(t)},a.prototype.logMessage=function(t,e){void 0===e&&(e=0),DBLLog.log(t,e||DBLLog.DEBUG)},a.MIN="MIN",a.MAX="MAX",a})(),DBLPlaceValueUtilities=(()=>{function d(){}return d.getDigits=function(t){for(var e=[],r=0;r<d.MAX_DIGITS;r++)e.push(t%10),t=Math.floor(t/10);return e.reverse()},d.getDigitsNormalized=function(t,e){for(var r=this.getDigits(t),n=d.MAX_DIGITS-1;0<=n;n--)-1==e.indexOf(Math.pow(10,n))&&(r[d.MAX_DIGITS-n]+=10*r[d.MAX_DIGITS-n-1],r[d.MAX_DIGITS-n-1]=0);return r},d.getDigitsNormalizedUsedColumnsOnly=function(t,e){for(var r=this.getDigitsNormalized(t,e),n=[],i=0;i<d.MAX_DIGITS;i++)-1!=e.indexOf(Math.pow(10,d.MAX_DIGITS-i-1))&&n.push(r[i]);return n},d.getDigitsNormalizedConstrained=function(t,e,r){for(var n=this.getDigitsNormalized(t,e),i=0;i<d.MAX_DIGITS-1;i++)(r[i].MAX<n[i]||-1==e.indexOf(Math.pow(10,i)))&&(n[i+1]+=10*(n[i]-r[i].MAX),n[i]=r[i].MAX);return n},d.getDigitsNormalizedConstrainedRandom=function(t,e,r){for(var n,i=this.getDigitsNormalized(t,e),o=0;o<d.MAX_DIGITS-1;o++)(r[o].MAX<i[o]||-1==e.indexOf(Math.pow(10,o)))&&(n=DBLSeededRandomUtils.generateRandomInteger(r[o].MIN,r[o].MAX),i[o+1]+=10*(i[o]-n),i[o]=n);return i},d.getPlaceValueIndex=function(t){return this._pvLookup[t]||-1},d.placeValueColumnUsed=function(t,e){return-1!=e.indexOf(this._indexLookup[t+1])},d.calcTotalFromColumns=function(t){for(var e=0,r=1;r<this._indexLookup.length;r++)e+=this._indexLookup[r]*t[r];return e},d.isPositionUsed=function(t,e){return-1!=t.indexOf(Math.pow(10,d.MAX_DIGITS-e-1))},d.getAllBreakdowns=function(t,e,r,n,i){var o=this;void 0===n&&(n=d.MAX_BREAKDOWNS_UNSET),void 0===i&&(i=!1),this._breakdowns=[],this._currentBreakdown=[];for(var a,s=0;s<d.MAX_DIGITS;s++)this._currentBreakdown.push(0);return this._currentBreakdown[d.MAX_DIGITS-1]=e,this._currentNumber=e,this.generateBreakdowns(t,d.MAX_DIGITS-1,r,d.MAX_BREAKDOWNS_UNSET,i),this._breakdowns.sort(this.breakdownComparator),this._breakdowns=this._breakdowns.map(function(t){return[e].concat(t)}),-1!==this._sameColumnValue&&(a=this._breakdowns.reduce(function(t,e){e=e[o._sameColumnValue];return void 0!==e&&(t[e]=(t[e]||0)+1),t},{}),this._breakdowns=this._breakdowns.filter(function(t){t=t[o._sameColumnValue];return void 0!==t&&(a[t]>n||5<a[t])})),DBLUtils.clone(this._breakdowns)},d.hasAtLeastXBreakdowns=function(t,e,r,n,i){return this._sameColumnValue=i,this.getAllBreakdowns(t,e,r,n).length>=n},d.getPartialProductSplits=function(t){var e=[];switch(t){case 3:case 4:e=[1];break;case 6:e=[5,2,3];break;case 7:e=[5,3];break;case 8:e=[5,4];break;case 9:e=[5];break;case 11:e=[1];break;case 12:e=[2];break;default:12<t&&(e=[10*DBLUtils.toInt(t/10)])}return e},d.breakdownComparator=function(t,e){for(var r=0;r<e.length;r++){if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0},d.generateBreakdowns=function(t,e,r,n,i){if(void 0===i&&(i=!1),!(n!=d.MAX_BREAKDOWNS_UNSET&&this._breakdowns.length>=n)){for(var o=-1,a=e-1;0<=a;a--)if(this.isPositionUsed(t,a)){o=a;break}if(-1!=o)for(var s=Math.pow(10,e-o),u=DBLUtils.toInt(this._currentBreakdown[e]/s),l=0;l<=u;l++)this._currentBreakdown[e]-=l*s,this._currentBreakdown[o]+=l,this.generateBreakdowns(t,o,r,n,i),this._currentBreakdown[e]+=l*s,this._currentBreakdown[o]-=l;else{for(a=0;a<this._currentBreakdown.length;a++)if(r[a].MIN>this._currentBreakdown[a]||(-1!==this._sameColumnValue&&2===a&&i?Math.round(this._currentNumber/10):r[a].MAX)<this._currentBreakdown[a])return;this._breakdowns.push(this._currentBreakdown.concat())}}},d.operationsEqual=function(t,e){return t.source==e.source&&t.code==e.code},d.getReverse=function(t){var e={};switch(t.code){case d.CODE_ADD:e.code=d.CODE_SUBTRACT,e.source=t.source;break;case d.CODE_SUBTRACT:e.code=d.CODE_ADD,e.source=t.source;break;case d.CODE_PACK:e.code=d.CODE_UNPACK,e.source=10*t.source;break;case d.CODE_UNPACK:e.code=d.CODE_PACK,e.source=t.source/10}return e},d.createOperation=function(t,e){return{source:t,code:e}},d.calculateOptimalMoves=function(t,e){for(var r=d.getDigits(Math.max(t,e)),n=d.getDigits(Math.min(t,e)),i=[2,20,30,-1],o=r.length,a=Math.pow(10,o-1),s=[],u=0,l=0;l<o;l++,a/=10){var h=r[l]-n[l],c=Math.abs(h);if(c<=5)for(u=0;u<c;u++){var f=this.createOperation(a,0<h?d.CODE_SUBTRACT:d.CODE_ADD);s.push(f)}else if(h<0)for(0<l&&r[l-1]==i[l-1]?(s.push(this.createOperation(10*a,d.CODE_UNPACK)),s.push(this.createOperation(10*a,d.CODE_ADD))):(s.push(this.createOperation(10*a,d.CODE_ADD)),s.push(this.createOperation(10*a,d.CODE_UNPACK))),u=0;u<10+r[l]-n[l];u++)s.push(this.createOperation(a,d.CODE_SUBTRACT));else{for(u=0;u<10-r[l];u++)s.push(this.createOperation(a,d.CODE_ADD));for(0<l&&r[l-1]==i[l-1]?(s.push(this.createOperation(10*a,d.CODE_SUBTRACT)),s.push(this.createOperation(a,d.CODE_PACK))):(s.push(this.createOperation(a,d.CODE_PACK)),s.push(this.createOperation(10*a,d.CODE_SUBTRACT))),u=0;u<n[l];u++)s.push(this.createOperation(a,d.CODE_ADD))}r[l]=n[l]}var p=!1;do{for(p=!1,l=1;l<s.length;l++)if(this.operationsEqual(s[l],this.getReverse(s[l-1]))){s.splice(l-1,2),p=!0;break}}while(p);if(t<e)for(s=s.reverse(),l=0;l<s.length;l++)s[l]=this.getReverse(s[l]);return s},d.printOperations=function(t){for(var e="",r=0;r<t.length;r++){var n="";switch(t[r].code){case 1:n="Add";break;case 2:n="Subtract";break;case 3:n="Pack";break;case 4:n="Unpack"}e+=r+1+": Source: "+t[r].source+", Code: "+n+"\n"}return e},d.getCount=function(t){for(var e=!1,r=[],n=0,i=0,o=0;o<t.length;o++){var a,s=t[o];n==s.source&&s.code==r[i-1].code||(n=s.source,e=!0),e?(a={count:0},i++):a=r[i],a.code=s.code,a.count=a.count+1,e?r.push(a):r[i]=a}return r},d.MAX_DIGITS=4,d.MAX_TENS=30,d.MAX_HUNDREDS=12,d.MAX_BREAKDOWNS_UNSET=-1,d.CODE_ADD=1,d.CODE_SUBTRACT=2,d.CODE_PACK=3,d.CODE_UNPACK=4,d._currentBreakdown=[],d._breakdowns=[],d._pvLookup={total:0,1e3:1,100:2,10:3,1:4},d._indexLookup=["total",1e3,100,10,1],d._sameColumnValue=-1,d._currentNumber=-1,d})(),DBLVerticalPathUtilities=(()=>{function t(){}return t.getVerticalPaths=function(t){for(var e=[],r=new Array(t.length),n=new Array(t.length),i=0;i<t.length;i++)r[i]=0,n[i]=0;var o=-1;do{var a=Number.MAX_VALUE,o=-1;for(i=0;i<t.length;i++)r[i]<t[i].length&&n[i]<a&&(a=n[i],o=i);if(-1!=o){n[o]+=Math.abs(t[o][r[o]]),r[o]++;for(var s=!0,i=1;i<t.length;i++)n[i]!=n[i-1]&&(s=!1);s&&e.push(n[0])}}while(-1!=o);return e},t.getVerticalPathsDouble=function(t,e){for(var r=0,n=[],i=[],o=[],a=[],s=[],u=0,l=0,h=0,c=0,f=0,p=Math.max(DBLArrayUtilities.max(t),DBLArrayUtilities.max(e)),d=new Array(p+1),g=new Array(p+1),u=0;u<=p;u++)d[u]=0,g[u]=0;for(u=0;u<t.length;u++)this.isVariable(t[u])?(f=t[u],h++):d[t[u]]++;for(u=0;u<e.length;u++)this.isVariable(e[u])?(f=e[u],c++):g[e[u]]++;for(u=0;u<Math.min(h,c);u++)o.push(f);for(u=1;u<=p;u++){for(var _=Math.min(d[u],g[u]),l=0;l<_;l++)o.push(u);for(l=_;l<d[u];l++)a.push(u);for(l=_;l<g[u];l++)s.push(u)}var m=a.length,v=s.length;if(0==m||0==v)return[o.length,o.concat(),o.concat()];this.getPermutations(0);var M=new Array(m),B=new Array(v),L=this._permutations[m-1].length,D=this._permutations[v-1].length,A=Math.min(t.length,e.length,Math.floor((m+v)/3));for(u=0;u<L&&r<A;u++){for(var y=0,y=0;y<m;y++)M[y]=a[this._permutations[m-1][u][y]];for(l=0;l<D&&r<A;l++){for(y=0;y<v;y++)B[y]=s[this._permutations[v-1][l][y]];var b=this.getVerticalPaths([M,B]);b.length>r&&(r=b.length,n=this.getBlocksFrom(M,b),i=this.getBlocksFrom(B,b))}}return[r+o.length,o.concat(n),o.concat(i)]},t.getBlocksFrom=function(t,e){var r=0;if(0==e.length)return[];for(var r=e[e.length-1],n=0;n<t.length;n++)if(0==(r-=t[n]))return t.slice(0,n+1);return t},t.getPermutations=function(t){return null==this._permutations&&(this._permutations=DBLArrayUtilities.generateAllPermutations(this.MAX_LENGTH)),this._permutations[t-1]},t.isVariable=function(t){return t<0&&DBLUtils.toInt(t)!=t},t.getVerticalPathsSingle=function(t){for(var e=[],r=[],n=0,i=0,o=0;o<t.length;o++)n=Math.max(n,t[o]);for(o=0;o<=n;o++)e.push(0);for(o=0;o<t.length;o++)e[t[o]]++;for(var a=[],s=0,o=0;o<=n;o++){for(var u=0;u<Math.floor(e[o]/2);u++)i++,r.push(o);e[o]%2==1&&a.push(o),s+=e[o]%2*(1<<o)}var l=this.generateOptimalSplit(s,a);return[i+l[0],r.concat(l[1]),r.concat(l[2])]},t.generateOptimalSplit=function(t,e){if(null==this._optimalSplits&&(this._optimalSplits=new Array(1<<this.MAX_NUMBER)),null==this._optimalSplits[t]){if(0==e.length)return[0,[],[]];for(var r=0,n=[],i=[],o=this.getPermutations(e.length),a=new Array(e.length),s=0;s<o.length;s++){for(var u=0,u=0;u<e.length;u++)a[u]=e[o[s][u]];for(u=1;u<a.length-1;u++){var l=a.slice(0,u),h=a.slice(u,a.length),c=this.getVerticalPaths([l,h]);c.length>=r&&(l=this.getBlocksFrom(l,c),h=this.getBlocksFrom(h,c),c.length>r||l.length+h.length<n.length+i.length)&&(r=c.length,n=l,i=h)}}this._optimalSplits[t]=[r,n,i]}return this._optimalSplits[t]},t.MAX_LENGTH=7,t.MAX_NUMBER=21,t._permutations=null,t._optimalSplits=null,t})(),DataSetEquationPairs=(()=>{function t(){this._firstMin=0,this._firstMax=0,this._secondMin=0,this._secondMax=0,this._numDistracters=0,this._diffUsed=!1,this._diffMin=0,this._diffMax=0}return Object.defineProperty(t.prototype,"firstMin",{set:function(t){this._firstMin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstMax",{set:function(t){this._firstMax=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"secondMin",{set:function(t){this._secondMin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"secondMax",{set:function(t){this._secondMax=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numDistracters",{set:function(t){this._numDistracters=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffUsed",{set:function(t){this._diffUsed=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffMin",{set:function(t){this._diffMin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffMax",{set:function(t){this._diffMax=t},enumerable:!1,configurable:!0}),t.prototype.getPairs=function(t){for(var e=[],r=this._firstMin;r<=this._firstMax;r++){var n=0,i=0,o=0,a=0,s=DBLUtils.normalizeSymbol(t);switch(s){case DBLUtils.GT_SYMBOL:n=r+1,i=this._secondMax,o=this._secondMin,a=r-1;break;case DBLUtils.LT_SYMBOL:n=this._secondMin,i=r-1,o=r+1,a=this._secondMax;break;case DBLUtils.EQUAL_SYMBOL:i=n=r,o=this._secondMin,a=this._secondMax}for(var u=0,l=[],u=o;u<=a;u++)u!=r&&l.push(u);if(!(l.length<this._numDistracters))for(u=n;u<=i;u++){var h=Math.abs(r-u);(!this._diffUsed||s==DBLUtils.EQUAL_SYMBOL||h>=this._diffMin&&h<=this._diffMax)&&(h=DBLSeededRandomDeprecated.randomize(l.concat()).slice(0,this._numDistracters),e.push([r,u,h]))}}return e},t})(),DataSetMultiplicationBase=(()=>{function t(){this._constraints=[]}return t.prototype.init=function(t){this.setBasicFactCountMinMax(t._basicFactCountMin,t._basicFactCountMax),this.setChallengeCountMinMax(t._challengeCountMin,t._challengeCountMax),this.setMultiplicandMinMax(t._multiplicandMin,t._multiplicandMax),this.setMultiplierMinMax(t._multiplierMin,t._multiplierMax),this.constraints=t.constraints},t.prototype.setBasicFactCountMinMax=function(t,e){this._basicFactCountMin=t,this._basicFactCountMax=e},t.prototype.setChallengeCountMinMax=function(t,e){this._challengeCountMin=t,this._challengeCountMax=e},t.prototype.setMultiplicandMinMax=function(t,e){this._multiplicandMin=t,this._multiplicandMax=e},t.prototype.setMultiplierMinMax=function(t,e){this._multiplierMin=t,this._multiplierMax=e},t.prototype.addConstraint=function(t){this._constraints.push(t.toUpperCase())},t.prototype.clearConstraints=function(){this._constraints=[]},Object.defineProperty(t.prototype,"constraints",{get:function(){return DBLUtils.clone(this._constraints)},set:function(t){this._constraints=DBLUtils.clone(t)},enumerable:!1,configurable:!0}),t.prototype.generateWorkingSet=function(){for(var t=[],e=this._basicFactCountMin;e<=this._basicFactCountMax;e++)for(var r=this._challengeCountMin;r<=this._challengeCountMax;r++)t.push(this.generateProblems(e,r));var n=this.mergeProblemSets(t);return this.addRightSide(n),n},t.prototype.generateProblems=function(t,e){return[]},t.prototype.mergeProblemSets=function(t){for(var e=Number.MAX_VALUE,r=[],n=0;n<t.length;n++)0<t[n].length&&(e=Math.min(e,t[n].length));if(e!=Number.MAX_VALUE)for(n=0;n<t.length;n++)0<t[n].length&&(r=r.concat(t[n].slice(0,e)));return r},t.prototype.addRightSide=function(t){for(var e=this.pickRightSide(this._multiplicandMin,this._multiplicandMax),r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)if(DBLUtils.isNumber(t[r][n]))t[r][n]=this.expand(t[r][n],e);else{t[r][n].question=this.expand(t[r][n].question,e);for(var i=0;i<t[r][n].solution.length;i++)t[r][n].solution[i]=this.expand(t[r][n].solution[i],e)}},t.prototype.pickRightSide=function(t,e){for(var r=[],n=t;n<=e;n++)DBLExpressionUtils.replaceVarsAndCheckConstraints(this._constraints,{B:n})&&r.push(n);return DBLSeededRandomUtils.randomElement(r)},t.prototype.expand=function(t,e){return[t,e]},t.prototype.construct=function(t,e){return{question:t,solution:e}},t})(),DataSetMultiplicationBaseBenchmarks=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setBenchmarkCountMinMax=function(t,e){this._benchmarkCountMin=t,this._benchmarkCountMax=e},e.prototype.getBenchmarkCount=function(t){for(var e=0,r=0;r<t.length;r++)-1!=DBLStrategyConstants.NUMBERLINE_MYSTERIES_BENCHMARKS.indexOf(t[r])&&e++;return e},e})(DataSetMultiplicationBase),DataSetDoublesNumberlineMysteries=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.generateProblems=function(t,e){var r=[];if(0==e)for(var n=this._benchmarkCountMin;n<=this._benchmarkCountMax;n++)r=r.concat(this.generateProblemsBenchmark(t,n));return r},e.prototype.generateProblemsBenchmark=function(t,e){for(var r=[],n=Math.pow(2,t+e-1),i=DBLStrategyConstants.BASIC_FACT_MIN;i*n<=DBLStrategyConstants.BASIC_FACT_MAX;i++){var o=this.generateDoubleString(i,t+e),a=this.getBenchmarkCount(o);a==e&&o.length-a==t&&r.push(o)}return r},e.prototype.generateDoubleString=function(t,e){for(var r=[],n=0;n<e;n++)r.push(t*Math.pow(2,n));return r},e})(DataSetMultiplicationBaseBenchmarks),DataSetPartialProductsNumberlineMysteries=(e=>{function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._randomSplits={},t}return __extends(t,e),t.prototype.generateProblems=function(t,e){if(0!=e)return[];for(var e=this.filterAllBetween(DBLStrategyConstants.NUMBERLINE_MYSTERIES_BENCHMARKS,this._multiplierMin,this._multiplierMax),r=this.filterAllBetween(DBLStrategyConstants.NUMBERLINE_MYSTERIES_CHALLENGES,this._multiplierMin,this._multiplierMax),n=[],i=t+this._benchmarkCountMin,o=t+this._benchmarkCountMax,a=e.concat(r).sort(function(t,e){return t-e}),s=i;s<=o;s++)for(var u=this.getAllSubsets(a,s),l=0;l<u.length;l++){var h=u[l],c=this.getBenchmarkCount(h);this.validProblem(h)&&c>=this._benchmarkCountMin&&c<=this._benchmarkCountMax&&h.length-c==t&&n.push(h)}return n},t.prototype.validProblem=function(t){for(var e=0;e<t.length;e++)if(-1==DBLStrategyConstants.NUMBERLINE_MYSTERIES_BENCHMARKS.indexOf(t[e])&&!this.canObtain(t.slice(0,e-1),t[e]))return!1;return!0},t.prototype.filterAllBetween=function(t,e,r){for(var n=[],i=0;i<t.length;i++)e<=t[i]&&t[i]<=r&&n.push(t[i]);return n},t.prototype.getAllSubsets=function(t,e){for(var r=Math.pow(2,t.length)-1,n=[],i=0;i<r;i++){for(var o=[],a=0;a<t.length;a++)0!=(i&Math.pow(2,a))&&o.push(t[a]);o.length==e&&n.push(o)}return n},t.prototype.canObtain=function(t,e){for(var r=0;r<t.length;r++)for(var n=r;n<t.length;n++){if(t[r]+t[n]==e)return!0;for(var i=n;i<t.length;i++)if(t[r]+t[n]+t[i]==e)return!0}return!1},t})(DataSetMultiplicationBaseBenchmarks),BLOCK_COUNT_MAX=4,NUM_PROBLEMS=20,DataSetEquivalentExpressions=(()=>{function t(){this._splits=[],this._problemType=1,this._fixedValue=10,this._differenceMin=0,this._differenceMax=0,this._min=1,this._max=10,this._sumMin=8,this._sumMax=20,this._currentSplit=[],this._splits=new Array(this._sumMax+1);for(var t=0;t<=this._sumMax;t++){this._splits[t]=new Array(BLOCK_COUNT_MAX+1);for(var e=0;e<=BLOCK_COUNT_MAX;e++)this._splits[t][e]=[]}this.generateSubsetSums()}return t.prototype.setMinMax=function(t,e){this._min=t,this._max=e},t.prototype.setSumMinMax=function(t,e){this._sumMin=t,this._sumMax=e},t.prototype.setDifferenceMinMax=function(t,e){this._differenceMin=t,this._differenceMax=e},Object.defineProperty(t.prototype,"differenceMin",{get:function(){return this._differenceMin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"differenceMax",{get:function(){return this._differenceMax},enumerable:!1,configurable:!0}),t.prototype.setFixedValue=function(t){this._fixedValue=t},t.prototype.setProblemType=function(t){this._problemType=t},t.prototype.getSet=function(){switch(this._problemType){case 1:return this.generateType1();case 2:return this.generateType2();case 3:return this.generateType3();case 4:return this.generateType4();case 5:return this.generateType5()}return[]},t.prototype.generateType=function(t){var e=[],r=[];this._differenceMin<=0&&0<=this._differenceMax&&(e=t(0));for(var n=Math.max(1,this._differenceMin);n<=this._differenceMax;n++)r=r.concat(t(n));return r=DBLSeededRandomDeprecated.randomize(r),0==this._differenceMin&&0==this._differenceMax?e:0<this._differenceMin?r:this.mergeArraysIntoArray(e,r)},t.prototype.generateType1Helper=function(t){for(var e=[],r=0;r<this._splits[this._fixedValue][2].length;r++)for(var n=0;n<=Math.min(t,1);n++){var i=0==n?this._fixedValue+t:this._fixedValue-t;if(i>=this._sumMin&&i<=this._sumMax)for(var o=0;o<this._splits[i][2].length;o++)this._fixedValue==i&&r==o||e.push([[this._fixedValue,this._fixedValue],this.randomPair(this._fixedValue,r).concat(this.randomPair(i,o))])}return e},t.prototype.generateType2Helper=function(t){for(var e=[],r=0;r<this._splits[this._fixedValue][2].length;r++)for(var n=0;n<=Math.min(t,1);n++){var i=0==n?this._fixedValue+t:this._fixedValue-t;if(i>=this._sumMin&&i<=this._sumMax)for(var o,a=0;a<this._splits[i][2].length;a++)i==this._fixedValue&&r==a||(o=this.randomPair(this._fixedValue,r).concat(this.randomPair(i,a)),DBLSeededRandomUtils.generateRandomBoolean(.5)?e.push([[this._fixedValue,this._fixedValue],[o[0],o[3],o[2],o[1]]]):e.push([[this._fixedValue,this._fixedValue],[o[2],o[1],o[0],o[3]]]))}return e},t.prototype.generateType4Helper=function(t){return this.generateProblems(2,4,t)},t.prototype.generateType5Helper=function(t){return this.generateProblems(2,3,t)},t.prototype.generateType1=function(){return this.generateType(this.generateType1Helper.bind(this))},t.prototype.generateType2=function(){return this.generateType(this.generateType2Helper.bind(this))},t.prototype.generateType3=function(){for(var t=[],e=this._min;e<=this._max;e++){var r=[0,0];for(r[0]=this._min;r[0]<=this._max;r[0]++)for(var n=this._differenceMin;n<=this._differenceMax;n++)for(r[1]=r[0]-this._differenceMax;r[1]<=r[0]+this._differenceMax;r[1]++)if(r[1]>=this._min&&r[1]<=this._max&&Math.abs(r[1]-r[0])>=this._differenceMin&&(r[1]!=r[0]&&1<=this._splits[r[0]][2].length&&1<=this._splits[r[1]][2].length||2<=this._splits[r[1]][2].length)){for(var i=DBLSeededRandomDeprecated.randomize([1,2,3]),o=[null,null],a=(o[0]=DBLSeededRandomDeprecated.makeIntRandom(0,this._splits[r[0]][2].length-1),r[1]!=r[0]&&(o[1]=DBLSeededRandomDeprecated.makeIntRandom(0,this._splits[r[1]][2].length-1)),[[],[]]),s=0;s<=1;s++){switch(i[s]){case 1:case 2:a[s]=this._splits[r[s]][2][r[0]==r[1]?o[0][s]:o[s][0]].concat([e]);break;case 3:a[s]=[r[s],e]}a[s]=DBLSeededRandomDeprecated.randomize(a[s])}1==DBLArrayUtilities.numCommonItems(a[0],a[1])&&t.push(a)}}return t},t.prototype.generateType4=function(){return this.generateType(this.generateType4Helper.bind(this))},t.prototype.generateType5=function(){for(var t=this.makeVariable(),e=this.generateType(this.generateType5Helper.bind(this)),r=0;r<e.length;r++){var n=e[r][0],i=e[r][1],n=DBLSeededRandomDeprecated.randomize(n.concat([t])),i=DBLSeededRandomDeprecated.randomize(i.concat([t]));e[r]=[n,i]}return e},t.prototype.generateProblems=function(t,e,r){for(var n=new Array(r+1),i=0;i<=r;i++)n[i]=[];for(i=this._sumMin;i<this._sumMax;i++)for(var o=i+r,a=i-r;a<=o;a++)if(Math.abs(a-i)>=this._differenceMin&&a>=this._sumMin&&a<=this._sumMax){for(var s=[[],[]],u=t;u<=e;u++)0!=this._splits[i][u].length&&s[0].push(u),0!=this._splits[a][u].length&&s[1].push(u);if(0!=s[0].length&&0!=s[1].length){var l=!0;s[0]=DBLSeededRandomDeprecated.randomize(s[0]),s[1]=DBLSeededRandomDeprecated.randomize(s[1]);for(var h=0;h<s[0].length&&l;h++)for(var c=0;c<s[1].length&&l;c++)for(var f=s[0][h],p=s[1][c],d=DBLSeededRandomUtils.makeIntRange(0,this._splits[i][f].length-1),g=DBLSeededRandomUtils.makeIntRange(0,this._splits[a][p].length-1),_=0;_<d.length&&l;_++)for(var m=0;m<g.length&&l;m++){var v=d[_],M=g[m];0==DBLArrayUtilities.numCommonItems(this._splits[i][f][v],this._splits[a][p][M])&&(l=!1,n[Math.abs(a-i)].push([this._splits[i][f][v].concat(),this._splits[a][p][M].concat()]))}}}for(var B=Number.MAX_VALUE,i=0;i<=r;i++)0<n[i].length&&n[i].length<B&&(B=n[i].length);var L=[];for(i=0;i<=r;i++)n[i].length>B?(n[i]=DBLSeededRandomDeprecated.randomize(n[i]),L=L.concat(n[i].slice(0,B))):0<n[i].length&&(L=L.concat(n[i]));return L},t.prototype.generateSubsetSums=function(){for(var t=1;t<=4;t++)this._currentSplit=new Array(t),this.recurse(0,t,1,0)},t.prototype.recurse=function(t,e,r,n){if(t==e)this._splits[n][e].push(this._currentSplit.concat());else for(var i=r;n+i<=this._sumMax;i++)this._currentSplit[t]=i,this.recurse(t+1,e,i,n+i)},t.prototype.randomPair=function(t,e){return DBLSeededRandomUtils.generateRandomBoolean(.5)?[this._splits[t][2][e][0],this._splits[t][2][e][1]]:[this._splits[t][2][e][1],this._splits[t][2][e][0]]},t.prototype.mergeArraysIntoArray=function(t,e){for(var r=[],n=Math.min(t.length,e.length),i=0;i<n;i++)r.push(t[i]),r.push(e[i]);return r},t.prototype.makeVariable=function(){return-(this._min%2==this._max%2?(this._min+this._max)/2+.5:(this._min+this._max)/2)},t})(),DataSetIntegerPairs=(()=>{function t(){this._constraints=[]}return t.prototype.setFirstNumberMinMax=function(t,e){this._firstNumberMin=t,this._firstNumberMax=e},t.prototype.setSecondNumberMinMax=function(t,e){this._secondNumberMin=t,this._secondNumberMax=e},t.prototype.addConstraint=function(t){this._constraints.push(t)},t.prototype.clearConstraints=function(){this._constraints=[]},Object.defineProperty(t.prototype,"constraints",{get:function(){return DBLUtils.clone(this._constraints)},enumerable:!1,configurable:!0}),t.prototype.generateWorkingSet=function(t){for(var e=[],r=DBLSeededRandomDeprecated.makeIntRandom(this._firstNumberMin,this._firstNumberMax),n=1,i=0;i<this._constraints.length;i++){var o=this._constraints[i];0==o.indexOf("B % ")&&-1!=o.indexOf(" = 0")&&(n=parseInt(o.substr(4,o.indexOf(" = 0")-4)))}if(1==n)a=DBLSeededRandomDeprecated.makeIntRandom(this._secondNumberMin,this._secondNumberMax);else{var a=[],s=0,u=this._secondNumberMin%n;for(0!=u&&(s=n-u),i=this._secondNumberMin;i<=this._secondNumberMax;i+=n)n<=i+s&&a.push(i+s);DBLSeededRandomDeprecated.randomizeArray(a)}for(i=0;i<a.length;i++){DBLSeededRandomDeprecated.randomizeArray(r);for(var l=0;l<r.length;l++)if(DBLExpressionUtils.replaceVarsAndCheckConstraints(this._constraints,{A:r[l],B:a[i]})){e.push([r[l],a[i]]);break}if(t<e.length)break}return e},t})(),DEFAULT_MAP_COLS=10,DEFAULT_MIN_SETSIZE=1,DataSetNumbergram=(()=>{function t(){this._coverCombos=!0,this._coverValues=!0,this._minValue=0,this._maxValue=0,this._singleColor=!1,this._valid=!1,this._comboMap=DBLNumbergramVariantData.genMappingTable().slice(),this._comboCols=DEFAULT_MAP_COLS}return t.prototype.coverAllNumbergrams=function(t){this._coverCombos=t,this._valid=!1},t.prototype.coverAllValues=function(t){this._coverValues=t,this._valid=!1},t.prototype.minRequiredCardinality=function(){return DEFAULT_MIN_SETSIZE},Object.defineProperty(t.prototype,"min",{get:function(){return this._minValue},set:function(t){this._minValue=t,this._valid=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._maxValue},set:function(t){this._maxValue=t,this._valid=!1},enumerable:!1,configurable:!0}),t.prototype.coverOnlySingleColor=function(t){this._singleColor=t,this._valid=!1},t.prototype.prepareToGenerate=function(){var t,e,r,n;if(!this._valid){for(r=0,this._singleColor||this._comboCols,n=this._singleColor?1:this._comboMap.length/this._comboCols,this._adjustMap=new Array(this._comboMap.length),t=0;t<n;t++)for(e=this._minValue-1;e<this._maxValue;e++)this._comboMap[t*this._comboCols+e]&&(this._adjustMap[r++]=t*this._comboCols+e);this._adjustMap.length=r,this._cardinality=r}this._valid=!0},t.prototype.cardinality=function(){return this.prepareToGenerate(),this._cardinality},t.prototype.valueForIndex=function(t){var e=new Array(2);return this.prepareToGenerate(),e[1]=DBLUtils.toInt(this._adjustMap[t]/this._comboCols),e[0]=DBLUtils.toInt(this._adjustMap[t]-e[1]*this._comboCols)+1,e[1]++,e},t.prototype.equalValues=function(t,e){return this._coverCombos?t==e:(t=this.valueForIndex(t),e=this.valueForIndex(e),t[0]==e[0])},t.prototype.equalForWeakCompare=function(t,e){t=this.valueForIndex(t),e=this.valueForIndex(e);return t[0]==e[0]},t.prototype.equalForDuplicates=function(t,e){var r=t,n=e;return null==t&&(r=this.valueForIndex(DBLUtils.toInt(t))),null==n&&(n=this.valueForIndex(DBLUtils.toInt(e))),r[0]==n[0]},t})(),ALL_PROBLEMS=[[4,5],[5,6],[9,10],[10,11],[4,5,6],[9,10,11],[4,5,9,10],[4,5,10,11],[5,6,9,10],[5,6,10,11],[4,5,6,9,10],[4,5,6,10,11],[4,5,9,10,11],[5,6,9,10,11],[4,5,6,9,10,11]],DataSetPlusMinusOne=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.generateProblems=function(t,e){for(var r=[],n=t+this._benchmarkCountMin,i=t+this._benchmarkCountMax,o=ALL_PROBLEMS.length-1;0<=o;o--){var a=!0,s=ALL_PROBLEMS[o].length,u=this.getBenchmarkCount(ALL_PROBLEMS[o]);(s<n||i<s||u<this._benchmarkCountMin||u>this._benchmarkCountMax||s-u!=t)&&(a=!1);for(var l=0;a&&l<ALL_PROBLEMS[o].legth;l++)(ALL_PROBLEMS[o][l]<this._multiplierMin||ALL_PROBLEMS[o][l]>this._multiplierMax)&&(a=!1);a&&r.push(DBLUtils.clone(ALL_PROBLEMS[o]))}return r},e})(DataSetMultiplicationBaseBenchmarks),MAX_BLOCK_COUNT=4,MAX_BLOCK_LENGTH=20,MAX_SUM=20,MAX_PROBLEMS_PER_SUM=5,SHAPES=[[[[1,2]]],[[[2,2]]],[[[1,1],[1,2]]],[[[1,2],[1,2]]],[[[1,2],[2,1]]],[[[2,2],[1,2]],[[1,3],[2,1]]],[[[1,1],[1,2],[2,1]]],[[[1,1],[1,1],[1,1],[2,2]]]],DataSetVerticalPathDouble=(()=>{function t(){this._sumMin=-1,this._sumMax=-1,this._min=-1,this._max=-1,this._splits=[],this._currentSplit=[],this._forbidden=[],this._mats=[],this._result=null,this._sumsProcessed=0,this._currentProblem=0,this._stopTrying=!1,this.setSumMinMax(1,MAX_SUM),this.setMinMax(this.defaultMin,this.defaultMax),this._splits=new Array(this._sumMax+1);for(var t=0;t<=this._sumMax;t++){this._splits[t]=new Array(MAX_BLOCK_COUNT+1);for(var e=0;e<=MAX_BLOCK_COUNT;e++)this._splits[t][e]=[]}this.generateSubsetSums()}return Object.defineProperty(t.prototype,"defaultMin",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultMax",{get:function(){return MAX_BLOCK_LENGTH},enumerable:!1,configurable:!0}),t.prototype.setMinMax=function(t,e){e<t||t<1||MAX_BLOCK_LENGTH<e?DBLLog.log("Invalid min/max. The numbers need to satisfy 1 <= min <= max <= "+MAX_BLOCK_LENGTH+".",DBLLog.ERROR):(this._min=t,this._max=e)},t.prototype.setSumMinMax=function(t,e){e<t||t<1||MAX_SUM<e?DBLLog.log("Invalid sum min/max. The numbers need to satisfy 1 <= sumMin <= sumMax <= "+MAX_SUM+".",DBLLog.ERROR):(this._sumMin=t,this._sumMax=e)},t.prototype.generateProblems=function(t,e,r){this._forbidden=[[],[]],this._mats=[[],[]],this._result=[];var n=this.convertToIndex(t,e,r);if(-1!=n){for(var i=0;i<=this._max;i++)this._forbidden[0][i]=this._forbidden[1][i]=!1;for(i=0;i<SHAPES[n].length;i++)for(var o=this._sumMin;o<=this._sumMax;o++)this._currentProblem=0,this._stopTrying=!1,this.tryPath(n,i,0,o),this._sumsProcessed++}return this._result},t.prototype.convertToIndex=function(t,e,r){return 1==t&&2==e&&1==r?0:2==t&&2==e&&1==r?1:2==t&&3==e&&2==r?2:2==t&&4==e&&2==r?3:3==t&&3==e&&2==r?4:3==t&&4==e&&2==r?5:4==t&&4==e&&3==r?6:5==t&&5==e&&4==r?7:(DBLLog.log("Unsupported parameter configuration!",DBLLog.ERROR),-1)},t.prototype.canAdd=function(t,e){for(var r=0;r<e.length;r++)if(e[r]<this._min||e[r]>this._max||this._forbidden[t][e[r]])return!1;return!0},t.prototype.add=function(t,e){for(var r=0;r<e.length;r++)this._mats[t].push(e[r]),this._forbidden[(t+1)%2][e[r]]=!0},t.prototype.remove=function(t,e){for(var r=e.length,n=0;n<r;n++)this._forbidden[(t+1)%2][e[n]]=!1;this._mats[t].splice(this._mats[t].length-r,r)},t.prototype.unique=function(t,e){for(var r=0;r<t.length;r++)if(-1!=e.indexOf(t[r]))return!1;for(r=0;r<e.length;r++)if(-1!=t.indexOf(e[r]))return!1;return!0},t.prototype.tryPath=function(t,e,r,n){if(!this._stopTrying)if(r==SHAPES[t][e].length)this._result.push([this._mats[0].concat(),this._mats[1].concat()]),this._currentProblem>MAX_PROBLEMS_PER_SUM&&(this._stopTrying=!0);else for(var i=SHAPES[t][e][r],o=this._sumMin;o<=Math.min(n,this._sumMax)&&!this._stopTrying;o++){var a=0;if(1==i[0]&&1==i[1]&&this.canAdd(0,[o])&&this.canAdd(1,[o])&&(this.add(0,[o]),this.add(1,[o]),this.tryPath(t,e,r+1,n-o),this.remove(0,[o]),this.remove(1,[o])),1==i[0]&&2==i[1]&&this.canAdd(0,[o]))for(a=0;a<this._splits[o][2].length;a++)this.canAdd(1,this._splits[o][2][a])&&(this.add(0,[o]),this.add(1,this._splits[o][2][a]),this.tryPath(t,e,r+1,n-o),this.remove(0,[o]),this.remove(1,this._splits[o][2][a]));if(2==i[0]&&1==i[1]&&this.canAdd(1,[o]))for(a=0;a<this._splits[o][2].length;a++)this.canAdd(0,this._splits[o][2][a])&&(this.add(1,[o]),this.add(0,this._splits[o][2][a]),this.tryPath(t,e,r+1,n-o),this.remove(1,[o]),this.remove(0,this._splits[o][2][a]));if(1==i[0]&&3==i[1]&&this.canAdd(0,[o]))for(a=0;a<this._splits[o][3].length;a++)this.canAdd(1,this._splits[o][3][a])&&(this.add(0,[o]),this.add(1,this._splits[o][3][a]),this.tryPath(t,e,r+1,n-o),this.remove(0,[o]),this.remove(1,this._splits[o][3][a]));if(2==i[0]&&2==i[1])for(a=0;a<this._splits[o][2].length;a++)if(this.canAdd(0,this._splits[o][2][a]))for(var s=0;s<this._splits[o][2].length;s++)this.canAdd(1,this._splits[o][2][s])&&this.unique(this._splits[o][2][a],this._splits[o][2][s])&&(this.add(0,this._splits[o][2][a]),this.add(1,this._splits[o][2][s]),this.tryPath(t,e,r+1,n-o),this.remove(0,this._splits[o][2][a]),this.remove(1,this._splits[o][2][s]))}},t.prototype.generateSubsetSums=function(){for(var t=1;t<=MAX_BLOCK_COUNT;t++)this._currentSplit=new Array(t),this.recurse(0,t,1,0)},t.prototype.recurse=function(t,e,r,n){if(t==e)this._splits[n][e].push(this._currentSplit.concat());else for(var i=r;n+i<=this._sumMax;i++)this._currentSplit[t]=i,this.recurse(t+1,e,i+1,n+i)},t})(),DataSetVerticalPathSingle=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.canAdd=function(t,e){for(var r=0;r<e.length;r++)if(e[r]<this._min||e[r]>this._max||this._forbidden[0][e[r]]||this._forbidden[1][e[r]])return!1;return!0},e.prototype.add=function(t,e){for(var r=0;r<e.length;r++)this._mats[t].push(e[r]),this._forbidden[0][e[r]]=!0,this._forbidden[1][e[r]]=!0},e.prototype.remove=function(t,e){for(var r=e.length,n=0;n<r;n++)this._forbidden[0][e[n]]=!1,this._forbidden[1][e[n]]=!1;this._mats[t].splice(this._mats[t].length-r,r)},e})(DataSetVerticalPathDouble);