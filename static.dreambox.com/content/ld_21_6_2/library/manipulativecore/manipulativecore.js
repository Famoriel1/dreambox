var DBLGraphicUtils,DBLLayoutHelper,__extends=this&&this.__extends||(()=>{var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}})(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,s=e.length;o<s;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},library_manipulativecore=library_manipulativecore||{},DBLSolidHighlightFilter=(n=>{function t(t,e){void 0===e&&(e=1);var i=n.call(this)||this;return i.color=t,i.width=e,i}return __extends(t,n),Object.defineProperty(t.prototype,"color",{get:function(){return this._color.r<<16|this._color.g<<8|this._color.b},set:function(t){this._color=null!=t?{r:t>>16&255,g:t>>8&255,b:255&t,a:255}:{r:255,g:0,b:0,a:255}},enumerable:!1,configurable:!0}),t.prototype.getBounds=function(t){var e=this.width;return e<=0?t:(t||new createjs.Rectangle).pad(e,e,e,e)},t.prototype._applyFilter=function(t){if(0!=this.width){for(var i=t.data,n=0|t.width,o=0|t.height,l=function(t,e){return 0<=t&&t<n&&0<=e&&e<o?{r:i[t=4*(t+e*n)],g:i[1+t],b:i[2+t],a:i[3+t]}:{r:0,g:0,b:0,a:0}},e=function(t,e,i){function n(t,e){return o?0==l(t,e).a:0<l(t,e).a}var o=!1;i<0&&(o=!0,i=-i);if(n(t,e))return 0;for(var s=(i+1)*(i+1),r=s,h=-i;h<=i;h++)for(var a=-i;a<=i;a++)0==h&&0==a||n(t+h,e+a)&&(r=Math.min(r,h*h+a*a));return r==s?0:r<=i*i?255:Math.round(255*(i+1-Math.sqrt(r)))},s=[],r=0;r<n;r++)for(var h=0;h<o;h++)0<(c=e(r,h,this.width))&&s.push({x:r,y:h,alpha:c});for(var a=0;a<s.length;a++){var r=s[a].x,h=s[a].y,c=s[a].alpha,u=(p=d=u=void 0,r),d=h,p=__assign(__assign({},this._color),{a:c});i[u=4*(u+d*n)]=p.r,i[1+u]=p.g,i[2+u]=p.b,i[3+u]=p.a}}return!0},t})(createjs.Filter),DBLSolidHighlightManager=(()=>{function h(){}return Object.defineProperty(h,"instance",{get:function(){return this._instance||(this._instance=new h)},enumerable:!1,configurable:!0}),h.prototype.getHighlightObject=function(t,e,i,n){void 0===e&&(e=DBLHighlightConstants.GENERAL.color),void 0===i&&(i=DBLHighlightConstants.DEFAULT_WIDTHS.width),void 0===n&&(n=DBLHighlightConstants.DEFAULT_WIDTHS.border),t.solidHighlights||(t.solidHighlights={});var o=DBLUtils.getDisplayObjectHash(t,{hashKeys:["id","name","x","y","scaleX","scaleY","rotation","skewX","skewY","regX","regY","getBounds"],filterChildren:function(t){return!h.isSolidHighlight(t)}}),o="".concat(e,":").concat(i,":").concat(o),s=t.solidHighlights[o];return s||(s=h.createSolidHighlight(t,e,i,n),t.solidHighlights[o]=s),s},h.highlight=function(t,e,i,n){if(void 0===e&&(e=!0),void 0===i&&(i=DBLHighlightConstants.GENERAL.color),void 0===n&&(n=DBLHighlightConstants.DEFAULT_WIDTHS.width),Array.isArray(t))for(var o=0,s=t;o<s.length;o++){var r=s[o];h.highlight(r,e)}else{i=h.instance.getHighlightObject(t,i,n);-1===t.children.indexOf(i)&&t.addChild(i),i.visible=e}},h.createSolidHighlight=function(t,e,i,n){void 0===e&&(e=DBLHighlightConstants.GENERAL.color),void 0===i&&(i=DBLHighlightConstants.DEFAULT_WIDTHS.width),void 0===n&&(n=DBLHighlightConstants.DEFAULT_WIDTHS.border);e=DBLGraphicUtils.colorToNumber(e);if(!t.getBounds())return DBLLog.log("Attempt to call createSolidHighlight on a DisplayObject with null bounds.",DBLLog.WARN),t;function o(t){var e=Math.max(t.width,0),i=h.width+2*e,n=h.height+2*e,o=new createjs.DisplayObject;return o.cache(0,0,i,n),o.cacheCanvas.getContext("2d").drawImage(h,e,e),o.x=r.x-e,o.y=r.y-e,(e=new createjs.Container).addChild(o),e.filters=[t],e.cache(o.x,o.y,i,n),e}var s=null!=t.cacheCanvas,r=t.getBounds().clone(),h=(s||t.cache(r.x,r.y,r.width,r.height),t.cacheCanvas),a=new createjs.Container,l=(a.isSolidHighlight=!0,DBLHighlightConstants.BORDER_COLOR_MAP[e]);null!=l&&(l=o(new DBLSolidHighlightFilter(l,i+n)),a.addChild(l));n=o(new DBLSolidHighlightFilter(e,i));return a.addChild(n),s||t.uncache(),a},h.highlightText=function(i,t,e,n,o){void 0===t&&(t=!0),void 0===e&&(e=DBLHighlightConstants.GENERAL.color),void 0===n&&(n=DBLHighlightConstants.DEFAULT_WIDTHS.width),void 0===o&&(o=DBLHighlightConstants.DEFAULT_WIDTHS.border);var s=i.parent,r=s.getChildIndex(i),h=i.id+"textHighlight";t?(s.addChildAt((t=function(t,e){t=new createjs.Text(i.text,i.font,t);return t.name=h,t.textBaseline=i.textBaseline,t.rotation=i.rotation,t.textAlign=i.textAlign,t.outline=e,t.x=i.x,t.y=i.y,t.mouseEnabled=!1,t.isSolidHighlight=!0,t})(e,n),r),(e=DBLHighlightConstants.BORDER_COLOR_MAP[DBLGraphicUtils.colorToNumber(e)])&&(e=DBLGraphicUtils.convertColor(e),s.addChildAt(t(e,n+o),r)),s.cacheCanvas&&s.updateCache()):s.children.filter(function(t){return t.name==h}).forEach(function(t){return s.removeChild(t)})},h.isSolidHighlight=function(t){return 1==(null==t?void 0:t.isSolidHighlight)},h})(),DBLControllableButtonEvent=(n=>{function t(t,e,i){return n.call(this,t,e=void 0===e?!0:e,i=void 0===i?!1:i)||this}return __extends(t,n),t.prototype.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},t.DISABLED="disabled",t.ENABLED="enabled",t})(createjs.Event),DBLButtonController=(()=>{function t(t){this._stageListenerRef=null,this._isPressed=!1,this._isMouseOver=!1,this._button=t,this._button.mouseChildren=!1,this._button.mouseEnabled=!1,this._button.addEventListener("mousedown",this.onMouseDown.bind(this)),this._button.addEventListener("click",this.onClick.bind(this)),DBLCapabilities.hasMouse()&&(this._button.addEventListener("mouseover",this.onMouseOver.bind(this)),this._button.addEventListener("mouseout",this.onMouseOut.bind(this))),this._button.addEventListener(DBLControllableButtonEvent.DISABLED,this.onDisabled.bind(this))}return t.prototype.cleanup=function(){this.clearStageMouseUpListeners(),this._button&&(this._button.removeAllEventListeners("mousedown"),this._button.removeAllEventListeners("click"),this._button.removeAllEventListeners("mouseover"),this._button.removeAllEventListeners("mouseout"),this._button.removeAllEventListeners(DBLControllableButtonEvent.DISABLED),this._button=null)},t.prototype.clearStageMouseUpListeners=function(){this._stage&&this._stageListenerRef&&(this._stage.removeEventListener("pressup",this._stageListenerRef),this._stageListenerRef=null)},Object.defineProperty(t.prototype,"isPressed",{get:function(){return this._isPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMouseOver",{get:function(){return this._isMouseOver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonState",{set:function(t){this._button.state!=t&&(this._button.state=t)},enumerable:!1,configurable:!0}),t.prototype.onMouseDown=function(t){this.clearStageMouseUpListeners(),this._stage=this._button.stage,this._button.enabled&&this._stage&&(this._isPressed=!0,this.buttonState=DBLBaseButton.STATE_DOWN,DBLCapabilities.hasMouse()||this.expandHitArea(),this._stageListenerRef=this._stage.addEventListener("pressup",this.stageMouseUp.bind(this)))},t.prototype.onClick=function(t){void 0===t&&(t=null),this.clearStageMouseUpListeners(),this._isPressed=!1,this.contractHitArea(),this._button.enabled&&(this.buttonState=DBLCapabilities.hasMouse()&&!a11y.isKeyboardClick(t)?DBLBaseButton.STATE_OVER:DBLBaseButton.STATE_UP)},t.prototype.stageMouseUp=function(t){this.clearStageMouseUpListeners(),this._isPressed=!1,this.contractHitArea(),this._button&&this._button.enabled&&(this.buttonState=DBLBaseButton.STATE_UP)},t.prototype.expandHitArea=function(){var t,e=this._button.getBounds(),i=this._button.hitAreaPaddingOnTouchDown;e&&0<i&&((t=new createjs.Shape).graphics.beginFill("#000"),t.graphics.drawRect(e.x-i,e.y-i,e.width+2*i,e.height+2*i),t.graphics.endFill(),this._hitAreaOld=this._button.hitArea,this._button.hitArea=t,this._hitAreaExpanded=!0)},t.prototype.contractHitArea=function(){this._hitAreaExpanded&&(this._button.hitArea=this._hitAreaOld,this._hitAreaOld=null,this._hitAreaExpanded=!1)},t.prototype.onMouseOver=function(t){this._isMouseOver=!0,DBLDragManager.isDragging||this._button.state!=DBLBaseButton.STATE_DISABLED&&(__cursorOwner=this,DBLCursor.setCursor(DBLCursor.POINTER),this._isPressed?this.buttonState=DBLBaseButton.STATE_DOWN:this._button.enabled&&(this.buttonState=DBLBaseButton.STATE_OVER))},t.prototype.onMouseOut=function(t){this._isMouseOver=!1,__cursorOwner==this&&DBLCursor.setCursor(DBLCursor.AUTO),this._button.enabled&&(this.buttonState=DBLBaseButton.STATE_UP)},t.prototype.onDisabled=function(t){this._isPressed=!1},t})(),DBLButtonStateChangeEvent=(n=>{function o(t,e,i){return n.call(this,o.TYPE,e=void 0===e?!1:e,i=void 0===i?!0:i)||this}return __extends(o,n),o.prototype.clone=function(){return new o(this.type,this.bubbles,this.cancelable)},o.TYPE="ButtonStateChangeEvent",o})(createjs.Event),DBLBaseButton=(e=>{function i(){var t=e.call(this)||this;return t._hitAreaPaddingOnTouchDown=30,t._dispatchStateChangeEvent=!1,t._controller=new DBLButtonController(t),t}return __extends(i,e),i.prototype.init=function(){this.enabled=!0},i.prototype.cleanup=function(){this._controller.cleanup()},i.prototype.handleDownState=function(){},i.prototype.handleUpState=function(){},i.prototype.handleOverState=function(){},i.prototype.handleRollOver=function(){},i.prototype.handleEnabledStateChange=function(){this.mouseEnabled=this._enabled},i.prototype.dispatchEnabledStateChange=function(){var t=this._enabled?DBLControllableButtonEvent.ENABLED:DBLControllableButtonEvent.DISABLED;this.dispatchEvent(new DBLControllableButtonEvent(t))},i.prototype.highlight=function(t,e){},Object.defineProperty(i.prototype,"mouseTarget",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},set:function(t){this.setState(t)},enumerable:!1,configurable:!0}),i.prototype.setState=function(t){var e=this._state;if(e!==t){switch(this._state=t){case i.STATE_UP:this.handleUpState();break;case i.STATE_DOWN:this.handleDownState();break;case i.STATE_OVER:e===i.STATE_UP&&this.handleRollOver(),this.handleOverState()}this._dispatchStateChangeEvent&&this.dispatchEvent(new DBLButtonStateChangeEvent(t))}},i.prototype.setDispatchStateChangeEvent=function(t){this._dispatchStateChangeEvent=t},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.setEnabled(t)},enumerable:!1,configurable:!0}),i.prototype.getEnabled=function(){return this._enabled},i.prototype.setEnabled=function(t){this._enabled!=t&&(this._enabled=t,this._enabled?this._controller.isMouseOver?this.state=i.STATE_OVER:this.state=i.STATE_UP:this.state=i.STATE_DISABLED,this.handleEnabledStateChange(),this.dispatchEnabledStateChange())},Object.defineProperty(i.prototype,"isPressed",{get:function(){return this._controller.isPressed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMouseOver",{get:function(){return this._controller.isMouseOver},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hitAreaPaddingOnTouchDown",{get:function(){return this._hitAreaPaddingOnTouchDown},set:function(t){this._hitAreaPaddingOnTouchDown=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolTipText",{get:function(){return this._toolTipText},set:function(t){this._toolTipText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolTipTarget",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolTipObject",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolTipContainer",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.takePendingDownStateSnapshotInReplayMode=function(){var t;replayMode&&(t=this.state,this.state=i.STATE_DOWN,takePendingSnapshot(),this.state=t)},i.prototype.getAccessibilityData=function(t){var e=this;return{role:"button",display:{object:this},label:this.toolTipText,visible:this.visible,enabled:this._enabled,focus:{onHTMLFocus:null!=t&&t.updateStateOnFocus?function(){return e.handleOverState()}:null,onHTMLBlur:null!=t&&t.updateStateOnFocus?function(){return e.handleUpState()}:null}}},i.STATE_UP="up",i.STATE_DOWN="down",i.STATE_OVER="over",i.STATE_DISABLED="disabled",i})(createjs.Container),DBLTimelineButton=(l=>{function i(t,e,i,n,o,s,r,h){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===h&&(h=!1);var a=l.call(this)||this;if(DBLUtils.isFunction(t)?a.setClip(DBLAsset.create(t)):t instanceof createjs.MovieClip&&a.setClip(t),null==a._clip)throw new Error("No asset supplied to DBLTimelineButton!");return h?a._clip.addChild(a):a.addChild(a._clip),r||(o?a.hitArea=o:(t=a._clip.getTransformedBounds())&&(h=DBLCapabilities.hasMouse()?0:s,(r=new createjs.Shape).graphics.beginFill("#000"),r.graphics.drawRect(t.x-h,t.y-h,t.width+2*h,t.height+2*h),r.graphics.endFill(),a.hitArea=r)),a._clickSound=e,a._downSound=i,a._overSound=n,a.addEventListener("click",a.playSoundOnClick.bind(a)),a._highlightManager=new DBLHighlightManager,a._highlightManager.setGlowFilter(DBLHighlightConstants.GENERAL.color,1,8,3),l.prototype.init.call(a),a}return __extends(i,l),Object.defineProperty(i.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted=t},enumerable:!1,configurable:!0}),i.prototype.setClip=function(t){this._clip=t},i.prototype.cleanup=function(){this.removeAllEventListeners("click"),this._highlightManager.cleanup(),l.prototype.cleanup.call(this)},i.prototype.tick24=function(t){if(this._clip)for(;0<t--;)DBLAsset.advanceMovieClip(this._clip)},i.prototype.tickDOM=function(){this._domTestElement&&this._domTestElement._tick()},i.prototype.highlight=function(t,e){void 0===e&&(e=null),this.isHighlighted=t,this.hasFrame(i.FRAME_HIGHLIGHT)?t?this.gotoFrame(i.FRAME_HIGHLIGHT):this._enabled?this.gotoFrame(this._state==DBLBaseButton.STATE_OVER?i.FRAME_OVER:i.FRAME_UP):this.gotoFrame(i.FRAME_DISABLED):(null!=e&&(this._highlightManager.highlightColor=e),DBLHighlightManager.hasHighlightArt(this._clip)?this._highlightManager.highlight(this._clip,t):this._highlightManager.highlight(this,t))},i.prototype.getHighlight=function(){return null!=this._clip?this._clip.highlight:null},i.prototype.getHighlightArt=function(){return null!=this._clip?this._clip.highlightArt:null},i.prototype.handleUpState=function(){this.gotoFrame(i.FRAME_UP)},i.prototype.handleDownState=function(){this.playSound(this._downSound),this.gotoFrame(i.FRAME_DOWN)},i.prototype.handleRollOver=function(){this.playSound(this._overSound)},i.prototype.handleOverState=function(){this.gotoFrame(i.FRAME_OVER)},i.prototype.handleEnabledStateChange=function(){this.gotoFrame(this._enabled?i.FRAME_UP:i.FRAME_DISABLED),l.prototype.handleEnabledStateChange.call(this)},i.prototype.playSoundOnClick=function(t){this.playSound(this._clickSound)},i.prototype.gotoFrame=function(t){this._clip.gotoAndStop(t)},i.prototype.hasFrame=function(t){for(var e=0,i=this._clip.labels;e<i.length;e++)if(i[e].label==t)return!0;return!1},i.prototype.playSound=function(t){fastForwarding||null==t||DBLAsset.playSound(t)},Object.defineProperty(i.prototype,"toolTipTarget",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolTipContainer",{get:function(){return this._clip},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clip",{get:function(){return this._clip},enumerable:!1,configurable:!0}),i.prototype.getAccessibilityData=function(){return{role:"button",display:{object:this},label:this._toolTipText,labelObject:{id:this.name||"dblTimelineButton"},enabled:this._enabled,visible:this.visible}},i.FRAME_UP="Up",i.FRAME_DOWN="Down",i.FRAME_OVER="Over",i.FRAME_DISABLED="Disabled",i.FRAME_HIGHLIGHT="Highlight",i})(DBLBaseButton),DBLTimelineButtonHighlighter=(r=>{function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.prototype.highlight=function(t,e){void 0===e&&(e=null),this.isHighlighted=t;for(var i=!1,n=0,o=this._clip.labels;n<o.length;n++)if(o[n].label==DBLTimelineButton.FRAME_HIGHLIGHT){i=!0;break}if(i)if(t)this.gotoFrame(DBLTimelineButton.FRAME_HIGHLIGHT);else{var s=void 0;switch(this._state){case DBLBaseButton.STATE_OVER:s=DBLTimelineButton.FRAME_OVER;break;case DBLBaseButton.STATE_DISABLED:s=DBLTimelineButton.FRAME_DISABLED;break;default:s=DBLTimelineButton.FRAME_UP}this.gotoFrame(s)}else r.prototype.highlight.call(this,t,e)},t})(DBLTimelineButton),DBLClipClassButton=(g=>{function t(t,e,i,n,o,s,r,h,a,l,c){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===h&&(h=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===c&&(c=0);var u=g.call(this)||this;if(u._instances=[],u._autoCenter=!1,u._maxWidth=0,u._maxHeight=0,DBLUtils.isFunction(t)&&(u._upClass=t),DBLUtils.isFunction(e)&&(u._downClass=e),DBLUtils.isFunction(i)&&(u._overClass=i),DBLUtils.isFunction(n)&&(u._disabledClass=n),u._assetsCentered=o,u._cacheAssets=s,u._upClass?u._upInstance=DBLAsset.create(u._upClass):t&&t instanceof createjs.DisplayObject?u._upInstance=t:DBLLog.log("Attempting to instantiate DBLClipClassButton with invalid up asset ("+u._upClass+"). Must be type Function or createjs.DisplayObject",DBLLog.ERROR),u._downClass?u._downInstance=DBLAsset.create(u._downClass):e&&e instanceof createjs.DisplayObject&&(u._downInstance=e),u._overClass?u._overInstance=DBLAsset.create(u._overClass):i&&i instanceof createjs.DisplayObject&&(u._overInstance=i),u._disabledClass?u._disabledInstance=DBLAsset.create(u._disabledClass):n&&n instanceof createjs.DisplayObject&&(u._disabledInstance=n),u.addInstance(u._upInstance),u.addInstance(u._downInstance),u.addInstance(u._overInstance),u.addInstance(u._disabledInstance),u.positionInstances(),!l){for(var d=new createjs.Rectangle,p=0;p<u._instances.length;p++)d.x=Math.min(d.x,u._instances[p].getTransformedBounds().x),d.y=Math.min(d.y,u._instances[p].getTransformedBounds().y),d.width=Math.max(d.width,u._instances[p].getTransformedBounds().width),d.height=Math.max(d.height,u._instances[p].getTransformedBounds().height);o=DBLCapabilities.hasMouse()?0:c,s=new createjs.Shape;s.graphics.beginFill("#000"),s.graphics.drawRect(d.x-o,d.y-o,d.width+2*o,d.height+2*o),s.graphics.endFill(),u.positionInstance(s)}return u.hitArea=l,u.setBounds(d.x,d.y,d.width,d.height),u.clickSound=r,u.downSound=h,u.overSound=a,u.addEventListener("click",u.playSoundOnClick.bind(u)),u._highlightManager=new DBLHighlightManager,u._highlightManager.setGlowFilter(DBLHighlightConstants.GENERAL.color,1,8,3),g.prototype.init.call(u),u}return __extends(t,g),t.prototype.cleanup=function(){this._highlightManager.cleanup(),g.prototype.cleanup.call(this)},t.prototype.tick24=function(t){if(this._upInstance&&this._upInstance instanceof createjs.MovieClip)for(;0<t--;)DBLAsset.advanceMovieClip(this._upInstance)},t.prototype.tickDOM=function(){this._domTestElement&&this._domTestElement._tick()},t.prototype.highlight=function(t,e){null!=(e=void 0===e?null:e)&&(this._highlightManager.highlightColor=e);for(var i=0,n=this._instances;i<n.length;i++){var o=n[i];this._highlightManager.highlight(o,t)}},t.prototype.handleUpState=function(){this.showInstance(this._upInstance)},t.prototype.handleDownState=function(){this.playSound(this.downSound),this._downInstance&&this.showInstance(this._downInstance)},t.prototype.handleRollOver=function(){this.playSound(this.overSound)},t.prototype.handleOverState=function(){this._overInstance&&this.showInstance(this._overInstance)},t.prototype.handleEnabledStateChange=function(){this._enabled?this.handleUpState():this.handleDisabledState(),g.prototype.handleEnabledStateChange.call(this)},t.prototype.handleDisabledState=function(){this._disabledInstance?this.showInstance(this._disabledInstance):this.handleUpState()},t.prototype.showInstance=function(t){for(var e=0,i=this._instances;e<i.length;e++){var n=i[e];n!=t&&(n.visible=!1)}t.visible=!0},t.prototype.addInstance=function(t){t&&(this.updateAssetCache(t),this._instances.push(t),this.addChild(t))},t.prototype.updateAssetCache=function(t){var e=t.getBounds().clone();e.width+=2,e.height+=2,this._cacheAssets&&(this._assetsCentered?t.cache(-e.width/2,-e.height/2,e.width,e.height,standardScale):t.cache(-1,-1,e.width,e.height,standardScale)),this._maxWidth=Math.max(e.width,this._maxWidth),this._maxHeight=Math.max(e.height,this._maxHeight)},t.prototype.positionInstance=function(t){this._autoCenter?(t.x=-this._maxWidth/2,t.y=-this._maxHeight/2):(t.x=0,t.y=0)},t.prototype.positionInstances=function(){for(var t=0,e=this._instances;t<e.length;t++){var i=e[t];this.positionInstance(i)}},t.prototype.playSoundOnClick=function(t){this.playSound(this.clickSound)},t.prototype.playSound=function(t){fastForwarding||null==t||DBLAsset.playSound(t)},Object.defineProperty(t.prototype,"autoCenter",{get:function(){return this._autoCenter},set:function(t){this._autoCenter!=t&&(this._autoCenter=t,this.positionInstances(),this.hitArea)&&this.positionInstance(this.hitArea)},enumerable:!1,configurable:!0}),t.prototype.updateStateCaches=function(){for(var t=0,e=this._instances;t<e.length;t++){var i=e[t];i.cacheCanvas&&i.updateCache()}},t.prototype.setFilters=function(t){for(var e=0,i=this._instances;e<i.length;e++){var n=i[e];n.filters=t,this.updateAssetCache(n)}},Object.defineProperty(t.prototype,"toolTipTarget",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolTipContainer",{get:function(){return this._overInstance},enumerable:!1,configurable:!0}),t})(DBLBaseButton),DBLSelectTimelineButton=(s=>{function e(t,e,i,n,o){void 0===o&&(o=!1);t=s.call(this,t,e=void 0===e?null:e,i=void 0===i?null:i,n=void 0===n?null:n)||this;return t._dispatchSelectionChange=!1,t._dispatchSelectionChange=o,t}return __extends(e,s),e.prototype.handleOverState=function(){this._isSelected?this.gotoFrame(e.FRAME_SELECTED_OVER):s.prototype.handleOverState.call(this)},e.prototype.handleDownState=function(){this._isSelected?this.gotoFrame(e.FRAME_SELECTED_DOWN):s.prototype.handleDownState.call(this)},e.prototype.handleRollOver=function(){this._isSelected||s.prototype.handleRollOver.call(this)},e.prototype.handleUpState=function(){this._isSelected?this.gotoFrame(e.FRAME_SELECTED):s.prototype.handleUpState.call(this)},e.prototype.handleEnabledStateChange=function(){this._enabled?this.gotoFrame(this._isSelected?e.FRAME_SELECTED:e.FRAME_UP):this.gotoFrame(e.FRAME_DISABLED),this.mouseEnabled=this._enabled},Object.defineProperty(e.prototype,"selected",{get:function(){return this._isSelected},set:function(t){this.gotoFrame(t?e.FRAME_SELECTED:e.FRAME_UP),this._isSelected=t,this._dispatchSelectionChange&&this.dispatchEvent(new createjs.Event(e.SELECTED_STATE_CHANGED_EVENT,!0,!0))},enumerable:!1,configurable:!0}),e.SELECTED_STATE_CHANGED_EVENT="selectedStateChanged",e.FRAME_SELECTED="Selected",e.FRAME_SELECTED_OVER="SelectedOver",e.FRAME_SELECTED_DOWN="SelectedDown",e})(DBLTimelineButton),DBLStateTimelineButton=(r=>{function e(t,e,i,n,o,s){void 0===e&&(e=null),void 0===i&&(i=!0);t=r.call(this,t,n=void 0===n?null:n,o=void 0===o?null:o,s=void 0===s?null:s,!0)||this;return t._centerAlign=!0,t._centerAlign=i,e&&(t.currentState=e),t.centerPosition(),t.addEventListener(DBLSelectTimelineButton.SELECTED_STATE_CHANGED_EVENT,t.onSelectedStateChanged.bind(t)),t}return __extends(e,r),Object.defineProperty(e.prototype,"currentState",{get:function(){return this._currentState||this._state},set:function(t){this._currentState=t,this.gotoFrame(t),this.dispatchEvent(new createjs.Event(e.STATE_CHANGED_EVENT,!0,!0))},enumerable:!1,configurable:!0}),e.prototype.onSelectedStateChanged=function(t){this._currentState=null,this.selected?this.gotoFrame(DBLSelectTimelineButton.FRAME_SELECTED):this.gotoFrame(DBLSelectTimelineButton.FRAME_UP)},e.prototype.handleUpState=function(){this._currentState?this.gotoFrame(this._currentState):this.selected?this.gotoFrame(e.FRAME_SELECTED):this.gotoFrame(e.FRAME_UP)},e.prototype.handleEnabledStateChange=function(){this._enabled?this.handleUpState():this.gotoFrame(DBLSelectTimelineButton.FRAME_DISABLED),this.mouseEnabled=this._enabled},e.prototype.centerPosition=function(){this._centerAlign&&(this.x=-this.getBounds().x,this.y=-this.getBounds().y)},e.STATE_CHANGED_EVENT="stateChanged",e})(DBLSelectTimelineButton),DBLToggleTimelineButton=(i=>{function e(t,e){return i.call(this,t,e=void 0===e?null:e)||this}return __extends(e,i),e.prototype.handleOverState=function(){this._isSelected||i.prototype.handleOverState.call(this)},e.prototype.handleDownState=function(){this._isSelected||i.prototype.handleDownState.call(this)},e.prototype.handleRollOver=function(){this._isSelected||i.prototype.handleRollOver.call(this)},e.prototype.handleUpState=function(){this._isSelected||i.prototype.handleUpState.call(this)},e.prototype.handleEnabledStateChange=function(){this._enabled?this.gotoFrame(this._isSelected?e.FRAME_SELECTED:DBLTimelineButton.FRAME_UP):this.gotoFrame(DBLTimelineButton.FRAME_DISABLED),this.mouseEnabled=this._enabled},Object.defineProperty(e.prototype,"selected",{get:function(){return this._isSelected},set:function(t){this.gotoFrame(t?e.FRAME_SELECTED:DBLTimelineButton.FRAME_UP),this.mouseEnabled=!t,this._isSelected=t},enumerable:!1,configurable:!0}),e.FRAME_SELECTED="Selected",e})(DBLTimelineButton),DBLCompleteTimelineButton=(i=>{function t(t,e){t=i.call(this,t,null,null,null)||this;return t._disabledState=e,t}return __extends(t,i),t.prototype.handleEnabledStateChange=function(){this.gotoFrame(this._enabled?DBLTimelineButton.FRAME_UP:this._disabledState),this.mouseEnabled=this._enabled},t.prototype.tick24=function(){DBLAsset.advanceMovieClip(this._clip)},t})(DBLTimelineButton),DBLMultiModeTimelineButton=(s=>{function r(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=s.call(this)||this;if(o._nextModeMap={},DBLUtils.isFunction(t)?o._clip=DBLAsset.create(t):t instanceof createjs.MovieClip&&(o._clip=t),null==o._clip)throw new Error("No asset supplied to DBLMultiModeTimelineButton!");return DBLAsset.setChildrenBounds(o._clip),o.getHighlight()&&(o.getHighlight().visible=!1),o.getHighlightArt()&&(o.getHighlightArt().visible=!1),o.addChild(o._clip),o.clickSound=e,o.downSound=i,o.overSound=n,o._mode=r.NORMAL_MODE,o.state=DBLBaseButton.STATE_UP,o.addEventListener("click",o.clicked.bind(o)),o.init(),o}return __extends(r,s),r.prototype.cleanup=function(){this.removeAllEventListeners("click"),this.clickSound=null,this.downSound=null,this.overSound=null,s.prototype.cleanup.call(this)},Object.defineProperty(r.prototype,"clip",{get:function(){return this._clip},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,this._mode&&""!=this._mode||this._nextModeMap&&this._nextModeMap[this._mode]&&(this._mode=this._nextModeMap[this._mode]),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modeMap",{set:function(t){this._nextModeMap=t,this.update()},enumerable:!1,configurable:!0}),r.prototype.handleDownState=function(){this.playSound(this.downSound),this.gotoFrame(this.framePrefix+DBLBaseButton.STATE_DOWN)},r.prototype.handleUpState=function(){this.gotoFrame(this.framePrefix+DBLBaseButton.STATE_UP)},r.prototype.handleRollOver=function(){this.playSound(this.overSound)},r.prototype.handleOverState=function(){this.gotoFrame(this.framePrefix+DBLBaseButton.STATE_OVER)},r.prototype.handleEnabledStateChange=function(){this.state=this._enabled?DBLBaseButton.STATE_UP:DBLBaseButton.STATE_DISABLED,this.state==DBLBaseButton.STATE_DISABLED&&this.gotoFrame(this.framePrefix+DBLBaseButton.STATE_DISABLED),s.prototype.handleEnabledStateChange.call(this)},r.prototype.clicked=function(t){this.playSound(this.clickSound),null!=this._nextModeMap[this._mode]&&(this._mode=this._nextModeMap[this._mode],this.update())},r.prototype.update=function(){this.gotoFrame(this.framePrefix+this.state)},r.prototype.getHighlight=function(){return null!=this._clip?this._clip.highlight:null},r.prototype.getHighlightArt=function(){return null!=this._clip?this._clip.highlightArt:null},r.prototype.gotoFrame=function(t){this._clip.gotoAndStop(t)},Object.defineProperty(r.prototype,"framePrefix",{get:function(){return this._mode&&""!=this._mode?this._mode+"-":""},enumerable:!1,configurable:!0}),r.prototype.playSound=function(t){fastForwarding||null==t||DBLAsset.playSound(t)},r.NORMAL_MODE="Normal",r.SELECTED_MODE="Selected",r.STATIC_MODE="Static",r})(DBLBaseButton),DBLBasePlacedArtButton=(()=>{function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this._hitAreaPaddingOnTouchDown=30,this._target=t,this._controller=new DBLButtonController(this),this.enabled=!0,this.clickSound=e,this.downSound=i,this.overSound=n,this.addEventListener("click",this.playSoundOnClick.bind(this))}return t.prototype.cleanup=function(){this._controller.cleanup(),this.removeAllEventListeners("click")},t.prototype.handleDownState=function(){this.playSound(this.downSound)},t.prototype.handleUpState=function(){},t.prototype.handleOverState=function(){this.playSound(this.overSound)},t.prototype.handleEnabledStateChange=function(){this.mouseEnabled=this.enabled},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled!=t&&((this._enabled=t)||(this.state=DBLBaseButton.STATE_DISABLED),this.handleEnabledStateChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t)switch(this._state=t){case DBLBaseButton.STATE_UP:this.handleUpState();break;case DBLBaseButton.STATE_DOWN:this.handleDownState();break;case DBLBaseButton.STATE_OVER:this.handleOverState();break;case DBLBaseButton.STATE_DISABLED:}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitAreaPaddingOnTouchDown",{get:function(){return this._hitAreaPaddingOnTouchDown},set:function(t){this._hitAreaPaddingOnTouchDown=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mouseTarget",{get:function(){return this._target},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(t,e){return this._target.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this._target.removeEventListener(t,e)},t.prototype.removeAllEventListeners=function(t){this._target.removeAllEventListeners(t=void 0===t?null:t)},t.prototype.dispatchEvent=function(t){return this._target.dispatchEvent(t)},t.prototype.hasEventListener=function(t){return this._target.hasEventListener(t)},t.prototype.willTrigger=function(t){return this._target.willTrigger(t)},t.prototype.localToGlobal=function(t,e){return this._target.localToGlobal(t,e)},t.prototype.globalToLocal=function(t,e){return this._target.globalToLocal(t,e)},Object.defineProperty(t.prototype,"mouseChildren",{get:function(){return this._target.mouseChildren},set:function(t){this._target.mouseChildren=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mouseEnabled",{get:function(){return this._target.mouseEnabled},set:function(t){this._target.mouseEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._target.stage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitArea",{get:function(){return this._target.hitArea},enumerable:!1,configurable:!0}),t.prototype.getBounds=function(){return this._target.getBounds()},t.prototype.playSound=function(t){fastForwarding||null==t||DBLAsset.playSound(t)},t.prototype.playSoundOnClick=function(t){this.playSound(this.clickSound)},t})(),DBLBasePlacedArtScaleButton=(s=>{function t(t,e,i,n,o){void 0===e&&(e=.1);t=s.call(this,t,i=void 0===i?null:i,n=void 0===n?null:n,o=void 0===o?null:o)||this;return t._scaleFactor=e,t}return __extends(t,s),t.prototype.cleanup=function(){s.prototype.cleanup.call(this)},t.prototype.handleDownState=function(){s.prototype.handleDownState.call(this),this._target.scaleX=1-this._scaleFactor,this._target.scaleY=1-this._scaleFactor},t.prototype.handleUpState=function(){s.prototype.handleUpState.call(this),this._target.scaleX=1,this._target.scaleY=1},t.prototype.handleOverState=function(){s.prototype.handleOverState.call(this),this._target.scaleX=1+this._scaleFactor,this._target.scaleY=1+this._scaleFactor},t})(DBLBasePlacedArtButton),DBLAPlacedMovieClipButton=(e=>{function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.handleDownState=function(){this.gotoFrame(t.FRAME_DOWN)},t.prototype.handleUpState=function(){this.gotoFrame(t.FRAME_UP)},t.prototype.handleOverState=function(){this.gotoFrame(t.FRAME_OVER)},t.prototype.handleEnabledStateChange=function(){this.gotoFrame(this.enabled?t.FRAME_UP:t.FRAME_DISABLED),e.prototype.handleEnabledStateChange.call(this)},t.prototype.gotoFrame=function(t){this.clip.gotoAndStop(t)},Object.defineProperty(t.prototype,"clip",{get:function(){return this._target},enumerable:!1,configurable:!0}),t.FRAME_UP="Up",t.FRAME_DOWN="Down",t.FRAME_OVER="Over",t.FRAME_DISABLED="Disabled",t})(DBLBasePlacedArtButton),DBLCallLaterQueue=(()=>{function t(){this._nextFrameQueue=[],this._timedQueue=[],this._nextFrameQueueLength=0,this._timedQueueLength=0,this._running=!1}return t.prototype.callNextFrame=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._nextFrameQueueLength=this._nextFrameQueue.push({func:t,scope:e,args:i}),this.checkAndStart()},t.prototype.callAfterDelay=function(t,e,i){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];e?(this._timedQueueLength=this._timedQueue.push({func:t,delay:e,scope:i,args:n}),this.checkAndStart()):t.apply(i,n)},t.prototype.cleanup=function(){this._nextFrameQueue.length=this._nextFrameQueueLength=0,this._timedQueue.length=this._timedQueueLength=0,this.checkAndStop()},t.prototype.checkAndStart=function(){this._running||this._nextFrameQueueLength+this._timedQueueLength!=1||(this._running=!0,this._lastTime=createjs.Ticker.getTime(),this._listenerRef=createjs.Ticker.addEventListener("tick",this.onTick.bind(this)))},t.prototype.checkAndStop=function(){!this._running||this._nextFrameQueueLength||this._timedQueueLength||(this._running=!1,createjs.Ticker.removeEventListener("tick",this._listenerRef))},t.prototype.onTick=function(t){var e,i,n,o;if(this._nextFrameQueueLength){for(a=0;a<this._nextFrameQueueLength;a++){i=(e=this._nextFrameQueue.shift()).func,n=e.scope,o=e.args;try{i.apply(n,o)}catch(t){throw this._nextFrameQueueLength=0,t}}this._nextFrameQueueLength=this._nextFrameQueue.length}if(this._timedQueueLength){for(var s=createjs.Ticker.getTime(),r=s-this._lastTime,h=(this._lastTime=s,[]),a=this._timedQueueLength-1;0<=a;a--)(e=this._timedQueue[a]).delay-=r,e.delay<=0&&(this._timedQueue.splice(a,1),h.push(e));for(;h.length;)(i=(e=h.pop()).func).apply(n=e.scope,o=e.args);this._timedQueueLength=this._timedQueue.length}this.checkAndStop()},t})(),DBLCanvasPool=(()=>{function t(){this._cache={}}return t.prototype.get=function(t,e){var i,n,o,s=this._cache[t],e=(s?(i=s.cacheCanvas,n=s.bounds,o=s.coordinates):(DBLLog.log("DBLCanvasPool: cache miss for "+t,DBLLog.INFO),e=(s=e()).getBounds(),DBLLog.log("DBLCanvasPool: asset bounds are "+e.width*standardScale+"x"+e.height*standardScale,DBLLog.INFO),s.cache(e.x,e.y,e.width,e.height,standardScale),i=s.cacheCanvas,n=new createjs.Rectangle(e.x*standardScale,e.y*standardScale,e.width*standardScale,e.height*standardScale),o=new createjs.Point(s.x,s.y),s.uncache(),this._cache[t]={cacheCanvas:i,bounds:n,coordinates:o}),new createjs.Bitmap(i));return e.setBounds(0,0,n.x+n.width,n.y+n.height),e.scaleX=e.scaleY=1/standardScale,e.x=o.x+n.x/standardScale,e.y=o.y+n.y/standardScale,e},t})(),CanvasPoolElement=function(){},DBLHighlightHelper=((a=>{function i(t){var e,i=createjs.Graphics,o=1/0,s=-1/0,r=1/0,h=-1/0,n=t.instructions,a=[],l=null;function c(t){var e,i=t/2;for(e in a){var n=a[e];o>n.x-i&&(o=n.x-i),s<n.x+i&&(s=n.x+i),n.y-i<r&&(r=n.y-i),h<n.y+i&&(h=n.y+i)}}for(e in n){var u=n[e];u instanceof i.BeginPath?(a=[],l=null):u instanceof i.Fill?c(0):u instanceof i.Stroke?l&&c(l.width):u instanceof i.StrokeStyle?l=u:u instanceof i.MoveTo||u instanceof i.LineTo?(a.push(u),0):u instanceof i.Circle?(a.push({x:u.x,y:u.y-u.radius}),a.push({x:u.x,y:u.y+u.radius}),a.push({x:u.x-u.radius,y:u.y}),a.push({x:u.x+u.radius,y:u.y})):u instanceof i.ArcTo?(a.push({x:u.x1,y:u.y1}),a.push({x:u.x2,y:u.y2})):u instanceof i.QuadraticCurveTo?(a.push({x:u.x,y:u.y}),a.push({x:u.cpx,y:u.cpy})):(u instanceof i.Rect||u instanceof i.RoundRect)&&(a.push({x:u.x,y:u.y}),a.push({x:u.x+u.w,y:u.y+u.h}))}return new createjs.Rectangle(o,r,s-o,h-r)}function d(t){return 3==(t="#"==t.charAt(0)?t.substr(1):t).length&&(t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n})),t}function n(t){t=parseInt(t,16);return[p(t),g(t),255&t]}function p(t){return t>>16&255}function g(t){return t>>8&255}function t(t){return 255&t}function o(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function s(t,e){if(e&&t){var i=t.globalToLocal(e.stageX,e.stageY),n=t.getBounds();if(t.hitArea&&null!=t.hitArea.getBounds()&&(i=t.hitArea.globalToLocal(e.stageX,e.stageY),n=t.hitArea.getBounds()),i&&n&&n.contains(i.x,i.y))return!0}return!1}a.convertMovieClipToSprite=function(t,e,i){return void 0===e&&(e=24),void 0===i&&(i=1),(e=new createjs.SpriteSheetBuilder(e)).addMovieClip(t),e.build(),e.scale=i,(t=new createjs.Sprite(e.spriteSheet)).scaleX=t.scaleY=1/i,t},a.convertDisplayObjectToSprite=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=24),(i=new createjs.SpriteSheetBuilder(i)).scale=e,t instanceof createjs.MovieClip?i.addMovieClip(t):i.addFrame(t),i.build(),(t=new createjs.Sprite(i.spriteSheet)).scaleX=t.scaleY=1/e,t},a.calculateGraphicsBounds=i,a.convertContainerToSprite=function(t){var e=new createjs.SpriteSheetBuilder;return e.addFrame(t),e.build(),new createjs.Sprite(e.spriteSheet)},a.buildSpriteFromMovieClipSegment=function(t,e,i){void 0===i&&(i=24);for(var n=new createjs.SpriteSheetBuilder(i),o=[],s=(t.gotoAndPlay(e),t.currentFrame),r=!1,h=!1;!h;)h=t.paused,n.addFrame(t,t.getBounds(),standardScale,function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e),t.actionsEnabled=i},t.currentFrame),o.push(t.currentFrame-s),h||(t.advance(),-1!==o.indexOf(t.currentFrame)&&(r=h=!0));return n.addAnimation(e,o,r),(i=new createjs.Sprite(n.build(),e)).scaleX=i.scaleY=1/standardScale,i},a.addFrameLabelAnimations=function(t,e,i){void 0===i&&(i=!0);var n=t.timeline.getLabels(),o="begin";for(0<n.length&&(0==n[0].position?o=n[0].label:n.unshift({position:0,label:o}));0<n.length;){var s=n.shift(),r=t.totalFrames,h=o;0<n.length&&(r=n[0].position,h=n[0].label),e.addAnimation(s.label,this.getFrameIndicesBetween(s.position,r),!i&&h)}},a.getFrameIndicesBetween=function(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i},a.findNearestSPOT=function(t){for(var e=1;t.width>e||t.height>e;)e*=2;return e},a.drawLine=function(t){var e=new createjs.Shape,t=(e.graphics.setStrokeStyle(t.strength).beginStroke(t.color),e.graphics.moveTo(t.start.x,t.start.y).lineTo(t.end.x,t.end.y).endStroke(),i(e.graphics));return e.setBounds(t.x,t.y,t.width,t.height),e},a.drawFilledRectangle=function(t,e,i){var n=new createjs.Shape;return this.fillRectangle(n,t,e,i),n},a.fillRectangle=function(t,e,i,n){t.graphics.clear(),t.graphics.beginFill(n),t.graphics.drawRect(0,0,e,i),t.graphics.endFill(),t.setBounds(0,0,e,i)},a.drawFilledRoundRectangle=function(t,e,i,n,o){void 0===o&&(o=1);var s=new createjs.Shape;return s.graphics.clear(),s.graphics.beginFill(i),s.graphics.drawRoundRect(0,0,t,e,n),s.graphics.endFill(),s.alpha=o,s.setBounds(0,0,t,e),s},a.drawFilledCircle=function(t,e,i){void 0===i&&(i=!1);var n=new createjs.Shape;return n.graphics.beginFill(e),i?n.graphics.drawCircle(t,t,t):n.graphics.drawCircle(0,0,t),n.graphics.endFill(),i?n.setBounds(0,0,2*t,2*t):n.setBounds(-t,-t,2*t,2*t),n},a.convertColor=function(t,e){void 0===e&&(e=1);var i="000000";return"string"==typeof t?i=d(t):"number"==typeof t&&(i=t.toString(16)),"rgba("+n(i="000000".substr(0,6-i.length)+i).join()+","+e+")"},a.formatHex=d,a.hexToRgb=n,a.colorToNumber=function(t){return null==t?NaN:"number"==typeof t?t:parseInt(a.formatHex(t.toString()),16)},a.extractRed=p,a.extractGreen=g,a.extractBlue=t,a.addGlowFilter=function(t,e,i){void 0===i&&(i=standardScale);var n=t.getBounds();if(!n)throw new Error("Attempt to call addGlowFilter on a DisplayObject with null bounds.");t.filters=t.filters?t.filters.concat(e):[e],t.cacheCanvas&&(t.gfWasCached=!0),t.cache(n.x-e.blurX,n.y-e.blurY,n.width+2*e.blurX,n.height+2*e.blurY,i)},a.removeFilter=function(t,e){e&&t.filters&&-1!=(e=t.filters.indexOf(e))&&(t.filters.splice(e,1),0<t.filters.length?t.updateCache():t.gfWasCached?(e=t.getBounds())&&t.cache(e.x,e.y,e.width,e.height,standardScale):(t.uncache(),manualInvalidate(t)))},a.createGlowHighlight=function(t,e){var i,l,c,n,o,s,r;if(t.getBounds())return i=null!=t.cacheCanvas,l=t.getBounds().clone(),i||t.cache(l.x,l.y,l.width,l.height),c=t.cacheCanvas,n=function(t){var e=t.color,i=p(e),n=g(e),e=255&e,o=t.blurX,s=t.blurY,r=c.width+2*o,h=c.height+2*s,a=new createjs.DisplayObject;a.cache(0,0,r,h);a.cacheCanvas.getContext("2d").drawImage(c,o,s),a.x=l.x-o,a.y=l.y-s;o=new createjs.Container;return o.addChild(a),o.filters=[t,new createjs.ColorFilter(0,0,0,1,i,n,e,0)],o.cache(a.x,a.y,r,h),o},o=new createjs.Container,null!=(s=DBLHighlightConstants.BORDER_COLOR_MAP[e.color])&&((r=e.clone()).color=s,r.blurX=e.blurX+1,r.blurY=e.blurY+1,s=n(r),o.addChild(s)),r=n(e),o.addChild(r),i||t.uncache(),o;throw new Error("Attempt to call createGlowHighlight on a DisplayObject with null bounds.")},a.createHighlight=function(t,e,i,l,n){var o,c,u,s,r,h;if(void 0===i&&(i=10),void 0===l&&(l=3),void 0===n&&(n=8),t.getBounds())return o=null!=t.cacheCanvas,c=t.getBounds().clone(),o||t.cache(c.x,c.y,c.width,c.height),u=t.cacheCanvas,s=function(t,e,i){var t=new createjs.ColorFilter(0,0,0,1,p(t),g(t),255&t,0),i=new createjs.BlurFilter(i,i,3),n=u.width+2*e,o=u.height+2*e,s=new createjs.DisplayObject,r=(s.cache(0,0,n,o),s.cacheCanvas),h=r.getContext("2d"),n=(h.drawImage(u,e,e),s.x=c.x-e,s.y=c.y-e,h.getImageData(0,0,r.width,r.height));i._applyFilter(n)&&h.putImageData(n,0,0),n=h.getImageData(0,0,r.width,r.height),t._applyFilter(n)&&h.putImageData(n,0,0);for(var a=0;a<l;a++)h.drawImage(r,0,0);return s},e=d(e),e=parseInt(e,16),r=new createjs.Container,null!=(h=DBLHighlightConstants.BORDER_COLOR_MAP[e])&&(h=s(h,i+2,n+1),r.addChild(h)),h=s(e,i,n),r.addChild(h),o||t.uncache(),r;throw new Error("Attempt to call createHighlight on a DisplayObject with null bounds.")},a.getEffectiveScale=function(t,e){void 0===e&&(e=!1);for(var i=1;null!=t;)!e&&t instanceof createjs.Stage||(i*=t.scaleX),t=t.parent;return i},a.replaceDisplayObject=function(t,e,i){i!=e&&(t.addChildAt(i,t.getChildIndex(e)),t.removeChild(e))},a.lengthOfPoint=o,a.normalizePoint=function(t,e){var i=o(t);return 0==i?new createjs.Point(0,0):new createjs.Point(e*t.x/i,e*t.y/i)},a.hitTestObject=function(t,e){if(t=t.getBounds(),e=e.getBounds(),t&&e)return t.intersects(e);assert(!1)},a.hitTestMouseEvent=s,a.addClickOutListener=function(e,i){var t=engagementStage.addEventListener("stagemousedown",function(t){shouldBlur(t)&&!s(e,t)&&i(t)});return function(){engagementStage.removeEventListener("stagemousedown",t)}},a.cacheContainer=function(t,e){for(var i in void 0===e&&(e=0),t instanceof createjs.MovieClip&&t.gotoAndStop(e),t){var n;t[i]instanceof createjs.DisplayObject&&(t[i].name=i,t[i]instanceof createjs.Text||(n=void 0,t[i].nominalBounds?n=t[i].nominalBounds:t[i].getBounds()&&(n=t[i].getBounds()),n&&t[i].cache(n.x,n.y,n.width,n.height,standardScale*t[i].scaleX)))}return t},a.createCachedContainer=function(t){for(var e=new createjs.Container,i=0,n=t.children;i<n.length;i++){var o,s=n[i],r=null;if(r=!(s instanceof createjs.Text)&&(o=void 0,s.nominalBounds?o=s.nominalBounds:s.getBounds()&&(o=s.getBounds()),o)?a.createBitmapFromDisplayObject(s,standardScale,o):s.clone()){for(var h in r.name=s.name,t)if(t[h]===s){e[h]=r;break}e.addChild(r)}}return e},a.copyCachedContainer=function(t){for(var e=new createjs.Container,i=0;i<t.numChildren;i++){var n,o=t.getChildAt(i),s=void 0;o.cacheCanvas?((n=new createjs.Bitmap(o.cacheCanvas)).scaleX=1/standardScale,n.scaleY=1/standardScale,(s=new createjs.Container).x=o.getTransformedBounds().x,s.y=o.getTransformedBounds().y,s.addChild(n)):((s=o.clone()).x=o.x,s.y=o.y),o.name&&(e[o.name]=s),e.addChild(s)}return e},a.createCachedMovieClip=function(t,e){var i=t.timeline.getLabels(),n=new createjs.MovieClip;t.gotoAndStop(0);for(var o=0;o<i.length;o++){var s=i[o].label,s=(n.timeline.addLabel(s,o),t.gotoAndStop(s),e?a.createBitmapFromContainerUsingNominalBounds(t):a.createBitmapFromContainer(t)),s=createjs.Tween.get(s,null);s.to({_off:!0}),s.wait(o),s.to({_off:!1}),s.wait(1),s.to({_off:!0}),n.timeline.addTween(s),t.uncache()}return n},a.createBitmapFromContainer=function(t){return DBLAsset.calculateBoundsFromChildren(t),a.createBitmapFromDisplayObject(t,standardScale)},a.createBitmapFromContainerUsingNominalBounds=function(t){return DBLAsset.recalculateBounds(t),a.createBitmapFromDisplayObject(t,standardScale)},a.createBitmapFromDisplayObject=function(t,e,i){return i=(i=void 0===i?null:i)||t.getBounds(),t.cache(i.x,i.y,i.width,i.height,e),(i=new createjs.Bitmap(t.cacheCanvas)).scaleX=1/e,i.scaleY=1/e,i.x=t.getTransformedBounds().x,i.y=t.getTransformedBounds().y,t.uncache(),i},a.shake=function(t,e,i){function n(){e&&e()}void 0===i&&(i=null),fastForwarding?n():(i=new gsap.TimelineMax({repeat:7,yoyo:!0,onComplete:n}).to(t,.055,{x:t.x+5})).play()}})(DBLGraphicUtils=DBLGraphicUtils||{}),(()=>{function o(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1),this.target=t,this.targets=e,this._isIntermediate=i,this.useDeprecatedHighlights=n,this.useObjectHighlight=!0,this._glowFilter=null,this._isIntermediate?this.useGlowFilter(DBLHighlightConstants.GENERAL.color,o.INTERMEDIATE_GLOW.alpha,o.INTERMEDIATE_GLOW.blurX,o.INTERMEDIATE_GLOW.blurY,o.INTERMEDIATE_GLOW.strength,o.INTERMEDIATE_GLOW.quality):this.setHighlightParams(DBLHighlightConstants.GENERAL.color)}return o.prototype.cleanup=function(){this.clearHighlights()},o.prototype.setHighlightParams=function(t,e,i,n){void 0===e&&(e=10),void 0===i&&(i=3),void 0===n&&(n=8),this._color=t,this._edgeBuffer=e,this._passCount=i,this._radius=n},o.prototype.useGlowFilter=function(t,e,i,n,o,s,r,h){void 0===e&&(e=1),void 0===i&&(i=6),void 0===n&&(n=6),void 0===o&&(o=4),void 0===s&&(s=2),void 0===r&&(r=!1),void 0===h&&(h=!1),t=t&&parseInt(DBLGraphicUtils.formatHex(t),16),this._glowFilter=new createjs.GlowFilter(t,e,i,n,o,s,r,h)},o.prototype.highlight=function(t,e){void 0===e&&(e=null),this.clearHighlights(),t&&this.applyHighlights(e)},o.prototype.applyHighlights=function(t){if(this.targets&&0<this.targets.length)for(var e=0;e<this.targets.length;e++)this.applyToTarget(this.targets[e],t);else this.target&&this.applyToTarget(this.target,t)},o.prototype.clearHighlights=function(){if(this.targets&&0<this.targets.length)for(var t=0;t<this.targets.length;t++)this.clearTarget(this.targets[t]);else this.target&&this.clearTarget(this.target)},o.prototype.applyToTarget=function(t,e){null==(e=void 0===e?null:e)&&(e=this._color),!this.useObjectHighlight&&this._glowFilter?this.addGlowFilter(t,e):this.addObjectHighlight(t,e)},o.prototype.addGlowFilter=function(t,e){var i=this._glowFilter.color;null!=e&&(this._glowFilter.color=parseInt(DBLGraphicUtils.formatHex(e),16)),DBLGraphicUtils.addGlowFilter(t,this._glowFilter),this._glowFilter.color=i},o.prototype.addObjectHighlight=function(t,e){var i,n=null!=t.cacheCanvas,o=null==(o=t.getBounds())?void 0:o.clone();o&&((i=this.useDeprecatedHighlights?this._glowFilter?DBLGraphicUtils.createGlowHighlight(t,this._glowFilter):DBLGraphicUtils.createHighlight(t,e,this._edgeBuffer,this._passCount,this._radius):DBLSolidHighlightManager.createSolidHighlight(t,null!=(i=null==(i=this._glowFilter)?void 0:i.color)?i:e)).name="highlight",i.mouseEnabled=!1,t.addChildAt(i,0),n)&&(this._glowFilter?t.cache(o.x-this._glowFilter.blurX,o.y-this._glowFilter.blurY,o.width+2*this._glowFilter.blurX,o.height+2*this._glowFilter.blurY):t.cache(o.x-this._edgeBuffer,o.y-this._edgeBuffer,o.width+2*this._edgeBuffer,o.height+2*this._edgeBuffer))},o.prototype.clearTarget=function(t){for(var e=t.numChildren-1;0<=e;e--)"highlight"==t.getChildAt(e).name&&t.removeChildAt(e);DBLGraphicUtils.removeFilter(t,this._glowFilter),null!=t.cacheCanvas&&t.updateCache()},o.INTERMEDIATE_GLOW={alpha:1,blurX:5,blurY:5,strength:7,quality:2},o})()),DBLHighlightConstants=(()=>{function t(){}return t.DEFAULT_WIDTHS={width:4,border:1},t.GENERAL={color:"#FFFF00",secondary:"#B87700"},t.USER={color:"#33EDFF",secondary:"#0087FF"},t.CORRECT={color:"#00BA00",secondary:"#00BA00"},t.INCORRECT={color:"#FC6F08",secondary:"#006A00"},t.BORDER_COLOR_MAP={16776960:12089088,3403263:34815,47616:27136,16543496:10368256},t})(),DBLHighlightManager=(()=>{function a(t){void 0===t&&(t=!1),this._color=DBLHighlightConstants.GENERAL.color,this._internalColor="",this._alpha=1,this._edgeBuffer=10,this._radius=4,this._passCount=3,this._layersToHide=[],this._useObjectHighlight=!0,this._glowFilter=null,this.useDeprecatedHighlights=t,this._highlights=new DBLDictionary,this._highlightLayers=new DBLDictionary,this._savedFilters=new DBLDictionary,this._savedColors=new DBLDictionary}return a.prototype.cleanup=function(){this.clearAllHighlights()},a.prototype.reset=function(){this.clearAllHighlights(),this._highlights=new DBLDictionary,this._highlightLayers=new DBLDictionary,this._savedFilters=new DBLDictionary,this._savedColors=new DBLDictionary},Object.defineProperty(a.prototype,"highlightColor",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t),this._glowFilter&&(this._glowFilter.color=DBLGraphicUtils.colorToNumber(t))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"highlightInternalColor",{get:function(){return this._internalColor},set:function(t){t!=this._internalColor&&(this._internalColor=t||"")},enumerable:!1,configurable:!0}),a.prototype.setGlowFilter=function(t,e,i,n){this._color=t,this._alpha=e,this._radius=i,this._passCount=n,this._glowFilter=null},Object.defineProperty(a.prototype,"useObjectHighlight",{get:function(){return this._useObjectHighlight},set:function(t){this._useObjectHighlight=t},enumerable:!1,configurable:!0}),a.prototype.useGlowFilter=function(t,e,i,n,o,s,r,h){void 0===e&&(e=1),void 0===i&&(i=6),void 0===n&&(n=6),void 0===o&&(o=4),void 0===s&&(s=2),void 0===r&&(r=!1),void 0===h&&(h=!1),this._color=a.colorToString(t),this._glowFilter=new createjs.GlowFilter(DBLGraphicUtils.colorToNumber(t),e,i,n,o,s,r,h)},a.colorToString=function(t){var e;return"number"==typeof t||t instanceof Array?(e=t.toString(16),"#"+"000000".substr(0,6-e.length)+e):t},a.prototype.useEdgeHighlight=function(t,e,i,n){void 0===e&&(e=10),void 0===i&&(i=3),void 0===n&&(n=4),this._glowFilter&&(this._glowFilter=null),this._color=t,this._edgeBuffer=e,this._passCount=i,this._radius=n},Object.defineProperty(a.prototype,"glowFilter",{set:function(t){this._glowFilter=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"layersToHide",{get:function(){return this._layersToHide},set:function(t){this._layersToHide=t},enumerable:!1,configurable:!0}),a.prototype.highlightObject=function(t,e){null!=t&&(e?this.highlightOn(t):this.highlightOff(t))},a.prototype.prepareHighlight=function(t){var e;t instanceof createjs.Container&&(null!=(e=t).highlight&&(e.highlight.visible=!1),null!=e.highlightArt)&&(e.highlightArt.visible=!1),this._highlights.deleteValue(t),this._savedFilters.deleteValue(t),this._savedColors.deleteValue(t)},a.hasHighlightArt=function(t){if(null!=t){if(null!=t.highlight)return!0;if(null!=t.highlightArt)return!0}return!1},a.prototype.isHighlighted=function(t){return this._highlights.hasValue(t)},a.prototype.highlight=function(t,e,i,n){void 0===n&&(n=!1),null==(i=void 0===i?null:i)&&t.hasOwnProperty("highlight")&&null!=t.highlight&&(i=t.highlight),t.hasOwnProperty("highlightArt")&&null!=t.highlightArt?(t.highlightArt.visible=e)?this._highlightLayers.putValue(t,!0):this._highlightLayers.deleteValue(t):null!=i?(this.colorizeObject(i,this._color),(i.visible=e)?this._highlightLayers.putValue(t,i):this._highlightLayers.deleteValue(t)):e?this.highlightOn(t,n):this.highlightOff(t,n)},a.prototype.highlightOn=function(t,e){if(void 0===e&&(e=!1),t){if(this._highlights.hasValue(t)&&this.highlightOff(t),t instanceof createjs.Container&&this.showNonHighlightLayers(t,!1),""!=this._internalColor)if(t instanceof createjs.Text)this.colorizeText(t,this._internalColor);else if(t instanceof createjs.Container&&e)for(var i=0;i<t.numChildren;i++){var n=t.getChildAt(i);n instanceof createjs.Text?this.colorizeText(n,this._internalColor):this.colorizeObject(n,this._internalColor)}this._highlights.hasValue(t)||this._highlights.putValue(t,!0),this._useObjectHighlight||null==this._glowFilter?this.addObjectHighlight(t):this.addGlowHighlight(t)}},a.prototype.addGlowHighlight=function(t){this._savedFilters.hasValue(t)||this._savedFilters.putValue(t,t.filters||[]),DBLGraphicUtils.addGlowFilter(t,this._glowFilter)},a.prototype.restoreSavedFilters=function(t){this._savedFilters.hasValue(t)&&(t.filters=this._savedFilters.getValue(t),t.filters&&t.cacheCanvas?t.updateCache():t.uncache(),this._savedFilters.deleteValue(t))},a.prototype.addObjectHighlight=function(t){var e,i,n,o;t instanceof createjs.Text?(i=new createjs.Text(t.text,t.font,this._color),n=null!=(e=t.parent).cacheCanvas,o=e.getChildIndex(t),i.name="textHighlight",i.textBaseline=t.textBaseline,i.rotation=t.rotation,i.textAlign=t.textAlign,i.outline=this._radius,i.x=t.x,i.y=t.y,i.mouseEnabled=!1,e.addChildAt(i,o),n&&e.updateCache()):t instanceof createjs.Container&&(i=t.getBounds().clone(),n=null!=t.cacheCanvas,o=void 0,(o=this.useDeprecatedHighlights?this._glowFilter?DBLGraphicUtils.createGlowHighlight(t,this._glowFilter):DBLGraphicUtils.createHighlight(t,this._color,this._edgeBuffer,this._passCount,this._radius):DBLSolidHighlightManager.createSolidHighlight(t,null!=(e=null==(e=this._glowFilter)?void 0:e.color)?e:this._color)).name="dynamicHighlight",o.mouseEnabled=!1,t.addChildAt(o,0),n)&&(this._glowFilter?t.cache(i.x-this._glowFilter.blurX,i.y-this._glowFilter.blurY,i.width+2*this._glowFilter.blurX,i.height+2*this._glowFilter.blurY):t.cache(i.x-this._edgeBuffer,i.y-this._edgeBuffer,i.width+2*this._edgeBuffer,i.height+2*this._edgeBuffer))},a.prototype.highlightOff=function(t,e){if(void 0===e&&(e=!1),t){if(t instanceof createjs.Container&&this.showNonHighlightLayers(t,!0),t instanceof createjs.Text)this._savedColors.hasValue(t)&&(this.colorizeText(t,this._savedColors.getValue(t)),this._savedColors.deleteValue(t));else if(t instanceof createjs.Container&&e)for(var i=0;i<t.numChildren;i++){var n=t.getChildAt(i);n instanceof createjs.Text?this._savedColors.hasValue(n)&&(this.colorizeText(n,this._savedColors.getValue(n)),this._savedColors.deleteValue(n)):this.restoreSavedFilters(n)}this._highlights.hasValue(t)&&this._highlights.deleteValue(t),this.removeObjectHighlight(t),this.restoreSavedFilters(t)}},a.prototype.removeObjectHighlight=function(t){if(t instanceof createjs.Text){for(var e=t.parent,i=e.numChildren-1;0<=i;i--)"textHighlight"==e.getChildAt(i).name&&e.removeChildAt(i);null!=e.cacheCanvas&&e.updateCache()}else if(t instanceof createjs.Container){for(i=t.numChildren-1;0<=i;i--)"dynamicHighlight"==t.getChildAt(i).name&&t.removeChildAt(i);null!=t.cacheCanvas&&t.updateCache()}},a.prototype.showNonHighlightLayers=function(t,e){for(var i=0;i<this._layersToHide.length;i++)null!=t[this._layersToHide[i]]&&(t[this._layersToHide[i]].visible=e)},a.prototype.colorizeText=function(t,e){this._savedColors.hasValue(t)||this._savedColors.putValue(t,e),t.color=e},a.prototype.colorizeObject=function(t,e){var i;null!=t.getBounds()&&(i=[],this._savedFilters.hasValue(t)||(this._savedFilters.putValue(t,t.filters||[]),t.filters&&(i=t.filters.concat())),e=DBLGraphicUtils.hexToRgb(DBLGraphicUtils.formatHex(e)),e=new createjs.ColorFilter(0,0,0,1,e[0],e[1],e[2],0),i.push(e),t.filters=i,t.cacheCanvas?t.updateCache():t.cache(t.getBounds().x,t.getBounds().y,t.getBounds().width,t.getBounds().height))},a.prototype.clearAllHighlights=function(){var t,e;for(t in this._highlights.values)this._highlights.values.hasOwnProperty(t)&&this.highlightOff(t,!0);for(t in this._highlightLayers.values)this._highlightLayers.values.hasOwnProperty(t)&&(e=this._highlightLayers[t]instanceof createjs.DisplayObject?this._highlightLayers[t]:null,this.highlight(t,!1,e,!0))},a})(),DBLRectangle=(o=>{function t(t,e,i,n){return o.call(this,t=void 0===t?0:t,e=void 0===e?0:e,i=void 0===i?0:i,n=void 0===n?0:n)||this}return __extends(t,o),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),t})(createjs.Rectangle),DBLScale9Sprite=(s=>{function t(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var o=s.call(this)||this;if(o._scale9=new createjs.Container,o._scale9=new createjs.Container,o._hitArea=new createjs.Shape,o.addChild(o._scale9),o._asset=t,o._assetBounds=o._asset.getBounds().clone(),e&&(o._scale9Rect=e.clone()),o._scale=1,o._width=i||o._assetBounds.width,o._height=n||o._assetBounds.height,o._filters=[],o._width<o._scale9Rect.width)throw new Error("DBLScale9Container width cannot be less than scale9Rect width");if(o._height<o._scale9Rect.height)throw new Error("DBLScale9Container height cannot be less than scale9Rect height");if(o._scale9Rect.width>o._asset.getBounds().width)throw new Error("scale9Rect width cannot exceed asset width");if(o._scale9Rect.height>o._asset.getBounds().height)throw new Error("scale9Rect height cannot exceed asset height");return o._scale9Rect.x-=o.tx,o._scale9Rect.y-=o.ty,o.setSize(o._width,o._height,o._scale),o}return __extends(t,s),Object.defineProperty(t.prototype,"tx",{get:function(){return this._assetBounds.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this._assetBounds.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),t.prototype.setSize=function(t,e,i){Math.floor(t)==this._prevWidth&&Math.floor(e)==this._prevHeight&&i==this._prevScale||(t<=0||e<=0||i<=0?DBLLog.log("The width, height, and scale of DBLScale9Container must all be greater than 0.",DBLLog.ERROR):(this._prevScale=this._scale=i,this._prevWidth=this._width=Math.floor(t),this._prevHeight=this._height=Math.floor(e),this.updateAssetCache(),this.updateScale9()))},t.prototype.addFilter=function(t){this._filters.push(t),this.updateFilters()},t.prototype.setFilter=function(t){this._filters=[t],this.updateFilters()},t.prototype.redrawAsset=function(){this.updateAssetCache(),this.updateScale9()},t.prototype.clearFilters=function(){this._filters=[],this.updateFilters()},t.prototype.updateFilters=function(){this._asset.filters=this._filters,this.updateAssetCache(),this.updateScale9()},t.prototype.updateAssetCache=function(){this._asset.cache(this._assetBounds.x,this._assetBounds.y,this._assetBounds.width,this._assetBounds.height,this._scale)},t.prototype.updateScale9=function(){this._scale9.cache(0,0,this._width,this._height,this._scale),this.drawScale9(this._scale9.cacheCanvas,this._asset.cacheCanvas),this._hitArea.graphics.clear(),this._hitArea.graphics.beginFill("#000"),this._hitArea.graphics.drawRect(0,0,this._width,this._height),this._hitArea.graphics.endFill(),this.hitArea=this._hitArea,this.setBounds(0,0,this._width,this._height)},t.prototype.drawScale9=function(t,e){var i,n,o,s,r,h,a,l,c,u,d,p,g,_,f,y,b,v,m,B,w,E=t.getContext("2d"),S=new DBLRectangle(Math.floor(this._scale9Rect.x*this._scale),Math.floor(this._scale9Rect.y*this._scale),Math.floor(this._scale9Rect.width*this._scale),Math.floor(this._scale9Rect.height*this._scale));0==S.width||0==S.height?DBLLog.log("The width, height, and scale of DBLScale9Container must all be greater than 0.",DBLLog.ERROR):(n=e.width-S.right,s=e.height-S.bottom,r=new DBLRectangle(0,0,i=S.left,o=S.top),h=new DBLRectangle(S.right,0,n,o),a=new DBLRectangle(0,S.bottom,i,s),l=new DBLRectangle(S.right,S.bottom,n,s),c=new DBLRectangle,u=new DBLRectangle,d=new DBLRectangle,p=new DBLRectangle,c.copy(r),u.copy(h),d.copy(a),p.copy(l),g=i,_=n,f=o,y=s,(b=new DBLRectangle).x=S.x,b.y=S.y,b.width=t.width-(g+_),b.height=t.height-(f+y),0<b.width?(u.x=b.right,p.x=b.right):(u.x=c.right,p.x=d.right),0<b.height?(d.y=b.bottom,p.y=b.bottom):(d.y=c.bottom,p.y=u.bottom),v=0<b.width,m=0<b.height,v||0<(w=Math.abs(b.width))&&(B=Math.floor(w/2),r.width-=B,a.width-=B,i-=B,c.width-=B,d.width-=B,g-=B,h.x+=w-=B,l.x+=w,h.width-=w,l.width-=w,n-=w,u.x-=B,p.x-=B,u.width-=w,p.width-=w,_-=w),m||0<(B=Math.abs(b.height))&&(w=Math.floor(B/2),r.height-=w,h.height-=w,o-=w,c.height-=w,u.height-=w,f-=w,a.y+=B-=w,l.y+=B,a.height-=B,l.height-=B,s-=B,d.y-=w,p.y-=w,d.height-=B,p.height-=B,y-=B),E.clearRect(0,0,t.width,t.height),0<g&&0<f&&E.drawImage(e,r.x,r.y,r.width,r.height,c.x,c.y,c.width,c.height),v&&0<f&&E.drawImage(e,S.left,0,S.width,o,c.right,0,u.left-c.right,f),0<_&&0<f&&E.drawImage(e,h.x,h.y,h.width,h.height,u.x,u.y,u.width,u.height),m&&0<g&&E.drawImage(e,0,S.top,i,S.height,0,c.bottom,g,d.top-c.bottom),m&&v&&E.drawImage(e,S.x,S.y,S.width,S.height,b.x,b.y,b.width,b.height),m&&0<_&&E.drawImage(e,S.right,S.top,n,S.height,u.left,u.bottom,_,p.top-u.bottom),0<g&&0<y&&E.drawImage(e,a.x,a.y,a.width,a.height,d.x,d.y,d.width,d.height),v&&0<y&&E.drawImage(e,S.left,S.bottom,S.width,s,d.right,d.top,p.left-d.right,y),0<_&&0<y&&E.drawImage(e,l.x,l.y,l.width,l.height,p.x,p.y,p.width,p.height))},t})(createjs.Container),DBLScale9Cache=(()=>{function s(){this._cache={}}return s.prototype.getKey=function(t,e,i,n){return t.name+"_"+e+"_"+Math.round(i||t.getBounds().width)+"_"+Math.round(n||t.getBounds().height)},s.createScale9Container=function(t,e,i,n){return e&&t.gotoAndStop(e),DBLAsset.setNameAndBounds(t,t.name,t),new DBLScale9Container(t,null,i,n)},s.prototype.clearCache=function(){this._cache={}},s.prototype.cacheBitmap=function(t,e,i,n){var o=this.getKey(t,e||t.currentLabel,i,n);return this._cache[o]?this._cache[o].clone():this._cache[o]=s.createScale9Container(t,e,i,n).asBitmap()},s.prototype.scale9Bitmap=function(t,e,i,n){t=this.cacheBitmap(t,e,i,n),e=new createjs.Container;return e.addChild(t),e},s})(),DBLScale9Container=(s=>{function r(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=s.call(this)||this;if(o._scale9=new createjs.Container,o._hitArea=new createjs.Shape,o.addChild(o._scale9),o._asset=t,o.updateAssetBounds(),e)o._scale9Rect=e.clone();else if(o._scale9Rect=r.getNineSliceRect(o._asset),!o._scale9Rect)throw new Error("'scale9Rect' must be defined for DBLScale9Container, if you created a 'nineslice' art asset, make sure it's named correctly, e.g. 'nineslice_3_3_115_25'.");if(o._scale=1,o._width=i||o._assetBounds.width,o._height=n||o._assetBounds.height,o._filters=[],o._width<o._scale9Rect.width)throw new Error("DBLScale9Container width cannot be less than scale9Rect width");if(o._height<o._scale9Rect.height)throw new Error("DBLScale9Container height cannot be less than scale9Rect height");if(o._scale9Rect.width>o._asset.getBounds().width)throw new Error("scale9Rect width cannot exceed asset width");if(o._scale9Rect.height>o._asset.getBounds().height)throw new Error("scale9Rect height cannot exceed asset height");return o._scale9Rect.x-=o.tx,o._scale9Rect.y-=o.ty,o.setSize(o._width,o._height,o._scale),o}return __extends(r,s),r.prototype.asBitmap=function(){var t=new createjs.Bitmap(this._scale9.cacheCanvas);return t.scaleX=1/this._scale,t.scaleY=1/this._scale,t.x=this._scale9.getTransformedBounds().x,t.y=this._scale9.getTransformedBounds().y,t},r.prototype.updateAssetBounds=function(){this._assetBounds=this._asset.getBounds().clone()},r.getNineSliceRect=function(t){for(var e in t)if("nineslice"==e.substr(0,9)){var i=e.split("_"),n=new createjs.Rectangle(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),parseInt(i[4]));t[e].visible=!1;break}return n},r.getNineSliceMargins=function(t){var e=r.getNineSliceRect(t),t=t.getBounds();return[e.x,e.y,t.width-e.width-e.x,t.height-e.height-e.y]},r.prototype.getNineSliceMargins=function(){return r.getNineSliceMargins(this._asset)},Object.defineProperty(r.prototype,"tx",{get:function(){return this._assetBounds.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ty",{get:function(){return this._assetBounds.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.setSize(this._width,this._height,this._scale)},enumerable:!1,configurable:!0}),r.prototype.setSize=function(t,e,i){Math.floor(t)==this._prevWidth&&Math.floor(e)==this._prevHeight&&i==this._prevScale||(t<=0||e<=0||i<=0?DBLLog.log("The width, height, and scale of DBLScale9Container must all be greater than 0.",DBLLog.ERROR):(this._prevScale=this._scale=i,this._prevWidth=this._width=Math.floor(t),this._prevHeight=this._height=Math.floor(e),this.updateAssetCache(),this.updateScale9()))},r.prototype.fitAround=function(t){var e=this.getNineSliceMargins(),i=e[0],n=e[1],o=e[2],e=e[3];this.x=t.x-i,this.y=t.y-n,this.setSize(i+t.width+o,n+t.height+e,this._scale)},r.prototype.addFilter=function(t){this._filters.push(t),this.updateFilters()},r.prototype.setFilter=function(t){this._filters=[t],this.updateFilters()},r.prototype.redrawAsset=function(){this.updateAssetCache(),this.updateScale9()},r.prototype.clearFilters=function(){this._filters=[],this.updateFilters()},r.prototype.updateFilters=function(){this._asset.filters=this._filters,this.updateAssetCache(),this.updateScale9()},r.prototype.updateAssetCache=function(){this._asset.cache(this._assetBounds.x,this._assetBounds.y,this._assetBounds.width,this._assetBounds.height,this._scale)},r.prototype.updateScale9=function(){this._scale9.cache(0,0,this._width,this._height,this._scale),this.drawScale9(this._scale9.cacheCanvas,this._asset.cacheCanvas),this._hitArea.graphics.clear(),this._hitArea.graphics.beginFill("#000"),this._hitArea.graphics.drawRect(0,0,this._width,this._height),this._hitArea.graphics.endFill(),this.hitArea=this._hitArea,this.setBounds(0,0,this._width,this._height)},r.prototype.drawScale9=function(t,e){var i,n,o,s,r,h,a,l,c,u,d,p,g,_,f,y,b,v,m,B,w,E=t.getContext("2d"),S=new DBLRectangle(Math.floor(this._scale9Rect.x*this._scale),Math.floor(this._scale9Rect.y*this._scale),Math.floor(this._scale9Rect.width*this._scale),Math.floor(this._scale9Rect.height*this._scale));0==S.width||0==S.height?DBLLog.log("The width, height, and scale of DBLScale9Container must all be greater than 0.",DBLLog.ERROR):(n=e.width-S.right,s=e.height-S.bottom,r=new DBLRectangle(0,0,i=S.left,o=S.top),h=new DBLRectangle(S.right,0,n,o),a=new DBLRectangle(0,S.bottom,i,s),l=new DBLRectangle(S.right,S.bottom,n,s),c=new DBLRectangle,u=new DBLRectangle,d=new DBLRectangle,p=new DBLRectangle,c.copy(r),u.copy(h),d.copy(a),p.copy(l),g=i,_=n,f=o,y=s,(b=new DBLRectangle).x=S.x,b.y=S.y,b.width=t.width-(g+_),b.height=t.height-(f+y),0<b.width?(u.x=b.right,p.x=b.right):(u.x=c.right,p.x=d.right),0<b.height?(d.y=b.bottom,p.y=b.bottom):(d.y=c.bottom,p.y=u.bottom),v=0<b.width,m=0<b.height,v||0<(w=Math.abs(b.width))&&(B=Math.floor(w/2),r.width-=B,a.width-=B,i-=B,c.width-=B,d.width-=B,g-=B,h.x+=w-=B,l.x+=w,h.width-=w,l.width-=w,n-=w,u.x-=B,p.x-=B,u.width-=w,p.width-=w,_-=w),m||0<(B=Math.abs(b.height))&&(w=Math.floor(B/2),r.height-=w,h.height-=w,o-=w,c.height-=w,u.height-=w,f-=w,a.y+=B-=w,l.y+=B,a.height-=B,l.height-=B,s-=B,d.y-=w,p.y-=w,d.height-=B,p.height-=B,y-=B),E.clearRect(0,0,t.width,t.height),0<g&&0<f&&E.drawImage(e,r.x,r.y,r.width,r.height,c.x,c.y,c.width,c.height),v&&0<f&&E.drawImage(e,S.left,0,S.width,o,c.right,0,u.left-c.right,f),0<_&&0<f&&E.drawImage(e,h.x,h.y,h.width,h.height,u.x,u.y,u.width,u.height),m&&0<g&&E.drawImage(e,0,S.top,i,S.height,0,c.bottom,g,d.top-c.bottom),m&&v&&E.drawImage(e,S.x,S.y,S.width,S.height,b.x,b.y,b.width,b.height),m&&0<_&&E.drawImage(e,S.right,S.top,n,S.height,u.left,u.bottom,_,p.top-u.bottom),0<g&&0<y&&E.drawImage(e,a.x,a.y,a.width,a.height,d.x,d.y,d.width,d.height),v&&0<y&&E.drawImage(e,S.left,S.bottom,S.width,s,d.right,d.top,p.left-d.right,y),0<_&&0<y&&E.drawImage(e,l.x,l.y,l.width,l.height,p.x,p.y,p.width,p.height))},r})(createjs.Container),DBLScale9MovieClip=(o=>{function t(t,e,i,n){e=o.call(this,t,e=void 0===e?null:e,i=void 0===i?null:i,n=void 0===n?null:n)||this;return e._movieClipAsset=t,e}return __extends(t,o),t.prototype.gotoAndStop=function(t){this._movieClipAsset.gotoAndStop(t),this.redrawAsset(),manualInvalidate(this)},t})(DBLScale9Container),DBLScale9Button=(a=>{function t(t,e,i,n,o,s,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===r&&(r=!1);var h=a.call(this)||this;return h._instances=[],h._isSelected=!1,h.stickyMode=!1,h._scale9Rect=t,h._autoCenter=r,h._upInstance=h.createAndAddInstance(e),h._scale=1,h._width=h._upInstance.width,h._height=h._upInstance.height,i&&(h._downInstance=h.createAndAddInstance(i)),n&&(h._overInstance=h.createAndAddInstance(n)),o&&(h._disabledInstance=h.createAndAddInstance(o)),s&&(h._selectedInstance=h.createAndAddInstance(s)),a.prototype.init.call(h),h}return __extends(t,a),t.prototype.handleUpState=function(){this._selectedInstance&&this._isSelected&&this.stickyMode?this.showInstance(this._selectedInstance):(this._isSelected=!1,this.showInstance(this._upInstance))},t.prototype.handleDownState=function(){this._downInstance&&this.showInstance(this._downInstance),this._isSelected=!this._isSelected},t.prototype.handleOverState=function(){this._selectedInstance&&this._isSelected?this.showInstance(this._selectedInstance):this._overInstance&&this.showInstance(this._overInstance)},t.prototype.handleEnabledStateChange=function(){this._enabled?this.handleUpState():this.handleDisabledState(),a.prototype.handleEnabledStateChange.call(this)},t.prototype.handleDisabledState=function(){this._disabledInstance?this.showInstance(this._disabledInstance):this.handleUpState()},t.prototype.showInstance=function(t){for(var e=0,i=this._instances;e<i.length;e++){var n=i[e];n!=t&&(n.visible=!1)}t.visible=!0},t.prototype.createAndAddInstance=function(t){t=DBLUtils.isFunction(t)?DBLAsset.create(t):t,t=new DBLScale9Container(t,this._scale9Rect);return this._instances.push(t),this.addChild(t),this.positionInstance(t),t},t.prototype.positionInstance=function(t){this._autoCenter?(t.x=-this._width/2,t.y=-this._height/2):(t.x=0,t.y=0)},t.prototype.updateOnAutoCenterChange=function(){for(var t=0,e=this._instances;t<e.length;t++){var i=e[t];this.positionInstance(i)}},t.prototype.updateSizes=function(){for(var t=0,e=this._instances;t<e.length;t++)e[t].setSize(this._width,this._height,this._scale)},Object.defineProperty(t.prototype,"autoCenter",{get:function(){return this._autoCenter},set:function(t){this._autoCenter!=t&&(this._autoCenter=t,this.updateOnAutoCenterChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.updateSizes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateSizes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateSizes()},enumerable:!1,configurable:!0}),t.prototype.setSize=function(t,e,i){this._width=t,this._height=e,this._scale=i,this.updateSizes()},t.prototype.redrawAssets=function(){for(var t=0,e=this._instances;t<e.length;t++)e[t].redrawAsset()},Object.defineProperty(t.prototype,"selected",{get:function(){return this._isSelected},set:function(t){this._isSelected=t,this.handleEnabledStateChange()},enumerable:!1,configurable:!0}),t})(DBLBaseButton),DBLScale9TimelineButton=(s=>{function e(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!0);var o=s.call(this)||this;return o._centerAlign=!0,o._width=0,o._height=0,o._cache=i,o._asset=t,o._centerAlign=n,e&&(o._currentState=e),s.prototype.init.call(o),o}return __extends(e,s),e.prototype.cacheAllFrames=function(){if(this._cache)for(var t=0,e=this._asset.labels;t<e.length;t++){var i=e[t];this._cache.cacheBitmap(this._asset,i.toString(),this._width,this._height)}},Object.defineProperty(e.prototype,"asset",{get:function(){return this._asset},set:function(t){this._asset=t,this.updateState()},enumerable:!1,configurable:!0}),e.prototype.setState=function(t){this._state!==t&&(this._state=t,this.updateState())},e.prototype.updateState=function(){var t=this._currentState||this._state;this._activeState!=t&&(this._activeState=t,this.updateArt(),this.dispatchEvent(new createjs.Event(e.STATE_CHANGED_EVENT,!0,!0)))},e.prototype.updateArt=function(){this._instance&&this.removeChild(this._instance),this._instance=this._cache?this._cache.scale9Bitmap(this._asset,this.currentFrame,this._width,this._height):DBLScale9Cache.createScale9Container(this._asset,this.currentFrame,this._width,this._height),this.addChildAt(this._instance,0),this.centerPosition(),this.hitArea=DBLGraphicUtils.drawFilledRectangle(this.width,this.height,"#FFF"),this.hitArea.x=this._instance.x,this.hitArea.y=this._instance.y},Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=this._activeState;return t.charAt(0).toUpperCase()+t.substr(1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentState",{get:function(){return this._currentState||this._state},set:function(t){this._currentState=t,this.updateState()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width||this.getBounds().width},set:function(t){this.width!=t&&(this._width=t,this.updateArt())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height||this.getBounds().height},set:function(t){this.height!=t&&(this._height=t,this.updateArt())},enumerable:!1,configurable:!0}),e.prototype.centerPosition=function(){this._centerAlign&&(this._instance.x=-this._instance.getBounds().width/2,this._instance.y=-this._instance.getBounds().height/2)},e.STATE_CHANGED_EVENT="state_changed",e})(DBLBaseButton),DBLSoundPlayer=(()=>{function t(){}return t.prototype.playSound=function(t){t=Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:t,DBLAsset.playSound(t)},t})(),DBLTextInputField=(l=>{function t(t,e,i,n,o,s,r,h){void 0===h&&(h=-1);var a=l.call(this)||this;return a._normalBackgroundAsset="SCATextEntryCellSelected",a._selectedBackgroundAsset="SCATextEntryCellSelected",a._correctBackgroundAsset="SCATextEntryCorrect",a._incorrectBackgroundAsset="SCATextEntryIncorrect",a._disabledBackgroundAsset="SCATextEntryCelDisabled",a._inputOffsetX=2,a._inputOffsetY=6,a._initialized=!1,a._enabled=!0,a._showCorrect=!1,a._showIncorrect=!1,a._generateClickEvents=!1,a._bundle=r,a._width=t,a._height=e,a._font=i,a._fontSize=n,a._align=o,a._color=s,a._maxChars=h,a._backgroundContainer=new createjs.Container,a.addChild(a._backgroundContainer),a._normalBackground=a.createBackground(a._normalBackgroundAsset),a._selectedBackground=a.createBackground(a._selectedBackgroundAsset),a._correctBackground=a.createBackground(a._correctBackgroundAsset),a._incorrectBackground=a.createBackground(a._incorrectBackgroundAsset),a._disabledBackground=a.createBackground(a._disabledBackgroundAsset),a._hitArea=new createjs.Shape,a._backgroundContainer.hitArea=a._hitArea,a.initialize(),a._backgroundContainer.addEventListener("click",a.handleMouseClick.bind(a)),DBLCapabilities.hasMouse()&&(a.addEventListener("mouseover",a.handleMouseOver.bind(a)),a.addEventListener("mouseout",a.handleMouseOut.bind(a))),a}return __extends(t,l),t.prototype.initialize=function(){!this._initialized&&0<this._width&&0<this._height&&(this._input=new DBLTextInputA11y(this._width-4,this._height,this._font,this._fontSize,this._align,this._color,this._maxChars),this._input.addEventListener(DBLTextInputEvent.FOCUS_IN,this.handleInputFocusIn.bind(this)),this._input.addEventListener(DBLTextInputEvent.FOCUS_OUT,this.handleInputFocusOut.bind(this)),this.setInputOffset(this._inputOffsetX,this._inputOffsetY),this.addChild(this._input),this._initialized=!0),this.updateBackground(),this.drawHitArea()},t.prototype.cleanup=function(){this._backgroundContainer.removeAllEventListeners("click"),this.removeAllEventListeners("mouseover"),this.removeAllEventListeners("mouseout"),this._input&&(this._input.removeAllEventListeners(DBLTextInputEvent.FOCUS_IN),this._input.removeAllEventListeners(DBLTextInputEvent.FOCUS_OUT),this._input.cleanup())},Object.defineProperty(t.prototype,"reserveOperatorSpace",{get:function(){return!!this._input&&this._input.reserveOperatorSpace},set:function(t){this._input&&(this._input.reserveOperatorSpace=t)},enumerable:!1,configurable:!0}),t.prototype.setReplaceValues=function(t){this._input&&this._input.setReplaceValues(t)},t.prototype.getReplaceValues=function(){return this._input?this._input.getReplaceValues():[]},t.prototype.tick=function(){this._input&&this._input.tick()},Object.defineProperty(t.prototype,"normalBackgroundAsset",{set:function(t){this._normalBackgroundAsset=t,this._normalBackground=this.createBackground(this._normalBackgroundAsset),this.initialize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedBackgroundAsset",{set:function(t){this._selectedBackgroundAsset=t,this._selectedBackground=this.createBackground(this._selectedBackgroundAsset),this.initialize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"correctBackgroundAsset",{set:function(t){this._correctBackgroundAsset=t,this._correctBackground=this.createBackground(this._correctBackgroundAsset),this.initialize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incorrectBackgroundAsset",{set:function(t){this._incorrectBackgroundAsset=t,this._incorrectBackground=this.createBackground(this._incorrectBackgroundAsset),this.initialize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabledBackgroundAsset",{set:function(t){this._disabledBackgroundAsset=t,this._disabledBackground=this.createBackground(this._disabledBackgroundAsset),this.initialize()},enumerable:!1,configurable:!0}),t.prototype.setInputOffset=function(t,e){this._inputOffsetX=t,this._inputOffsetY=e,this._input&&(this._input.x=t,this._input.y=e)},Object.defineProperty(t.prototype,"automationComponent",{set:function(t){this._input&&(this._input.automationComponent=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"automationLocation",{set:function(t){this._input&&(this._input.automationLocation=t)},enumerable:!1,configurable:!0}),t.prototype.handlerObject=function(){return this._input},Object.defineProperty(t.prototype,"defocusOnEnter",{get:function(){return this._input.defocusOnEnter},set:function(t){this._input.defocusOnEnter=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focused",{get:function(){return this._input&&this._input.focused},set:function(t){DBLLog.log("Do not set the value of DBLTextInputField.focused directly, use DBLTextInputField.focus() instead.",DBLLog.ERROR)},enumerable:!1,configurable:!0}),t.prototype.focus=function(t){this._input&&this._input.focus(t)},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._input&&this._enabled},set:function(t){this._enabled=t,this._input&&(this._input.enabled=t),this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCorrect",{get:function(){return this._showCorrect},set:function(t){this._showCorrect=t,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showIncorrect",{get:function(){return this._showIncorrect},set:function(t){this._showIncorrect=t,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._input?this._input.text:""},set:function(t){this._input&&(this._input.text=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxChars",{get:function(){return this._maxChars},set:function(t){this._maxChars=t,this._input&&(this._input.maxChars=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restrict",{set:function(t){this._input&&(this._input.restrict=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restrictKeys",{set:function(t){this._input&&(this._input.restrictKeys=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restrictFunction",{set:function(t){this._input&&(this._input.restrictFunction=t)},enumerable:!1,configurable:!0}),t.prototype.useNumericRestrictFunction=function(){this._input&&this._input.useNumericRestrictFunction()},Object.defineProperty(t.prototype,"autoSelect",{get:function(){return this._input&&this._input.autoSelect},set:function(t){this._input&&(this._input.autoSelect=t)},enumerable:!1,configurable:!0}),t.prototype.select=function(){this._input&&this._input.select()},t.prototype.setSelection=function(t,e){this._input&&this._input.setSelection(t,e)},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._input?this._input.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._input?this._input.selectionEnd:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generateClickEvents",{set:function(t){this._generateClickEvents=t},enumerable:!1,configurable:!0}),t.prototype.clearText=function(){this._input&&this._input.clearText()},t.prototype.setCurrentValue=function(t){this._input&&this._input.setCurrentValue(t)},t.prototype.handleMouseClick=function(t){this._input&&this._input.focus(!0),this._generateClickEvents&&this.dispatchEvent(new DBLTextInputEvent(DBLTextInputEvent.CLICK))},t.prototype.handleMouseOver=function(t){this._enabled&&DBLCursor.setCursor(DBLCursor.TEXT)},t.prototype.handleMouseOut=function(t){DBLCursor.setCursor(DBLCursor.AUTO)},t.prototype.handleInputFocusIn=function(t){"?"==this.text&&(this.text=""),this.handleFocus()},t.prototype.handleInputFocusOut=function(t){this.handleFocus()},t.prototype.handleFocus=function(){this.updateBackground()},t.prototype.updateBackground=function(){!this._enabled&&this._disabledBackground?this.showBackground(this._disabledBackground):this._showCorrect&&this._correctBackground?this.showBackground(this._correctBackground):this.focused&&this._selectedBackground?this.showBackground(this._selectedBackground):this._showIncorrect&&this._incorrectBackground?this.showBackground(this._incorrectBackground):this.showBackground(this._normalBackground)},t.prototype.createBackground=function(t){if(DBLAsset.resolveArtFromBundle(t,this._bundle))return(t=DBLAsset.create(t,this._bundle))&&(this._width<0&&(this._width=t.getBounds().width),this._height<0&&(this._height=t.getBounds().height),this.setBackgroundSize(t,this._width,this._height)),t},t.prototype.setBackgroundSize=function(t,e,i){t&&(t.scaleX=e/t.getBounds().width,t.scaleY=i/t.getBounds().height)},t.prototype.showBackground=function(t){t&&(this._backgroundContainer.removeAllChildren(),this._backgroundContainer.addChild(t))},t.prototype.drawHitArea=function(){this._hitArea&&0<this._width&&0<this._height&&(this._hitArea.graphics.clear(),this._hitArea.graphics.beginFill("#000"),this._hitArea.graphics.drawRect(0,0,this._width,this._height),this._hitArea.graphics.endFill())},t.prototype.getAccessibilityData=function(){var t=this._input.getAccessibilityData();return t.visible=t.visible&&this.visible,t.enabled=this._enabled,t.focus||(t.focus={}),t.focus.boundsDisplayObject=this,t},t})(comp.InteractiveObject),DBLTextArea=(l=>{function i(t,e,i,n,o,s,r,h){void 0===r&&(r=!0),void 0===h&&(h=-1);var a=l.call(this)||this;return a._enabled=!0,a._width=t,a._height=e,a._font=i,a._fontSize=n,a._fontWeight=o,a._color=s,a._multiLine=r,a._maxChars=h,a._currentValue="",r?(a._htmlTextArea=a.createInputFieldInDOM(!0),a._htmlElement=a._htmlTextArea):(a._htmlInput=a.createInputFieldInDOM(!1),a._htmlElement=a._htmlInput),a._domElement=new createjs.DOMElement(a._htmlElement),a.addChild(a._domElement),a.styleInputField(),a.updateMaxChars(),a.updateBounds(),a}return __extends(i,l),i.prototype.cleanup=function(){if(this._htmlTextArea){try{document.getElementById("htmlcontent").removeChild(this._htmlTextArea)}catch(t){}this._htmlTextArea=null}if(this._htmlInput){try{document.getElementById("htmlcontent").removeChild(this._htmlInput)}catch(t){}this._htmlInput=null}this.removeAllChildren(),this._domElement=null},i.prototype.tick=function(){this._domElement._tick()},i.prototype.createInputFieldInDOM=function(t){var e;return t?e=document.createElement("textarea"):(e=document.createElement("input")).type="text",e.id="textArea"+i.getNextId(),document.getElementById("htmlcontent").appendChild(e),e.onclick=this.handleInputClick.bind(this),e.onchange=this.handleInputChange.bind(this),e.onkeyup=this.handleKeyUp.bind(this),e.oncut=this.handleCutCopyPaste.bind(this),e.oncopy=this.handleCutCopyPaste.bind(this),e.onpaste=this.handleCutCopyPaste.bind(this),e.style.pointerEvents="auto",e},i.prototype.styleInputField=function(){this._htmlElement.style.width=this._width+"px",this._htmlElement.style.height=this._height+"px",this._htmlElement.style.resize="none",this._htmlElement.style.position="absolute",this._htmlElement.style.top="0px",this._htmlElement.style.left="0px",this._htmlElement.style.padding="0px",this._htmlElement.style.border="none",this._htmlElement.style.outline="none",this._htmlElement.style.font=DBLFont.getFontString(this._font,this._fontSize,this._fontWeight),this._htmlElement.style.color=this._color,this._htmlElement.style.backgroundColor="rgba(0,0,0,0)",this._htmlElement.style["line-height"]=DBLFont.getFontEmString(this._font)},i.prototype.updateMaxChars=function(){this._multiLine?this._htmlTextArea.maxLength=0<this._maxChars?this._maxChars:524288:this._htmlInput.maxLength=0<this._maxChars?this._maxChars:524288},i.prototype.updateBounds=function(){this.setBounds(0,0,this._width,this._height)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this._multiLine?this._htmlTextArea.disabled=!t:this._htmlInput.disabled=!t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._currentValue},set:function(t){this._currentValue=t,this._multiLine?this._htmlTextArea.value=t:this._htmlInput.value=t,this.dispatchEvent("change")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.styleInputField(),this.updateBounds()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.styleInputField(),this.updateBounds()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.styleInputField(),this.updateBounds()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.styleInputField()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxChars",{get:function(){return this._maxChars},set:function(t){this._maxChars=t,this.updateMaxChars()},enumerable:!1,configurable:!0}),i.prototype.handleInputClick=function(t){t.target.focus(),this.hasEventListener("click")&&this.dispatchEvent("click"),this.hasEventListener("mousedown")&&this.dispatchEvent("mousedown")},i.prototype.handleInputChange=function(t){this.setCurrentValue(),this.dispatchEvent("change")},i.prototype.handleKeyUp=function(t){this.setCurrentValue(),this.dispatchEvent("change")},i.prototype.handleCutCopyPaste=function(t){t.preventDefault()},i.prototype.setCurrentValue=function(){this._multiLine?this._currentValue=this._htmlTextArea.value:this._currentValue=this._htmlInput.value},i.prototype.blur=function(){this.focus(!1)},i.prototype.focus=function(t,e){void 0===e&&(e=!1),t?this._multiLine?(this._htmlTextArea.focus(),e&&this._htmlTextArea.select()):(this._htmlInput.focus(),e&&this._htmlInput.select()):(this._multiLine?this._htmlTextArea:this._htmlInput).blur()},i.prototype.show=function(){this._htmlElement.style.display="block"},i.prototype.hide=function(){this._htmlElement.style.display="none"},i.getNextId=function(){return this._id++},i._id=0,i})(createjs.Container),DBLTextTimelineButton=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"buttonText",{set:function(t){this._buttonText=t,this.updateButtonText()},enumerable:!1,configurable:!0}),e.prototype.handleUpState=function(){t.prototype.handleUpState.call(this),this.updateButtonText()},e.prototype.handleDownState=function(){t.prototype.handleDownState.call(this),this.updateButtonText()},e.prototype.handleOverState=function(){t.prototype.handleOverState.call(this),this.updateButtonText()},e.prototype.handleEnabledStateChange=function(){t.prototype.handleEnabledStateChange.call(this),this.updateButtonText()},e.prototype.updateButtonText=function(){this._clip.text&&this._buttonText&&(this._clip.text=this._buttonText)},e})(DBLTimelineButton),DBLTextToggleTimelineButton=(i=>{function t(t){var e=i.call(this,t.asset,t.clickSound||null)||this;return e._flourishAnimating=!1,e._disableSelected=!0,e._highlightClip=t.highlightAsset,e._highlightClip&&(e._highlightClip.visible=!1,e.addChild(e._highlightClip)),e._textSize=t.textSize,e._font=t.font,e._fontWeight=t.fontWeight,e._isHighlighted=!1,e.curClip=null,e}return __extends(t,i),Object.defineProperty(t.prototype,"buttonText",{get:function(){return this._buttonText},set:function(t){this._buttonText=t,this.updateButtonText()},enumerable:!1,configurable:!0}),t.prototype.handleDownState=function(){i.prototype.handleDownState.call(this)},t.prototype.handleOverState=function(){this.selected||this.gotoFrame(DBLTimelineButton.FRAME_OVER)},t.prototype.handleUpState=function(){this.gotoFrame(this.selected?DBLToggleTimelineButton.FRAME_SELECTED:DBLTimelineButton.FRAME_UP)},t.prototype.handleEnabledStateChange=function(){i.prototype.handleEnabledStateChange.call(this)},Object.defineProperty(t.prototype,"disableSelected",{set:function(t){this._disableSelected=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return!!this._isSelected},set:function(t){this._disableSelected&&(this.enabled=!t),this.gotoFrame(t?DBLToggleTimelineButton.FRAME_SELECTED:DBLTimelineButton.FRAME_UP),this._isSelected=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHighlighted",{get:function(){return!!this._isHighlighted},set:function(t){this._highlightClip&&(this._highlightClip.visible=t),this._isHighlighted=t},enumerable:!1,configurable:!0}),t.prototype.updateButtonText=function(){var t,e,i;this._clip.InstText&&this._buttonText&&this.updateTextComponent(this._clip.InstText,this._buttonText),this._clip.textContainer&&this._clip.textContainer.lblText&&this._buttonText&&(t=this._clip.textContainer.lblText,this.updateTextComponent(t,this._buttonText),e=this._clip.textContainer.lblTextOne)&&(i=1==t.getMetrics().lines.length,this.updateTextComponent(e,this._buttonText),e.visible=i,t.visible=!i)},t.prototype.updateTextComponent=function(t,e){t.text=e,t.font=DBLFont.getFontString(this._font,this._textSize,this._fontWeight),t.textBaseline="middle"},t.prototype.gotoState=function(t){this.gotoFrame(t)},t.prototype.playFlourish=function(t){var e;t.flourishFrame&&t.flourishStop?(this._flourishStop=t.flourishStop,e=DBLAsset.create(t.flourishName,t.flourishBundle),this.curClip=e,this.addChild(e),e.scaleX=e.scaleY=t.scale,e.x=this._clip[t.locator].x,e.y=this._clip[t.locator].y,e.visible=!0,this._flourishAnimating=!0,e.gotoAndPlay(t.flourishFrame)):DBLLog.log("Warning: Need to define start and stop frame for animation.",DBLLog.WARN)},t.prototype.fastForwardPlayFlourish=function(){this._flourishAnimating=!1,this.curClip&&this.curClip.visible&&this._flourishStop&&this.curClip.gotoAndPlay(this._flourishStop)},t.prototype.update=function(t){if(t&&this.curClip&&this.curClip.visible&&this._flourishAnimating){for(;0<t--;)this.curClip.advance(t);this._flourishStop&&this.curClip.currentLabel==this._flourishStop&&(this._flourishAnimating=!1)}},Object.defineProperty(t.prototype,"flourishAnimating",{get:function(){return this._flourishAnimating},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFlourish",{get:function(){return this.curClip&&this.curClip.visible},enumerable:!1,configurable:!0}),t.prototype.removeFlourish=function(){this.curClip&&this.curClip.visible&&gsap.TweenLite.to(this.curClip,.5,{alpha:0,onComplete:this.resolveRemoveFlourish.bind(this)}).play()},t.prototype.fastForwardRemoveFlourish=function(){this.resolveRemoveFlourish()},t.prototype.resolveRemoveFlourish=function(){this.curClip&&(this.removeChild(this.curClip),this.curClip=null),this.dispatchEvent("RemoveFlourishComplete",!0,!1)},t})(DBLToggleTimelineButton),DBLIdleTimelineButton=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"idle",{get:function(){return this._idle},set:function(t){this._idle=t,this.handleUpState()},enumerable:!1,configurable:!0}),e.prototype.handleUpState=function(){this.gotoFrame(this._idle?e.FRAME_IDLE:DBLTimelineButton.FRAME_UP)},e.prototype.handleEnabledStateChange=function(){t.prototype.handleEnabledStateChange.call(this),this.gotoFrame(this._enabled?this._idle?e.FRAME_IDLE:DBLTimelineButton.FRAME_UP:DBLTimelineButton.FRAME_DISABLED)},e.FRAME_IDLE="Idle",e})(DBLTimelineButton),DBLToolTipManager=(()=>{function t(){this._hosts=[],this._delay=500,this._offset=null,this._scaleBackground=!1,this._tipArtHeight=64,this._widthOffset=20,this._heightOffset=14,this._textYOffset=3,this._mouse=DBLCapabilities.hasMouse(),this._touch=!1,this._delayTimer=new DBLTimer(this._delay,1),this._delayTimer.addEventListener(DBLTimer.TIMER_COMPLETE,this.onShowToolTip.bind(this))}return t.prototype.cleanup=function(){this.removeAllHosts(),this._delayTimer.removeAllEventListeners(),this._tipArt=null,this._tipObject=null,this._tipHost=null,this._offset=null},t.prototype.addHost=function(t){-1==this._hosts.indexOf(t)&&(this._hosts.push(t),this.initHost(t))},t.prototype.addHosts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var o=n[i];-1==this._hosts.indexOf(o)&&(this._hosts.push(o),this.initHost(o))}},t.prototype.removeHost=function(t){var e=this._hosts.indexOf(t);this._tipHost==t&&(this._tipHost=null),-1!=e&&(this._hosts.splice(e,1),this.clearHost(t),t.state==DBLBaseButton.STATE_OVER)&&(this._tipArt.visible=!1)},t.prototype.removeAllHosts=function(){for(var t=0,e=this._hosts;t<e.length;t++){var i=e[t];this.clearHost(i)}this._hosts.length=0},t.prototype.initHost=function(t){t=t.toolTipTarget;(this._mouse||this._touch&&!this._hoverOnly)&&(t.addEventListener("mouseover",this.rollOver.bind(this)),t.addEventListener("mouseout",this.rollOut.bind(this)))},t.prototype.clearHost=function(t){t.toolTipTarget.removeAllEventListeners()},t.prototype.rollOver=function(){for(var t,e=0,i=this._hosts;e<i.length;e++){var n=i[e];if(n.state==DBLBaseButton.STATE_OVER){t=n;break}}null!=t&&(this._tipHost=t,this._delayTimer.reset(),this._delayTimer.start())},t.prototype.rollOut=function(){this.hideToolTip()},t.prototype.onShowToolTip=function(){var t,e,i,n,o,s;null!=this._tipHost&&(n=this._tipHost.toolTipText,s=this._tipHost.toolTipContainer,i=this._tipHost.toolTipObject,this._tipObject&&(this._tipArt.removeChild(this._tipObject),this._tipObject=null),o=this._tipArt.content,null!=n&&""!=n?(n=n.replace(/\\n/g,"\n"),o.lineWidth=200,o.text=n,n=this._defaultBounds||this._tipArt.getBounds(),t=o.getBounds(),e=this._tipArt.background,i=void(this._scaleBackground&&(i&&(this._tipObject=i,t.width<this._tipObject.getTransformedBounds().width&&(t.width=this._tipObject.getTransformedBounds().width),t.height+=this._tipObject.getTransformedBounds().height,this._tipArt.addChild(this._tipObject)),e.scaleX=(t.width+this._widthOffset)/n.width,e.scaleY=(t.height+this._heightOffset)/n.height,null==this._tipObject?o.y=-t.height/2-this._textYOffset:(o.y=n.y+t.height-3,this._tipObject.x=this._tipObject.getTransformedBounds().width/2+n.x+5,this._tipObject.y=n.y+10))),i=this._offset?this._offset instanceof createjs.Point?this._offset:this._offset(this._tipHost):new createjs.Point(0,0),o=s.stage.getTransformedBounds(),n=s.localToGlobal(0,0),n=this._tipArt.parent.globalToLocal(n.x,n.y),o=Math.max(15-t.x,Math.min(n.x,(o.x+o.width)/s.stage.scaleX-(t.x+t.width+15))),(s=n.y-e.scaleY*this._tipArtHeight/2-i.y)<0&&void 0===this._minimumY?s=n.y+e.scaleY*this._tipArtHeight/2+i.y:void 0!==this._minimumY&&s<this._minimumY&&(s=this._minimumY+e.scaleY*this._tipArtHeight/2*lessonContent.scaleY),this._tipArt.x=o,this._tipArt.y=s,this._tipArt.visible=!0):this._tipArt.visible=!1)},Object.defineProperty(t.prototype,"defaultBounds",{set:function(t){this._defaultBounds=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textYOffset",{set:function(t){this._textYOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"widthOffset",{set:function(t){this._widthOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightOffset",{set:function(t){this._heightOffset=t},enumerable:!1,configurable:!0}),t.prototype.hideToolTip=function(){this._tipHost&&(this._tipArt.visible=!1),this._tipHost=null,this._delayTimer&&this._delayTimer.stop()},Object.defineProperty(t.prototype,"hoverOnly",{get:function(){return this._hoverOnly},set:function(t){this._hoverOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tipArt",{get:function(){return this._tipArt},set:function(t){this._tipArt=t,this._tipArt.mouseEnabled=this._tipArt.mouseChildren=!1,this._tipArt.visible=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._delayTimer.delay=this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumY",{get:function(){return this._minimumY},set:function(t){this._minimumY=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleBackground",{get:function(){return this._scaleBackground},set:function(t){this._scaleBackground=t},enumerable:!1,configurable:!0}),t.prototype.showToolTip=function(t){-1!=this._hosts.indexOf(t)&&(this._tipHost=t,this.onShowToolTip())},t})(),DBLToggleButtonContainer=(s=>{function t(t,e,i,n){var o=s.call(this)||this,t=(o.ANDIKA=DBLRuntime.requireFont("assets.fonts.DBLAndika"),o._padding=0,o._toggleContainer=new createjs.Container,DBLAsset.create(t,i)),t=(DBLFont.fixTextFields(t.children[2]),o._toggleOn=new DBLTimelineButton(t,n),o._toggleOn.hitArea=t.hitArea,o._toggleOn.addEventListener("click",function(t){return o.onClick(t)}),o._toggleOn.name="on",t.nominalBounds),e=(o._toggleOn.setBounds(t.x,t.y,t.width,t.height),DBLAsset.create(e,i));return DBLFont.fixTextFields(e.children[2]),o._toggleOff=new DBLTimelineButton(e,n),o._toggleOff.hitArea=e.hitArea,o._toggleOff.addEventListener("click",function(t){return o.onClick(t)}),o._toggleOff.name="off",o._toggleOff.setBounds(t.x,t.y,t.width,t.height),o._toggleContainer.addChild(o._toggleOn),o._toggleContainer.addChild(o._toggleOff),o.addChild(o._toggleContainer),o}return __extends(t,s),Object.defineProperty(t.prototype,"selected",{get:function(){return this._toggleOn.visible},set:function(t){this._icon&&(this._icon.inst_on.visible=t),this._toggleOn.visible=t,this._toggleOff.visible=!t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{set:function(t){this._toggleOff.enabled=this._toggleOn.enabled=t},enumerable:!1,configurable:!0}),t.prototype.onClick=function(t){this.toggle()},t.prototype.toggle=function(){this._toggleOff.visible?(this.selected=!0,this.dispatchEvent(t.TOGGLE_OFF_EVENT,!0)):(this.selected=!1,this.dispatchEvent(t.TOGGLE_ON_EVENT,!0))},t.prototype.createIcon=function(t,e){this._icon&&(this._icon=null),this._icon=DBLAsset.create(t,e),this.addChild(this._icon),this.redraw()},t.prototype.iconTogglePadding=function(t){this._padding=t,this.redraw()},t.prototype.redraw=function(){this._toggleContainer.x=this._padding,this._icon&&(console.log("Icon height: "+this._toggleContainer.getTransformedBounds().height),this._toggleContainer.y=(this._icon.getTransformedBounds().height-this._toggleContainer.getTransformedBounds().height)/2)},t.prototype.getAccessibility=function(){var t=this;return{type:"switch",display:{object:this._toggleOn},toggle:function(){return t.toggle()},checked:this.selected,enabled:!0,visible:!0}},t.TOGGLE_ON_EVENT="toggle_on",t.TOGGLE_OFF_EVENT="toggle_off",t})(createjs.Container),DBLFontMetrics=function(){},DBLTextCalculator=(()=>{function e(){this.CAP_PERCENTILE=.25,this.SHOULDER_PERCENTILE=.42,this.BASELINE_PERCENTILE=1,this.DESCENDER_PERCENTILE=1.2,this.HANGING_CAP_OFFSET_PERCENTAGE=.05}return e.prototype.getFontMetrics=function(t){var e,i=t.getMeasuredHeight();switch(t.textBaseline){case"hanging":e=-i*(this.CAP_PERCENTILE-this.HANGING_CAP_OFFSET_PERCENTAGE);break;case"middle":e=-i*this.DESCENDER_PERCENTILE/2;break;case"alphabetic":e=-i*this.BASELINE_PERCENTILE;break;case"ideographic":case"bottom":e=-i*this.DESCENDER_PERCENTILE;break;default:e=0}t=new DBLFontMetrics;return t.top=e+i*this.CAP_PERCENTILE,t.bodyTop=e+i*this.SHOULDER_PERCENTILE,t.baseline=e+i*this.BASELINE_PERCENTILE,t.bottom=e+i*this.DESCENDER_PERCENTILE,t},e.prototype.getBoundingBox=function(t){var e,i,n=this.getFontMetrics(t),o=t.getMeasuredWidth();switch(t.textAlign){case"right":case"end":e=t.x-o;break;case"center":e=t.x-o/2;break;default:e=t.x}return i=this.containsHighTops(t.text)||this.containsMediumTops(t.text)?t.y+n.top:t.y+n.bodyTop,n=this.containsLowBottoms(t.text)?t.y+n.bottom:t.y+n.baseline,new createjs.Rectangle(e,i,o,n-i)},e.prototype.containsHighTops=function(t){return e.HIGH_TOP_LETTERS_REGEX.test(t)},e.prototype.containsMediumTops=function(t){return e.MEDIUM_TOP_LETTERS_REGEX.test(t)},e.prototype.containsLowBottoms=function(t){return e.LOW_BOTTOM_LETTERS_REGEX.test(t)},e.HIGH_TOP_LETTERS_REGEX=new RegExp(/[A-Z0-9]/),e.MEDIUM_TOP_LETTERS_REGEX=new RegExp(/[bdfhiklt]/),e.LOW_BOTTOM_LETTERS_REGEX=new RegExp(/[gjpqy]/),e})(),DBLTextHighlighter=(()=>{function t(){this.thickness=3,this.color=DBLHighlightConstants.GENERAL.color,this.padding=4,this._textCalculator=new DBLTextCalculator}return t.prototype.createHighlight=function(t){var e=new createjs.Shape,t=this._textCalculator.getBoundingBox(t),i=(e.x=t.x-this.padding,e.y=t.y-this.padding,e.graphics.setStrokeStyle(this.thickness).beginStroke(this.color).drawRoundRect(0,0,t.width+2*this.padding,t.height+2*this.padding,this.thickness).endStroke(),2*(this.thickness+this.padding));return e.setBounds(0,0,t.width+i,t.height+i),e},t})(),DBLRecordClickEvent=(i=>{function n(t){var e=i.call(this,n.ID,!0,!0)||this;return e._locationProvider=null,e._pendingSnapshotButton=null,e._location=t,e}return __extends(n,i),n.prototype.clone=function(){return new n(this._location).withLocationProvider(this._locationProvider).withPendingSnapshotButton(this._pendingSnapshotButton)},Object.defineProperty(n.prototype,"location",{get:function(){return this._location},set:function(t){this._location=t},enumerable:!1,configurable:!0}),n.prototype.withLocationProvider=function(t){return this._locationProvider=t,this},Object.defineProperty(n.prototype,"locationProvider",{get:function(){return this._locationProvider},enumerable:!1,configurable:!0}),n.prototype.withPendingSnapshotButton=function(t){return this._pendingSnapshotButton=t,this},Object.defineProperty(n.prototype,"pendingSnapshotButton",{get:function(){return this._pendingSnapshotButton},enumerable:!1,configurable:!0}),n.ID="dbl_automation_record_click",n})(createjs.Event);function processDBLRecordClickEvent(t,e){var i=t.locationProvider?t.locationProvider(t.location):t.location;e&&DBLAutomation.recordClick(e,i),t.pendingSnapshotButton&&t.pendingSnapshotButton.takePendingDownStateSnapshotInReplayMode(),t.preventDefault()}(t=>{function g(t){return[].concat(t)}function d(){for(var t,e,i,n,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];for(var r=0,h=o;r<h.length;r++)for(var a=0,l=g(h[r]);a<l.length;a++){var c=l[a],c=(u=void 0,(u=null!=(u=null==(u=(c=c).getBounds)?void 0:u.call(c))?u:new createjs.Rectangle(0,0,null!=(u=c.width)?u:0,null!=(u=c.height)?u:0)).x+=c.x,u.y+=c.y,u),u=c.x,d=c.y,p=c.width,c=c.height;u<(t=null!=t?t:u)&&(t=u),d<(i=null!=i?i:d)&&(i=d),(e=null!=e?e:u+p)<u+(null!=p?p:0)&&(e=u+(null!=p?p:0)),(n=null!=n?n:d+c)<d+(null!=c?c:0)&&(n=d+(null!=c?c:0))}return new createjs.Rectangle(t,i,e-t,n-i)}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=h.apply(void 0,t),n=new createjs.Rectangle(i.x,i.y,0,0),o=0,s=t;o<s.length;o++){var r=d(s[o]);n.width+=r.width,n.height+=r.height}return n}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n,i.y)}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width/2,i.y+i.height/2)}function n(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++){var s=o[n],r=g(s);0!=r.length&&(1==r.length?r[0].width=t:(_((s=p(s)).x-t/2,r[0]),c(s.x+t/2,r[r.length-1]),l.apply(void 0,r)))}}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t.length<=1))for(var i=t[0],n=t[t.length-1],o=u.apply(void 0,t),i=d(i,n),s=(i.height-o.height)/(t.length-1),r=i.y,h=0,a=t;h<a.length;h++){var l=a[h],c=d(l);f(r,l),r+=c.height+s}}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t.length<=1))for(var i=t[0],n=t[t.length-1],o=u.apply(void 0,t),i=d(i,n),s=(i.width-o.width)/(t.length-1),r=i.x,h=0,a=t;h<a.length;h++){var l=a[h],c=d(l);_(r,l),r+=c.width+s}}function _(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.x=l.x-r.x+t}}function c(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.x=l.x-r.x+t-r.width}}function f(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.y=l.y-r.y+t}}function y(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.y=l.y-r.y+t-r.height}}function o(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.x=l.x-r.x+t-r.width/2}}function s(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=0,a=g(s);h<a.length;h++){var l=a[h];l.y=l.y-r.y+t-r.height/2}}t.widest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,__spreadArray([0],t.map(function(t){return d(t).width}),!1))},t.tallest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,__spreadArray([0],t.map(function(t){return d(t).height}),!1))},t.boundary=d,t.fatBoundary=u,t.northWestPt=h,t.northEastPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width,i.y)},t.southEastPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width,i.y+i.height)},t.southWestPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n,i.y+i.height)},t.centerPt=p,t.westPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n,i.y+i.height/2)},t.eastPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width,i.y+i.height/2)},t.northPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width/2,i.y)},t.southPt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.apply(void 0,t),n=i.x;return new createjs.Point(n+i.width/2,i.y+i.height)},t.pinTopLeftCornerTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=t.x-r.x,a=t.y-r.y,l=0,c=g(s);l<c.length;l++){var u=c[l];u.x+=h,u.y+=a}},t.pinTopRightCornerTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=t.x-r.x-r.width,a=t.y-r.y,l=0,c=g(s);l<c.length;l++){var u=c[l];u.x+=h,u.y+=a}},t.pinBottomRightCornerTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=t.x-r.x-r.width,a=t.y-r.y-r.height,l=0,c=g(s);l<c.length;l++){var u=c[l];u.x+=h,u.y+=a}},t.pinBottomLeftCornerTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=d(s),h=t.x-r.x,a=t.y-r.y-r.height,l=0,c=g(s);l<c.length;l++){var u=c[l];u.x+=h,u.y+=a}},t.pinCenterTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++)for(var s=o[n],r=p(s),h=t.x-r.x,a=t.y-r.y,l=0,c=g(s);l<c.length;l++){var u=c[l];u.x+=h,u.y+=a}},t.setWidth=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.apply(void 0,__spreadArray([t.apply(void 0,e)],e,!1))},t.setWidthTo=n,t.setHeightTo=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,o=e;n<o.length;n++){var s=o[n],r=g(s);0!=r.length&&(1==r.length?r[0].height=t:(f((s=p(s)).y-t/2,r[0]),y(s.y+t/2,r[r.length-1]),a.apply(void 0,r)))}},t.distributeVertically=a,t.distributeHorizontally=l,t.stackVertically=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.length<=1||(t=u.apply(void 0,e),y(d(e[0]).y+t.height,e[e.length-1]),a.apply(void 0,e))},t.stackHorizontally=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.length<=1||(t=u.apply(void 0,e),c(d(e[0]).x+t.width,e[e.length-1]),l.apply(void 0,e))},t.alignLeftWith=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.length<1||_.apply(void 0,__spreadArray([d(t).x],e,!1))},t.alignLeftAt=_,t.alignRightWith=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.length<1||(e=(t=d(t)).x,c.apply(void 0,__spreadArray([e+t.width],i,!1)))},t.alignRightAt=c,t.alignTopWith=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.length<1||f.apply(void 0,__spreadArray([d(t).y],e,!1))},t.alignTopAt=f,t.alignBottomWith=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.length<1||(e=(t=d(t)).y,y.apply(void 0,__spreadArray([e+t.height],i,!1)))},t.alignBottomAt=y,t.centerHorizontallyWith=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.length<1||o.apply(void 0,__spreadArray([p(t).x],e,!1))},t.centerHorizontallyAt=o,t.centerVerticallyWith=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.length<1||s.apply(void 0,__spreadArray([p(t).y],e,!1))},t.centerVerticallyAt=s,t.animatePositions=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var o=0,s=i;o<s.length;o++){var r=s[o];DBLTween.tweenFrom(r,t,__assign(__assign(__assign({},d(r)),e),{immediateRender:!1}),0)}return freezeContent(),globalThis.setTimeout(function(){return thawContent()},1),DBLTween.playTweens}})(DBLLayoutHelper=DBLLayoutHelper||{});var DBLLabeledIconButton=(o=>{function t(t,e,i){var n=o.call(this,t,null,null,!1)||this,e=(n.panel=t,n.icon=e,n.label=i,n.addChild(e,i),DBLScale9Container.getNineSliceMargins(t)),i=e[0];return n.margin={left:i,top:e[1],right:e[2],bottom:e[3]},n.fit(),n}return __extends(t,o),t.prototype.swapIcon=function(t){this.removeChild(this.icon),this.addChild(this.icon=t),this.fit()},t.prototype.swapText=function(t){this.label.text=t,this.fit()},t.prototype.fit=function(){var t=DBLLayoutHelper,t=(this.panel.lctIcon?t.pinTopLeftCornerTo(this.panel.lctIcon,this.icon):t.pinTopLeftCornerTo(new createjs.Point(this.margin.left,this.margin.top),this.icon),this.panel.lctLabel?t.pinTopLeftCornerTo(this.panel.lctLabel,this.label):(t.pinCenterTo(t.centerPt(this.icon),this.label),t.alignLeftAt(t.eastPt(this.icon).x,this.label)),t.pinTopLeftCornerTo(new createjs.Point(this.margin.left,this.margin.top),[this.icon,this.label]),t.boundary(this.icon,this.label));this.width=this.margin.left+t.width+this.margin.right,this.height=this.margin.top+t.height+this.margin.bottom},t})(DBLScale9TimelineButton);