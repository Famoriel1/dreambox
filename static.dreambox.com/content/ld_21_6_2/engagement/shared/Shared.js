var engagement_shared,engagement_shared_lockedmodal,engagement_shared_screener,engagement_shared_toolhelp,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,a,r,l){return new(r=r||Promise)(function(n,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function s(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}o((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(i,s){var o,a,r,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;l=u&&t[u=0]?0:l;)try{if(o=1,a&&(r=2&t[0]?a.return:t[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,t[1])).done)return r;switch(a=0,(t=r?[2&t[0],r.value]:t)[0]){case 0:case 1:r=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(r=0<(r=l.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3]))l.label=t[1];else if(6===t[0]&&l.label<r[1])l.label=r[1],r=t;else{if(!(r&&l.label<r[2])){r[2]&&l.ops.pop(),l.trys.pop();continue}l.label=r[2],l.ops.push(t)}}t=s.call(i,l)}catch(e){t=[6,e],a=0}finally{o=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__extends=this&&this.__extends||(()=>{var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}})(),__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,s=0,o=t.length;s<o;s++)!i&&s in t||((i=i||Array.prototype.slice.call(t,0,s))[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))};(e=>{var i=[{id:1,name:"Template lesson 1",icon:"assets.media.engagement.intermediate.lessonicons.DBLAUnit05DF1",description:"First Template Lesson",typeOfLearning:"APPLYING",assigned:!1,completed:!1,lastPlayedAt:1},{id:2,name:"Template lesson 2",icon:"assets.media.engagement.intermediate.lessonicons.DBLAUnit05DF1",description:"Second Template Lesson",typeOfLearning:"LOOKING",assigned:!0,completed:!1,lastPlayedAt:1},{id:3,name:"Template lesson 3",icon:"assets.media.engagement.intermediate.lessonicons.DBLAUnit05DF1",description:"Third Template Lesson",typeOfLearning:"EXPLORING",assigned:!1,completed:!0,lastPlayedAt:1},{id:4,name:"Template lesson 4",icon:"assets.media.engagement.intermediate.lessonicons.DBLAUnit05DF1",description:"Fourth Template Lesson",typeOfLearning:"APPLYING",assigned:!0,completed:!0,lastPlayedAt:1}];function t(e,t,n){var i=[{name:"P53",proficiencyPercent:100,proficiencyType:"FULL"},{name:"P80A",proficiencyPercent:95,proficiencyType:"PARTIAL"},{name:"P80K",proficiencyPercent:87,proficiencyType:"PARTIAL"},{name:"P55",proficiencyPercent:85,proficiencyType:"PARTIAL"},{name:"P05D",proficiencyPercent:82,proficiencyType:"PARTIAL"},{name:"P78C",proficiencyPercent:80,proficiencyType:"PARTIAL"},{name:"P01A",proficiencyType:"NONE"},{name:"P02A",proficiencyType:"NONE"},{name:"P03A",proficiencyType:"NONE"},{name:"P04A",proficiencyType:"NONE"},{name:"P05A",proficiencyType:"NONE"},{name:"P06A",proficiencyType:"NONE"},{name:"P07A",proficiencyType:"NONE"}],e=i.filter(function(e){return"FULL"===e.proficiencyType}).slice(0,e),t=i.filter(function(e){return"PARTIAL"===e.proficiencyType}).slice(0,t),i=i.filter(function(e){return"NONE"===e.proficiencyType}).slice(0,n),s=[],o=1;return e.forEach(function(e){s.push({name:e.name,proficiencyType:e.proficiencyType,proficiencyPercent:e.proficiencyPercent,id:o++,lessons:[]})}),t.forEach(function(e){s.push({name:e.name,proficiencyType:e.proficiencyType,proficiencyPercent:e.proficiencyPercent,id:o++,lessons:[]})}),i.forEach(function(e){s.push({name:e.name,proficiencyType:e.proficiencyType,id:o++,lessons:[]})}),s.forEach(function(e,t){e.lessons=a(t)}),s}function a(n){return[].constructor(n+1).fill(1).map(function(e,t){return __assign({},i[(n+t)%4])})}e.ACHIEVEMENTS_DEBUG_DATA_ARRAY={1:{academicDomains:[]},2:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(1,2,0)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(0,1,1)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(0,0,1)}]},3:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(1,3,1)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(2,1,3)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(3,1,2)},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:t(1,0,4)},{id:5,name:"Place Value",ordinal:5,lessonGroups:t(1,2,4)},{id:11,name:"Counting",ordinal:6,lessonGroups:t(1,3,3)}]},4:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(4,3,1)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(4,3,1)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(4,3,1)},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:t(2,2,1)},{id:5,name:"Place Value",ordinal:5,lessonGroups:t(5,8,16)},{id:6,name:"Functions",ordinal:6,lessonGroups:t(1,1,5)},{id:7,name:"Expressions & Equations",ordinal:7,lessonGroups:t(1,6,2)},{id:8,name:"Fractions & Decimals",ordinal:8,lessonGroups:t(2,1,1)},{id:9,name:"Multiplication & Division",ordinal:9,lessonGroups:t(4,2,3)},{id:10,name:"Addition & Subtraction",ordinal:10,lessonGroups:t(1,2,3)},{id:11,name:"Counting",ordinal:11,lessonGroups:t(5,8,7)}]},5:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(4,6,1)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(6,4,3)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(4,3,5)},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:t(2,8,1)},{id:5,name:"Place Value",ordinal:5,lessonGroups:t(5,8,16)},{id:6,name:"Functions",ordinal:6,lessonGroups:t(1,4,5)},{id:7,name:"Expressions & Equations",ordinal:7,lessonGroups:t(1,6,2)},{id:8,name:"Fractions & Decimals",ordinal:8,lessonGroups:t(2,6,1)},{id:9,name:"Multiplication & Division",ordinal:9,lessonGroups:t(4,2,3)},{id:10,name:"Addition & Subtraction",ordinal:10,lessonGroups:t(5,2,3)},{id:11,name:"Counting",ordinal:11,lessonGroups:t(6,8,7)},{id:1,name:"Measurement",ordinal:12,lessonGroups:t(4,3,1)},{id:2,name:"Geometry",ordinal:13,lessonGroups:t(4,3,1)},{id:3,name:"Ratios & Proportions",ordinal:14,lessonGroups:t(4,6,1)},{id:4,name:"Comparisons & Ordering",ordinal:15,lessonGroups:t(2,3,1)},{id:5,name:"Place Value",ordinal:16,lessonGroups:t(5,8,16)},{id:6,name:"Functions",ordinal:17,lessonGroups:t(1,7,5)},{id:7,name:"Expressions & Equations",ordinal:18,lessonGroups:t(1,6,2)},{id:8,name:"Fractions & Decimals",ordinal:19,lessonGroups:t(2,5,1)},{id:9,name:"Multiplication & Division",ordinal:20,lessonGroups:t(4,2,3)},{id:10,name:"Addition & Subtraction",ordinal:21,lessonGroups:t(1,2,3)},{id:11,name:"Counting",ordinal:22,lessonGroups:t(5,8,7)}]},"3p":{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(0,2,1)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(2,1,3)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(1,2,2)},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:t(1,0,4)},{id:5,name:"Place Value",ordinal:5,lessonGroups:t(1,1,4)},{id:11,name:"Counting",ordinal:6,lessonGroups:t(1,3,3)}]},"4p":{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(1,4,1)},{id:2,name:"Geometry",ordinal:2,lessonGroups:t(4,3,1)},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:t(2,2,1)},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:t(2,2,1)},{id:5,name:"Place Value",ordinal:5,lessonGroups:t(4,7,16)},{id:6,name:"Functions",ordinal:6,lessonGroups:t(1,1,5)},{id:7,name:"Expressions & Equations",ordinal:7,lessonGroups:t(1,6,2)},{id:8,name:"Fractions & Decimals",ordinal:8,lessonGroups:t(2,1,1)},{id:9,name:"Multiplication & Division",ordinal:9,lessonGroups:t(4,2,3)},{id:10,name:"Addition & Subtraction",ordinal:10,lessonGroups:t(1,2,3)},{id:11,name:"Counting",ordinal:11,lessonGroups:t(5,8,7)}]},singleRow:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(1,3,1)}]},singleRowPrev:{academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:t(0,2,1)}]}},e.ACHIEVEMENTS_DEBUG_DATA={academicDomains:[{id:1,name:"Measurement",ordinal:1,lessonGroups:[{id:1,name:"P80A",proficiencyType:"PARTIAL",proficiencyPercent:95,lessons:a(0)},{id:2,name:"P80K",proficiencyType:"PARTIAL",proficiencyPercent:87,lessons:a(1)},{id:3,name:"P55",proficiencyType:"PARTIAL",proficiencyPercent:85,lessons:a(2)},{id:4,name:"P53",proficiencyType:"FULL",proficiencyPercent:100,lessons:a(3)}]},{id:2,name:"Geometry",ordinal:2,lessonGroups:[{id:1,name:"P01A",proficiencyType:"NONE",lessons:a(0)},{id:2,name:"P05D",proficiencyType:"PARTIAL",proficiencyPercent:82,lessons:a(1)},{id:3,name:"P78C",proficiencyType:"NONE",lessons:a(2)}]},{id:3,name:"Ratios & Proportions",ordinal:3,lessonGroups:[{id:1,name:"P02A",proficiencyType:"NONE",lessons:a(0)},{id:2,name:"P03A",proficiencyType:"NONE",lessons:a(1)}]},{id:4,name:"Comparisons & Ordering",ordinal:4,lessonGroups:[{id:1,name:"P04A",proficiencyType:"NONE",lessons:a(0)},{id:2,name:"P05A",proficiencyType:"NONE",lessons:a(1)}]},{id:5,name:"Place Value",ordinal:5,lessonGroups:[{id:1,name:"P06A",proficiencyType:"NONE",lessons:a(0)},{id:2,name:"P07A",proficiencyType:"NONE",lessons:a(1)}]},{id:6,name:"Functions",ordinal:6,lessonGroups:[]},{id:7,name:"Expressions & Equations",ordinal:7,lessonGroups:[]},{id:8,name:"Fractions & Decimals",ordinal:8,lessonGroups:[]},{id:9,name:"Multiplication & Division",ordinal:9,lessonGroups:[]},{id:10,name:"Addition & Subtraction",ordinal:10,lessonGroups:[]},{id:11,name:"Counting",ordinal:11,lessonGroups:[]}]}})(engagement_shared=engagement_shared||{}),(i=>{var s="Achievements.lastData";function o(){this._syncHandle=void 0}o.prototype.getAchievementsData=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(e){switch(e.label){case 0:return n=rootParams.debugAchDataId||"3",n=i.ACHIEVEMENTS_DEBUG_DATA_ARRAY[n]||[],[4,DBLEngagementManager.retrieveStudentAchievements(n)];case 1:return t=e.sent(),[4,this.getLastAchievementsData()];case 2:return n=e.sent(),o.markLessonGroupsWithUpdates(t,n),[4,this.setLastAchievementsData(t)];case 3:return e.sent(),[2,t]}})})},o.prototype.getLastAchievementsData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return rootParams.debugPrevAchDataId?(t=i.ACHIEVEMENTS_DEBUG_DATA_ARRAY[rootParams.debugPrevAchDataId],[2,o.minimizeAchievementsData(t)]):(DBLStateManager.requestProperty(s),[4,this.syncProperties()]);case 1:return e.sent(),[2,DBLStateManager.getProperty(s)]}})})},o.prototype.setLastAchievementsData=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=o.minimizeAchievementsData(n),DBLStateManager.setProperty(s,t),[4,this.syncProperties()];case 1:return[2,e.sent()]}})})},o.minimizeAchievementsData=function(e){var n={academicDomains:[]};return e.academicDomains.forEach(function(e){var t={id:e.id,lessonGroups:[]};e.lessonGroups.forEach(function(e){t.lessonGroups.push({id:e.id,proficiencyType:e.proficiencyType,proficiencyPercent:e.proficiencyPercent})}),n.academicDomains.push(__assign({},t))}),n},o.markLessonGroupsWithUpdates=function(e,t){function i(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}var s;t&&(s=i(t.academicDomains),e.academicDomains.forEach(function(e){var t=s[e.id],n=t?i(t.lessonGroups):null;e.lessonGroups.forEach(function(e){var t=n?n[e.id]:null;e.updated=!t||e.proficiencyType!=t.proficiencyType||e.proficiencyPercent!=t.proficiencyPercent})}))},o.prototype.syncProperties=function(){var n=this;return new Promise(function(t){n.cancelSync(),n._syncHandle=DBLStateManager.syncProperties(function(e){n._syncHandle=void 0,"function"==typeof t&&t(e)})})},o.prototype.cancelSync=function(){var e;null!=(e=this._syncHandle)&&e.cancel(),this._syncHandle=void 0},i.AchievementsService=o})(engagement_shared=engagement_shared||{}),(t=>{var e;function n(){return e.call(this)||this}e=createjs.Container,__extends(n,e),n.prototype.ready=function(e){this._assignedLessonIcon=DBLAsset.create("SPOT"==e?"DBLAAssignedFocusIcon_Primary":"DBLAAssignedFocusIcon_Primary_Ongoing",t.SHELL_BUNDLE),this.addChild(this._assignedLessonIcon),this.resize()},n.prototype.resize=function(){this._assignedLessonIcon.scaleX=this._assignedLessonIcon.scaleY=lessonContent.scaleX,this._assignedLessonIcon.x=0,this._assignedLessonIcon.y=79*lessonContent.scaleX},n.prototype.cleanup=function(){},t.AssignFocusTab=n})(engagement_shared=engagement_shared||{}),(e=>{var n;function t(e){var t=n.call(this)||this;return t._callback=e,t}n=createjs.Container,__extends(t,n),t.prototype.addShield=function(e,t,n,i){void 0===n&&(n=void 0),void 0===i&&(i=void 0),this._htmlDiv=document.createElement("div"),this._htmlDiv.id="scrim",this._htmlDiv.style.backgroundColor="rgba(0,0,0,0.5)",this._htmlDiv.style.width=e+"px",this._htmlDiv.style.height=t+"px",this._htmlDiv.style.display="block",document.getElementById("htmlcontent").appendChild(this._htmlDiv),this._domElementDiv=new createjs.DOMElement(this._htmlDiv),this.addChild(this._domElementDiv),this._htmlImage=new Image,this._htmlImage.src="data:image/png;base64,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",this._htmlImage.id="autoplay",document.getElementById("htmlcontent").appendChild(this._htmlImage),this._domElementImage=new createjs.DOMElement(this._htmlImage),this.addChild(this._domElementImage);n=isNaN(n)?(e-110)/2:n-55,i=isNaN(i)?(t-110)/2:i-55;this._domElementImage.x=n,this._domElementImage.y=i,this._htmlImageOver=new Image,this._htmlImageOver.src="data:image/png;base64,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",this._htmlImageOver.id="autoplayover",document.getElementById("htmlcontent").appendChild(this._htmlImageOver),this._domElementImageOver=new createjs.DOMElement(this._htmlImageOver),this.addChild(this._domElementImageOver),this._domElementImageOver.x=n,this._domElementImageOver.y=i,this._domElementImageOver.visible=!1,this._htmlImageDown=new Image,this._htmlImageDown.src="data:image/png;base64,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",this._htmlImageDown.id="autoplaydown",document.getElementById("htmlcontent").appendChild(this._htmlImageDown),this._domElementImageDown=new createjs.DOMElement(this._htmlImageDown),this.addChild(this._domElementImageDown),this._domElementImageDown.x=n,this._domElementImageDown.y=i,this._domElementImageDown.visible=!1,this._hitArea=new createjs.Shape,this._hitArea.graphics.beginFill("white"),this._hitArea.graphics.drawRect(0,0,e,t),this.hitArea=this._hitArea,this.addEventListener("mouseover",this.onScrimOver.bind(this)),this.addEventListener("mouseout",this.onScrimOut.bind(this)),this.addEventListener("mousedown",this.onScrimDown.bind(this)),this.addEventListener("click",this.onScrimClick.bind(this))},t.prototype.tick=function(){this._domElementDiv&&this._domElementDiv._tick(),this._domElementImage&&this._domElementImage._tick(),this._domElementImageOver&&this._domElementImageOver._tick(),this._domElementImageDown&&this._domElementImageDown._tick()},t.prototype.removeShield=function(){this._domElementDiv&&(this.removeChild(this._domElementDiv),this._domElementDiv=null,this.removeChild(this._domElementImage),this._domElementImage=null,this.removeChild(this._domElementImageOver),this._domElementImageOver=null,this.removeChild(this._domElementImageDown),this._domElementImageDown=null,document.getElementById("htmlcontent").removeChild(this._htmlDiv),this._htmlDiv=null,document.getElementById("htmlcontent").removeChild(this._htmlImage),this._htmlImage=null,document.getElementById("htmlcontent").removeChild(this._htmlImageOver),this._htmlImageOver=null,document.getElementById("htmlcontent").removeChild(this._htmlImageDown),this._htmlImageDown=null)},t.prototype.onScrimOver=function(e){this._domElementImage&&(this._domElementImage.visible=!1,this._domElementImageOver.visible=!0,this._domElementImageDown.visible=!1,DBLCursor.setCursor(DBLCursor.POINTER))},t.prototype.onScrimOut=function(e){this._domElementImage&&(this._domElementImage.visible=!0,this._domElementImageOver.visible=!1,this._domElementImageDown.visible=!1,DBLCursor.setCursor(DBLCursor.AUTO))},t.prototype.onScrimDown=function(e){this._domElementImage&&(this._domElementImage.visible=!1,this._domElementImageOver.visible=!1,this._domElementImageDown.visible=!0)},t.prototype.onScrimClick=function(e){this.removeAllEventListeners("mouseover"),this.removeAllEventListeners("mouseout"),this.removeAllEventListeners("mousedown"),this.removeAllEventListeners("click"),this.removeShield(),this._callback()},t.prototype.getAccessibilityData=function(){var t=this;return{role:"button",display:{object:this},labelObject:{id:"introVideo"},focus:this._domElementImage?{bounds:function(){return new createjs.Rectangle(t._domElementImage.x,t._domElementImage.y,5,5)},onHTMLFocus:function(e){t._domElementImage.visible=!1,t._domElementImageOver.visible=!0,t._htmlImageOver.style.border="1px solid white"},onHTMLBlur:function(e){t._domElementImage.visible=!0,t._domElementImageOver.visible=!1,t._htmlImageOver.style.removeProperty("border")}}:null}},e.AutoPlayShield=t})(engagement_shared=engagement_shared||{}),(e=>{var t,n=DBLRuntime.requireBundle("assets.bundles.engagement.primary.CharacterButton"),i=DBLRuntime.requireAudio("assets.bundles.engagement.primary.sounds._05goodjob5"),s="Avatar",o="AvatarShowStart",a="AvatarHideStart",r="ShowFriendFace",l="Done",u=(t=createjs.Container,__extends(d,t),d.prototype.cleanup=function(){},d.prototype.tick24=function(e){for(;0<e--;)this._avatar&&DBLAsset.advanceMovieClip(this._avatar),this._reward.visible&&DBLAsset.advanceMovieClip(this._reward);this._ring.tickDOM()},Object.defineProperty(d.prototype,"enabled",{set:function(e){this._ring.enabled=e,this._avatar&&(e?(this._avatar.filters=[],this._avatar.uncache()):(this._avatar.filters=[new createjs.ColorFilter(.5,.5,.5,1)],this._avatar.cache(-45,-45,90,105,standardScale)))},enumerable:!1,configurable:!0}),d.prototype.addFriend=function(e,t){this._animationCallback=t,this._friendClass=e,this._avatar.addEventListener("Done",this.addFriendAnimationStart.bind(this)),this._avatar.gotoAndPlay(a),this.mouseEnabled=!1,this.mouseChildren=!1},d.prototype.fastForwardAddFriend=function(){this._reward.removeAllEventListeners(r),this._reward.removeAllEventListeners(l),this._reward.stop(),this._reward.visible=!1,this._friend.visible=!1,this._avatar.removeAllEventListeners("Done"),this._avatar.gotoAndStop(s),this.onAddFriendEnd(null)},d.prototype.addFriendAnimationStart=function(e){this._avatar.removeAllEventListeners("Done"),this._friend=DBLAsset.create(this._friendClass),null!=this._friend&&(this._friend.x=18,this._friend.y=37,this._friend.scaleX=this._friend.scaleY=.7,this._friend.visible=!1,this.addChild(this._friend)),this._reward.addEventListener(r,this.onShowFriendFace.bind(this)),this._reward.addEventListener(l,this.onAddFriendDone.bind(this)),this._reward.visible=!0,this._reward.gotoAndPlay("FindFriend1Start")},d.prototype.onShowFriendFace=function(e){this._reward.removeEventListener(r,this.onShowFriendFace.bind(this)),this._friend.visible=!0},d.prototype.onAddFriendDone=function(e){this._reward.removeAllEventListeners(r),this._reward.removeAllEventListeners(l),this._reward.visible=!1,this._friend.visible=!1,this._avatar.addEventListener("Done",this.onAddFriendEnd.bind(this)),this._avatar.gotoAndPlay(o)},d.prototype.onAddFriendEnd=function(e){this.mouseEnabled=!0,this.mouseChildren=!0,this._avatar.removeAllEventListeners("Done"),DBLAsset.stopAllMovieClips(this._avatar);var t=this._animationCallback;this._animationCallback=null,t&&t()},d.prototype.addToken=function(e){this._animationCallback=e,this._avatar.addEventListener("Done",this.addTokenAnimationStart.bind(this)),this._avatar.gotoAndPlay(a),this.mouseEnabled=!1,this.mouseChildren=!1},d.prototype.fastForwardAddToken=function(){this._reward.removeAllEventListeners("Done"),this._reward.stop(),this._reward.visible=!1,this._avatar.gotoAndStop(s),this.onAddTokenEnd(null)},d.prototype.addTokenAnimationStart=function(e){this._avatar.removeAllEventListeners("Done"),this._reward.addEventListener("Done",this.onAddTokenDone.bind(this)),this._reward.visible=!0,this._reward.gotoAndPlay("FindTokenStart")},d.prototype.onAddTokenDone=function(e){this._reward.removeAllEventListeners("Done"),this._reward.visible=!1,this._avatar.addEventListener("Done",this.onAddTokenEnd.bind(this)),this.dispatchEvent("UpdateTokens"),this._avatar.gotoAndPlay(o)},d.prototype.onAddTokenEnd=function(e){this.mouseEnabled=!0,this.mouseChildren=!0,this._avatar.removeAllEventListeners("Done"),DBLAsset.stopAllMovieClips(this._avatar);var t=this._animationCallback;this._animationCallback=null,t()},d.prototype.showLessonAnimation=function(e){this._animationCallback=e,this._avatar.addEventListener("Done",this.showLessonAnimationStart.bind(this)),this._avatar.gotoAndPlay(a),this.mouseEnabled=!1,this.mouseChildren=!1},d.prototype.showLessonAnimationStart=function(e){this._avatar.removeAllEventListeners("Done"),this._reward.addEventListener("Done",this.showLessonAnimationComplete.bind(this)),this._reward.visible=!0,this._reward.gotoAndPlay("LessonCompletedStart"),DBLAsset.playSound(i)},d.prototype.showLessonAnimationComplete=function(e){this._reward.removeAllEventListeners("Done"),this._reward.visible=!1,this._avatar.addEventListener("Done",this.onShowLessonEnd.bind(this)),this._avatar.gotoAndPlay(o)},d.prototype.onShowLessonEnd=function(e){this.mouseEnabled=!0,this.mouseChildren=!0,this._avatar.removeAllEventListeners("Done"),DBLAsset.stopAllMovieClips(this._avatar);var t=this._animationCallback;this._animationCallback=null,t()},d.prototype.fastForwardShowLessonAnimation=function(){this._reward.removeAllEventListeners("Done"),this._reward.stop(),this._reward.visible=!1,this._avatar.gotoAndStop(s),this.onShowLessonEnd(null)},d.prototype.createAvatarIcon=function(e){var t,n=null;return __user._avatar_&&(t="squiggly"==engagement?"assets.bundles.engagement.squiggly.avatars.chooser.AvatarMonster001":"assets.bundles.engagement.primary.avatars.AvatarIcon"+__user._avatar_.substr(0,1).toUpperCase()+__user._avatar_.substr(1),e="squiggly"==engagement?"Icon"+DBLStringUtils.capitalize(__user._avatar_)+"Av":"SCAAvatarIcon"+e.substr(0,1).toUpperCase()+e.substr(1),null!=(n=DBLAsset.create(e,t)))&&(n.x=49,n.y=64,n.gotoAndStop(s),DBLAsset.stopAllMovieClips(n),n.mouseEnabled=!1),n},Object.defineProperty(d.prototype,"avatarID",{set:function(e){null!=this._avatar&&this.removeChild(this._avatar),__user._avatar_&&(this._avatar=this.createAvatarIcon(e),null!=this._avatar)&&this.addChild(this._avatar)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ring",{get:function(){return this._ring},enumerable:!1,configurable:!0}),d.prototype.getAccessibilityData=function(){return{role:"button",display:{object:this._ring},labelObject:{id:"shellAvatarRing"}}},d);function d(){var e=t.call(this)||this;return e._ring=new DBLTimelineButton(DBLAsset.create("SCACharacterButtonStatus",n)),e._ring.x=0,e._ring.y=18,e.addChild(e._ring),e._reward=DBLAsset.create("SCACharacterButtonReward",n),e._reward.x=15,e._reward.y=32,e.addChild(e._reward),e._reward.visible=!1,__domTestHooks&&DBLTestUtil.createTestDOMElement(e._ring,"qaavatarring",PERM_TEST_DIV),e}e.AvatarRing=u})(engagement_shared=engagement_shared||{}),(e=>{e.BUTTON_DONE="squiggly"==engagement?"DBLAButtonSubmit":"DBLAButtonDone_P",e.BUTTON_CANCEL="squiggly"==engagement?"DBLAButtonCancel":"DBLAButtonCancel_P",e.BUTTON_PLAY="squiggly"==engagement?"DBLAButtonPlay":"DBLAButtonPlay_P",e.BUTTON_BUNDLE="squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.lessons.shared.SquigglyButtonsShared"):DBLRuntime.requireBundle("assets.bundles.lessons.shared.PrimaryButtons"),e.SHELL_BUNDLE="squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.squiggly.SquigglyShared"):DBLRuntime.requireBundle("assets.bundles.engagement.primary.TopBottomThin_2020")})(engagement_shared=engagement_shared||{}),(t=>{var n;function i(){var e=n.call(this)||this;return e._paused=!1,e._dragging=!1,e._enabled=!1,e._texts=[],e._currentTextIndex=0,e._currentTextElapsed=0,e._autoHideEnabled=!0,e._dragEnabled=!1,e._scrollEnabled=!1,e._progressHideEnabled=!0,e._welcomeMessageTimeElapsed=0,e._timeoutElapsed=0,rootParams.cc&&DBLUtils.isString(rootParams.cc)&&(-1!=rootParams.cc.indexOf("drag")&&(e._dragEnabled=!0),-1!=rootParams.cc.indexOf("scroll"))&&(e._scrollEnabled=!0),e}n=createjs.Container,__extends(i,n),i.prototype.ready=function(){this._bar=new createjs.Shape,this.addChild(this._bar),this._timeLast=getTime(),this._welcomeMessage=new t.ClosedCaptionText,this._welcomeMessage.x=i.BAR_BORDER_X,this._welcomeMessage.addText(translate("**Closed-captioning turned on.**")),this._welcomeMessage.visible=!1,this.addChild(this._welcomeMessage),this.alpha=0},i.prototype.resize=function(){var e,t;this._bar&&(this._bar.graphics.clear(),this._bar.graphics.beginFill(DBLGraphicUtils.convertColor(0,.9)),e=this._scrollEnabled?i.BAR_SCROLL_WIDTH:i.BAR_WIDTH,this._bar.graphics.drawRoundRect(0,-3,e,(t=i.BAR_HEIGHT)+6,6),this._bar.setBounds(0,-3,e,t+6),this._dragEnabled&&!this.hasEventListener("mousedown")&&this.addEventListener("mousedown",this.mouseDown.bind(this)),this.cursor=this._dragEnabled?DBLCursor.POINTER:DBLCursor.AUTO,this._scrollUp&&this.removeChild(this._scrollUp),this._scrollDown&&this.removeChild(this._scrollDown),this._scrollEnabled)&&(this._scrollUp=this.createArrow(),this._scrollUp.scaleY=-1,this._scrollUp.x=e-25,this._scrollUp.y=20,this._scrollUp.addEventListener("mousedown",this.onScrollUp.bind(this)),this.addChild(this._scrollUp),this._scrollDown=this.createArrow(),this._scrollDown.x=e-25,this._scrollDown.y=t-22,this._scrollDown.addEventListener("mousedown",this.onScrollDown.bind(this)),this.addChild(this._scrollDown))},Object.defineProperty(i.prototype,"enabled",{set:function(e){!this._enabled&&e&&(getSessionProperty(t.PROPERTY_CLOSED_CAPTION)?this._welcomeMessageTimeElapsed=2e3:(this._welcomeMessageTimeElapsed=0,setSessionProperty(t.PROPERTY_CLOSED_CAPTION,!0))),this._enabled=e,this.showBar(e)},enumerable:!1,configurable:!0}),i.prototype.pause=function(){this._paused=!0,this.hide()},i.prototype.unpause=function(){this._paused&&this._enabled&&this.showBar(!0,!1),this._paused=!1},i.prototype.hide=function(){this._progressHideEnabled&&this._enabled&&this.showBar(!1,!1)},i.prototype.show=function(){this._progressHideEnabled&&this._enabled&&this.showBar(!0,!1)},i.prototype.reset=function(){for(var e=0,t=this._texts;e<t.length;e++){var n=t[e];this.removeChild(n)}this._texts=[],this.hide()},i.prototype.createArrow=function(){var e=new createjs.Shape;return e.graphics.beginFill(DBLGraphicUtils.convertColor(16777215,1)),e.graphics.lineTo(0,0),e.graphics.lineTo(10,20),e.graphics.lineTo(20,0),e.graphics.lineTo(10,5),e.graphics.lineTo(0,0),e.cursor=DBLCursor.POINTER,e},i.prototype.enableArrow=function(e,t){e.mouseEnabled=t,e.cursor=t?DBLCursor.POINTER:DBLCursor.AUTO,e.alpha=t?1:.6},i.prototype.mouseDown=function(e){this._dragOffset=this.globalToLocal(e.stageX,e.stageY),this._dragging=!0,this._mouseUpHandler=this.addEventListener("pressup",this.mouseUp.bind(this))},i.prototype.onScrollUp=function(e){paused||shell.showPausePopupDueToClosedCaptionHistory(),this._paused=!0,this._currentTextIndex=Math.max(0,Math.min(this._currentTextIndex-1,this._texts.length-1)),this._currentTextElapsed=0,this.updateTextStates()},i.prototype.onScrollDown=function(e){paused||shell.showPausePopupDueToClosedCaptionHistory(),this._paused=!0,this._currentTextIndex=Math.max(0,Math.min(this._currentTextIndex+1,this._texts.length-1)),this._currentTextElapsed=0,this.updateTextStates()},i.prototype.mouseMove=function(){var e,t;this.stage&&(e=this.parent.globalToLocal(this.stage.mouseX,this.stage.mouseY),t=this.parent.getBounds(),this.x=e.x-this._dragOffset.x,this.y=e.y-this._dragOffset.y,this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.x=Math.min(this.x,t.x+t.width-this.getBounds().width),this.y=Math.min(this.y,t.y+t.height-this.getBounds().height))},i.prototype.cleanupMouseHandlers=function(){this._mouseUpHandler&&(this.removeEventListener("pressup",this._mouseUpHandler),this._mouseUpHandler=null)},i.prototype.mouseUp=function(e){this.cleanupMouseHandlers(),this._dragging=!1},i.prototype.createNewText=function(){var e=new t.ClosedCaptionText;return e.x=i.BAR_BORDER_X,this._texts.push(e),this.addChild(e),e},i.prototype.addText=function(e){var t=this._texts[this._texts.length-1],n=null==t||!this._showBar,e=(e=e.trim()).replace(/\s+/g," "),n=(!n&&t.canAddText(e)||(n&&(this._currentTextIndex=this._texts.length),t=this.createNewText()),this._playingTextAudio||(n=this._texts[this._currentTextIndex],this._currentTextElapsed=n?n.textTime:0),this._playingTextAudio=!0,this._autoHideEnabled&&this._enabled&&this.showBar(!0),t.addText(e));0<n.length&&this.addText(n),this.updateTextStates()},i.prototype.playComplete=function(){this._playingTextAudio=!1,this._timeoutElapsed=0,this._enabled&&this.updateTextStates()},i.prototype.manageHistory=function(){var e;5<this._texts.length&&((e=this._texts.splice(0,1)[0]).uncache(),this.removeChild(e),this._currentTextIndex=Math.max(0,this._currentTextIndex-1))},i.prototype.updateTextStates=function(){fastForwarding&&(this._currentTextIndex=Math.max(0,this._texts.length-1),this._currentTextElapsed=Number.POSITIVE_INFINITY),this.manageHistory();var e=this._texts[this._currentTextIndex],e=(e&&this._currentTextElapsed>e.textTime&&this._currentTextIndex!=this._texts.length-1&&(this._currentTextIndex=Math.max(0,Math.min(this._currentTextIndex+1,this._texts.length-1)),e=this._texts[this._currentTextIndex],this._timeoutElapsed=-e.textTime,this._currentTextElapsed=0),this._welcomeMessage.visible=this._welcomeMessageTimeElapsed<2e3&&!replayMode,!this._welcomeMessage.visible&&0==this._texts.length),t=this._currentTextIndex==this._texts.length-1&&!this._playingTextAudio&&2e3<this._timeoutElapsed;this._autoHideEnabled&&this._enabled&&(e||t)&&!replayMode&&this.showBar(!1);for(var n=0;n<this._texts.length;n++)this._texts[n].visible=this._currentTextIndex==n&&!this._welcomeMessage.visible;this._scrollEnabled&&(this.enableArrow(this._scrollUp,0<this._currentTextIndex),this.enableArrow(this._scrollDown,this._currentTextIndex<this._texts.length-1))},i.prototype.showBar=function(e,t){void 0===t&&(t=!0),fastForwarding&&(t=!1),e!=this._showBar&&(this._timeline&&this._timeline.isActive()&&(this._timeline.kill(),this._timeline=null),this.visible=!0,t?(this._timeline=new gsap.TimelineLite,this._timeline.add(gsap.TweenLite.to(this,.2,{alpha:e?1:0}))):this.alpha=e?1:0,this._showBar=e),1==e&&engagementStage.getChildIndex(this)!=engagementStage.numChildren-1&&(engagementStage.removeChild(this),engagementStage.addChild(this))},i.prototype.tick=function(){this._dragging&&this.mouseMove();var e,t=getTime();this._paused?this._timeLast=t:(e=t-this._timeLast,this._currentTextElapsed+=e,this._timeoutElapsed+=e,this._welcomeMessageTimeElapsed+=e,this._timeLast=t,this.updateTextStates())},i.BAR_BORDER_X=10,i.BAR_BORDER_Y=5,i.BAR_HEIGHT=60,i.BAR_WIDTH=580,i.BAR_SCROLL_WIDTH=610,t.ClosedCaptionBar=i})(engagement_shared=engagement_shared||{}),(e=>{var t,n=DBLRuntime.requireFont("assets.fonts.Arial"),u="#FFFFFF",i=(t=createjs.Container,__extends(o,t),o.prototype.clone=function(){var e=new o;return e._maxLines=this._maxLines,e.addText(this._text),e},Object.defineProperty(o.prototype,"numLines",{get:function(){return this._lines},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maxLines",{get:function(){return this._maxLines},set:function(e){this._maxLines=e},enumerable:!1,configurable:!0}),o.prototype.canAddText=function(e){return 0==this.clone().addText(e).length},o.prototype.addText=function(e){0<this._text.length&&(e=" "+e),this.uncache();for(var t=o.split(e),n=0;n<t.length;n++){var i=t[n],s=i.component;if(0==this._lines&&this._lines++,560<this._lastLineWidth+s.getBounds().width){if(this._lines>=this._maxLines)return t.slice(n).map(function(e){return e.text}).join(" ");this._lastLineWidth=0,this._lastLineY+=this._lastLineMaxHeight+2,this._lines++,this._lastLineMaxHeight=0}this._lastLineMaxHeight=Math.max(this._lastLineMaxHeight,s.getBounds().height),s.x+=this._lastLineWidth,s.y+=this._lastLineY,this.addChild(s),this._text+=i.text,this._lastLineWidth+=s.getBounds().width}return""},o.parse=function(e){var t=new o;return t.addText(e),t},Object.defineProperty(o.prototype,"textTime",{get:function(){return"primary"==engagement?80*this._text.length:70*this._text.length},enumerable:!1,configurable:!0}),o.createText=function(e,t){void 0===t&&(t=22);e=new createjs.Text(e,DBLFont.getFontString(n,t),u);return e.textBaseline="alphabetic",e.y=e.getMeasuredLineHeight(),e},o.createExpression=function(e,t){void 0===t&&(t=22);var n=new createjs.Container,i=window.components_shared_scientificexpression;return i?((i=i.ScientificExpression.createFromExprAndStyle(e,t,u,DBLFont.NORMAL,!1,!1,!0)).y=4,n.addChild(i),30<(e=i.getBounds().height)&&(i.scaleX=t=30/e,i.scaleY=t,i.y=0)):DBLLog.log("Cannot render scientific expression - module not loaded.",DBLLog.ERROR),n},o.createFraction=function(e,t,n){var i=new createjs.Container,s=1,e=(e&&0<e.length&&(e=this.createText(e),i.addChild(e),s=e.getMeasuredWidth()-3),this.createText(t,15)),t=this.createText(n,15),n=e.getBounds().width,o=t.getBounds().width,a=Math.max(n,o),r=e.getBounds().height,l=r+-3+3,n=(e.x=s+(a-n)/2,e.y+=-3,i.addChild(e),t.x=s+(a-o)/2,t.y+=r+-3+1,i.addChild(t),new createjs.Shape);return n.graphics.setStrokeStyle(1),n.graphics.beginStroke(u),n.graphics.moveTo(0,l),n.graphics.lineTo(a+2,l),n.setBounds(0,l,a+2,1),n.x=s-1,i.addChild(n),i.x=-i.getBounds().x,i},o.createTextComponent=function(e){return{component:this.createText(e),text:e}},o.createTextComponents=function(e,t){for(var n=t.split(/\s+/),i=0;i<n.length;i++)0<i&&e.push(this.createTextComponent(" ")),0<n[i].length&&e.push(this.createTextComponent(n[i]))},o.split=function(e){for(var t,n=/(\d+\s+)?(\d+)\s*\/\s*(\d+)/g,i=n.exec(e),s=DBLPlay.SCI_EXP_REG_EXP.exec(e),o=[],a=0;null!=s||null!=i;){for(s&&s.index<(i?i.index:e.length-1)?(0<s.index&&this.createTextComponents(o,e.substr(a,s.index-a)),a=s.index+s[0].length,t=this.createExpression(s[1]),o.push({text:s[0],component:t})):(0<i.index&&this.createTextComponents(o,e.substr(a,i.index-a)),a=i.index+i[0].length,o.push({text:i[0],component:this.createFraction(i[1],i[2],i[3])}));s&&s.index<a;)s=DBLPlay.SCI_EXP_REG_EXP.exec(e);for(;i&&i.index<a;)i=n.exec(e)}return a<e.length&&this.createTextComponents(o,e.substr(a)),o},o);function o(){var e=t.call(this)||this;return e._lines=0,e._lastLineWidth=0,e._lastLineY=0,e._lastLineMaxHeight=0,e._maxLines=2,e._text="",e}e.ClosedCaptionText=i})(engagement_shared=engagement_shared||{}),(s=>{s.ERRORPOPUP_EVENT_OK="exit";var o,a=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.Error"),e=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),t=(o=createjs.Container,__extends(n,o),n.prototype.cleanup=function(){this._okButton.removeAllEventListeners(),this._okButton.cleanup()},n.prototype.resize=function(){this._background.scale=DBLGraphicUtils.getEffectiveScale(this)},n.prototype.onOkClick=function(){DBLAsset.playSound(e),this.dispatchEvent(s.ERRORPOPUP_EVENT_OK)},n);function n(e,t,n){var i=o.call(this)||this;i._background=new DBLScale9Container(DBLAsset.create("DBLAErrorBackground",a)),i._background.setSize(587,306,DBLGraphicUtils.getEffectiveScale(i)),i.addChild(i._background),i._okButton=new DBLTimelineButton(DBLAsset.create(s.BUTTON_DONE,s.BUTTON_BUNDLE)),i._okButton.scaleX=1.4,i._okButton.scaleY=1.4,i._okButton.x=283.5,i._okButton.y=180,i.addChild(i._okButton),i._okButton.addEventListener("click",i.onOkClick.bind(i));return i._text=new createjs.Text(e,t==DBLLog.FATAL?"32px arial":"20px arial","#ffffff"),i._text.lineWidth=487,i._text.textAlign="center",i._text.x=293.5,i._text.y=62-i._text.getMeasuredHeight()/2,i.addChild(i._text),t==DBLLog.FATAL&&(i._subtext=new createjs.Text("Error: "+n,"20px arial","#ffffff"),i._subtext.x=293.5,i._subtext.y=245,i._subtext.lineWidth=200,i._subtext.textAlign="center",i.addChild(i._subtext)),i.setBounds(0,0,587,306),i}s.ErrorPopup=t})(engagement_shared=engagement_shared||{}),(t=>{t.EXITPOPUP_EVENT_PLAY="play",t.EXITPOPUP_EVENT_EXIT="exit";var n,i=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.Exit"),e=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),s=537*(o=1.094),o=(n=createjs.Container,__extends(a,n),a.prototype.tickDOM=function(){this._yesButton.tickDOM(),this._noButton.tickDOM()},a.prototype.cleanup=function(){this._noButton.removeAllEventListeners(),this._noButton.cleanup(),this._yesButton.removeAllEventListeners(),this._yesButton.cleanup()},a.prototype.onPlayClick=function(){DBLAsset.playSound(e),this.dispatchEvent(t.EXITPOPUP_EVENT_PLAY)},a.prototype.onExitClick=function(){DBLAsset.playSound(e),this.dispatchEvent(t.EXITPOPUP_EVENT_EXIT)},a.prototype.getAccessibilityData=function(){return{tabIndex:0,type:"modaldialog",display:{object:this},labelObject:{id:"shellExitModal"},children:[__assign(__assign({},this._yesButton.getAccessibilityData()),{labelObject:{id:"shellExitYes"}}),__assign(__assign({},this._noButton.getAccessibilityData()),{labelObject:{id:"shellExitNo"}})],onEsc:null}},a);function a(){var e=n.call(this)||this;return e._background=new DBLScale9Container(DBLAsset.create("SCAExitBackground",i)),e._background.setSize(s,299.918,DBLGraphicUtils.getEffectiveScale(e)),e._background.y=25,e.addChild(e._background),e._title=DBLAsset.create("DBLAExitDreamboxTitle",i,{localizeSymbol:!0}),e._title.x=(s-e._title.getBounds().width)/2,e.addChild(e._title),e._yesButton=new DBLTimelineButton(DBLAsset.create(t.BUTTON_DONE,t.BUTTON_BUNDLE)),e._yesButton.scaleX=1.5,e._yesButton.scaleY=1.5,e._yesButton.x=169.57000000000002,e._yesButton.y=191.45000000000002,e.addChild(e._yesButton),e._yesButton.addEventListener("click",e.onExitClick.bind(e)),e._noButton=new DBLTimelineButton(DBLAsset.create(t.BUTTON_CANCEL,t.BUTTON_BUNDLE)),e._noButton.scaleX=1.5,e._noButton.scaleY=1.5,e._noButton.x=397.122,e._noButton.y=191.45000000000002,e.addChild(e._noButton),e._noButton.addEventListener("click",e.onPlayClick.bind(e)),e.setBounds(0,0,s,324.918),__domTestHooks&&(DBLTestUtil.createTestDOMElement(e._yesButton,"qaexityes",TEMP_TEST_DIV),DBLTestUtil.createTestDOMElement(e._noButton,"qaexitno",TEMP_TEST_DIV)),e}t.ExitPopup=o})(engagement_shared=engagement_shared||{}),(t=>{t.FEEDBACK_DIALOG_EVENT_SENT="sent",t.FEEDBACK_DIALOG_EVENT_CANCEL="cancel";var n,i=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.FeedbackDialog"),s=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),o=DBLRuntime.requireAudio("assets.audio.engagement.misc.FeedbackSent"),a=DBLRuntime.requireFont("assets.fonts.Corbel",DBLFont.BOLD),r=DBLRuntime.requireFont("assets.fonts.Verdana"),e=(DBLRuntime.requireLibrary("library.manipulativecore"),n=createjs.Container,__extends(l,n),l.prototype.drawScreen=function(e,t){e.getContext("2d").scale(t/dblDevicePixelRatio,t/dblDevicePixelRatio),backgroundStage!=lessonStage&&e.getContext("2d").drawImage(backgroundStage.canvas,0,0),spriteStage&&e.getContext("2d").drawImage(spriteStage.canvas,0,0),e.getContext("2d").drawImage(lessonStage.canvas,0,0),e.getContext("2d").drawImage(engagementStage.canvas,0,0),e.getContext("2d").scale(1/dblDevicePixelRatio,1/dblDevicePixelRatio)},l.prototype.doNothing=function(e){e.preventDefault()},l.prototype.handleAdded=function(e){this.removeAllEventListeners("added"),DBLCursor.setCursor(DBLCursor.AUTO),this._edit1.focus(!0)},l.prototype.handleRemoved=function(e){this.removeAllEventListeners("removed"),DBLCursor.setCursor(DBLCursor.AUTO)},l.prototype.cleanup=function(){this._sendButton.removeAllEventListeners(),this._cancelButton.removeAllEventListeners(),this._edit1.cleanup(),this._edit2.cleanup(),-1!=this._timeout&&clearTimeout(this._timeout)},l.prototype.tick=function(){this._edit1.tick(),this._edit2.tick()},l.prototype.resize=function(){this.redrawBackground(),this.resizeHolder()},l.prototype.redrawBackground=function(){this._background.graphics.clear(),this._background.graphics.beginFill(DBLGraphicUtils.convertColor(15725045)),this._background.graphics.drawRect(0,0,engagementStage.getBounds().width,engagementStage.getBounds().height),this._background.graphics.endFill()},l.prototype.resizeHolder=function(){this._holder.scaleX=this._holder.scaleY=lessonContent.scaleX,this._holder.x=engagementStage.getBounds().width/2-this._holder.getTransformedBounds().width/2},l.prototype.onEditChange=function(){this._sendButton.enabled=""!=this._edit1.text&&""!=this._edit2.text},l.prototype.onCancel=function(e){DBLAsset.playSound(s),this.dispatchEvent(t.FEEDBACK_DIALOG_EVENT_CANCEL)},l.prototype.onSend=function(e){DBLAsset.playSound(s),this._edit1.focus(!1),this._edit2.focus(!1),this._edit1.enabled=!1,this._edit1.visible=!1,this._edit2.visible=!1,this._edit2.enabled=!1,this._sendButton.enabled=!1,this._cancelButton.enabled=!1,this._sendingSign.visible=!0,this._timeout=setTimeout(this.afterShortDelay.bind(this),100)},l.prototype.afterShortDelay=function(){this._timeout=-1;var e=this._edit1.text,t=this._edit2.text,n=this._screenshotToSend.cacheCanvas;DBLError.sendFeedback(e,t,n,this.onFeedbackSent.bind(this))},l.prototype.onFeedbackSent=function(e){this._sendingSign.visible=!0,this._sentSign.visible=!0,DBLAsset.playSound(o),this._timeout=setTimeout(this.sentSignHoldComplete.bind(this),2e3)},l.prototype.sentSignHoldComplete=function(){this._timeout=-1,this.dispatchEvent(t.FEEDBACK_DIALOG_EVENT_SENT)},l.prototype.getAccessibilityChildren=function(){return[this._cancelButton.getAccessibilityData()]},l);function l(){var e=n.call(this)||this,t=(e._timeout=-1,e._background=new createjs.Shape,e.redrawBackground(),e.addChild(e._background),e.setBounds(0,0,engagementStage.getBounds().width,engagementStage.getBounds().height),e._holder=new createjs.Container,e._holder.setBounds(0,0,1024,768),e._header=DBLAsset.create("DBLAFeedbackHeader",i,{localizeSymbol:!0}),e._header.x=512-e._header.getTransformedBounds().width/2,e._header.y=6,e._holder.addChild(e._header),e._label1=new createjs.Text(translate("Subject:"),DBLFont.getFontString(a,24,DBLFont.BOLD),"#474B54"),e._label1.textBaseline="alphabet",e._label1.x=24,e._label1.y=92,e._holder.addChild(e._label1),e._backer1=DBLAsset.create("DBLAInputSubject",i),e._backer1.x=24+e._label1.getMeasuredWidth()+10,e._backer1.y=65,e._holder.addChild(e._backer1),e._edit1=new DBLTextArea(470,29,r,22,DBLFont.NORMAL,"#000",!1),e._edit1.x=e._backer1.x+5,e._edit1.y=70,e._edit1.addEventListener("change",e.onEditChange.bind(e)),e._holder.addChild(e._edit1),e._label2=new createjs.Text(translate("Feedback:"),DBLFont.getFontString(a,24,DBLFont.BOLD),"#474B54"),e._label2.textBaseline="alphabet",e._label2.x=24,e._label2.y=145,e._holder.addChild(e._label2),e._backer2=DBLAsset.create("DBLAInputFeedback",i),e._backer2.x=26,e._backer2.y=155,e._holder.addChild(e._backer2),e._edit2=new DBLTextArea(565,183,r,22,DBLFont.NORMAL,"#000"),e._edit2.x=32,e._edit2.y=160,e._edit2.addEventListener("change",e.onEditChange.bind(e)),e._holder.addChild(e._edit2),e._screenshotToSend=new createjs.Container,e._screenshotToSend.cache(0,0,360,270,1),e._screenshotToSend.cacheCanvas);return e.drawScreen(t,360/(1024*lessonContent.scaleX)),e._screenshotToDisplay=new createjs.Container,e._screenshotToDisplay.cache(0,0,360,270,lessonContent.scaleX),t=e._screenshotToDisplay.cacheCanvas,e.drawScreen(t,360*lessonContent.scaleX/(1024*lessonContent.scaleX)),e._screenshotToDisplay.x=640,e._screenshotToDisplay.y=134,"squiggly"!=engagement&&"bookworm"!=engagement&&e._holder.addChild(e._screenshotToDisplay),e._sendButton=new DBLTimelineButton(DBLAsset.create("DBLAButtonSend",i)),e._sendButton.x=718,e._sendButton.y=88,e._sendButton.addEventListener("click",e.onSend.bind(e)),e._sendButton.enabled=!1,e._holder.addChild(e._sendButton),e._cancelButton=new DBLTimelineButton(DBLAsset.create("DBLAButtonCancel",i)),e._cancelButton.x=920,e._cancelButton.y=88,e._cancelButton.addEventListener("click",e.onCancel.bind(e)),e._cancelButton.enabled=!0,e._holder.addChild(e._cancelButton),e.resizeHolder(),e.addChild(e._holder),e._sendingSign=DBLAsset.create("DBLAFeedbackIndicatorSending",i),e._sendingSign.x=512,e._sendingSign.y=384,e._sendingSign.text.text=translate("Sending feedback"),e._sendingSign.visible=!1,e._holder.addChild(e._sendingSign),e._sentSign=DBLAsset.create("DBLAFeedbackIndicatorSent",i),e._sentSign.x=512,e._sentSign.y=384,e._sentSign.text.text=translate("Feedback sent.\nThank you!"),e._sentSign.visible=!1,e._holder.addChild(e._sentSign),e.addEventListener("mousedown",e.doNothing.bind(e)),e.addEventListener("added",e.handleAdded.bind(e)),e.addEventListener("removed",e.handleRemoved.bind(e)),e}t.FeedbackDialog=e})(engagement_shared=engagement_shared||{}),(s=>{var t;function e(){var e=t.call(this)||this;return e._quickButtons={},e}t=createjs.Container,__extends(e,t),e.prototype.ready=function(){this._background=DBLAsset.create("DBLAFrameBottom",s.SHELL_BUNDLE),this.addChild(this._background),this._buttonBack=new DBLClipClassButton(DBLAsset.resolve("DBLANavButtonBack",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBack_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBack_Over",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBack_Disabled",s.SHELL_BUNDLE),!0,!1),this._buttonBack.name="buttonBack",this.addChild(this._buttonBack),this._buttonKeyboard=new DBLClipClassButton(DBLAsset.resolve("DBLAKeyboardButton_idle",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButton_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButton_Ove",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButton_Disabled",s.SHELL_BUNDLE),!0,!1),this._buttonKeyboard.name="buttonKeyboard",this.addChild(this._buttonKeyboard),this._separator=new createjs.Shape,this._separator.graphics.beginFill("#000000"),this._separator.graphics.drawRect(0,0,4,60),this._separator.graphics.endFill(),this._separator.visible=!1,this._separator.name="seperator",this._separator.setBounds(0,0,4,60),this.addChild(this._separator);for(var e=0,t=["pirates","pixies","pets","dinosaurs","themes"];e<t.length;e++){var n=t[e],i=DBLUtils.toFirstLetterUpper(n),i=new DBLClipClassButton(DBLAsset.resolve("DBLANavButton"+i+"_Up",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButton"+i+"_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButton"+i+"_Over",s.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButton"+i+"_Disabled",s.SHELL_BUNDLE),!0,!1);i.visible=!1,this.addChild(i),i.name="quickButton",this._quickButtons[n]=i}this._infoButton=new DBLClipClassButton(DBLAsset.resolve("DBLAInfoButton",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButton_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButton_Over",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButton_Disabled",s.SHELL_BUNDLE),!0,!1),this._infoButton.name="infoButton",this.addChild(this._infoButton),this._feedbackButton=new DBLClipClassButton(DBLAsset.resolve("DBLAFeedbackButton",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButton_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButton_Over",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButton_Disabled",s.SHELL_BUNDLE),!0,!1),this._feedbackButton.enabled=!0,this._feedbackButton.name="feedbackButton",this.addChild(this._feedbackButton),this._feedbackButtonNewMessages=new DBLClipClassButton(DBLAsset.resolve("DBLAFeedbackNewButton",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButton_Down",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButton_Over",s.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButton_Disabled",s.SHELL_BUNDLE),!0,!1),this._feedbackButtonNewMessages.enabled=!0,this._feedbackButtonNewMessages.name="feedbackButtonNewMessages",this._feedbackButtonNewMessages.visible=!1,this.addChild(this._feedbackButtonNewMessages),this.resize(),__domTestHooks&&(DBLTestUtil.createTestDOMElement(this._feedbackButton,"qafeedbackbutton",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(this._feedbackButtonNewMessages,"qafeedbackbuttonnotif",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(this._infoButton,"qainfobutton",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(this._buttonBack,"qabackbutton",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(this._buttonKeyboard,"qakeyboardbutton",PERM_TEST_DIV))},e.prototype.tick24=function(e){this._feedbackButtonNewMessages&&this._feedbackButtonNewMessages.visible&&this._feedbackButtonNewMessages.tick24(e),this._buttonKeyboard&&this._buttonKeyboard.enabled&&this._buttonKeyboard.tick24(e),__domTestHooks&&(this._feedbackButton.tickDOM(),this._feedbackButtonNewMessages.tickDOM(),this._infoButton.tickDOM(),this._buttonBack.tickDOM(),this._buttonKeyboard.tickDOM())},e.prototype.resize=function(){var e,t=engagementStage.getBounds().width;engagementStage.getBounds().height;for(e in this._background.scaleY=lessonContent.scaleX,this._background.scaleX=t/1024,this._buttonBack.scaleX=this._buttonBack.scaleY=lessonContent.scaleX,this._buttonBack.x=65*lessonContent.scaleX,this._buttonBack.y=52*lessonContent.scaleX,this._buttonKeyboard.scaleX=this._buttonKeyboard.scaleY=lessonContent.scaleX,this._buttonKeyboard.x=160*lessonContent.scaleX,this._buttonKeyboard.y=52*lessonContent.scaleX,this._separator.scaleX=this._separator.scaleY=lessonContent.scaleX,this._separator.x=207*lessonContent.scaleX,this._separator.y=20*lessonContent.scaleX,this._quickButtons){var n=this._quickButtons[e];n.scaleX=n.scaleY=lessonContent.scaleX,n.x=270*lessonContent.scaleX,n.y=52*lessonContent.scaleX}this._infoButton.scaleX=this._infoButton.scaleY=lessonContent.scaleX,this._infoButton.x=865*lessonContent.scaleX,this._infoButton.y=52*lessonContent.scaleX,this._feedbackButton.scaleX=this._feedbackButton.scaleY=lessonContent.scaleX,this._feedbackButton.x=960*lessonContent.scaleX,this._feedbackButton.y=52*lessonContent.scaleX,this._feedbackButtonNewMessages.scaleX=this._feedbackButtonNewMessages.scaleY=lessonContent.scaleX,this._feedbackButtonNewMessages.x=960*lessonContent.scaleX,this._feedbackButtonNewMessages.y=52*lessonContent.scaleX},Object.defineProperty(e.prototype,"infoEnabled",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"navBackButton",{get:function(){return this._buttonBack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyboardButton",{get:function(){return this._buttonKeyboard},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickReturnButtons",{get:function(){return this._quickButtons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infoButton",{get:function(){return this._infoButton},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"feedbackButton",{get:function(){return this._feedbackButton},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"feedbackButtonNewMessages",{get:function(){return this._feedbackButtonNewMessages},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){},e.prototype.getAccessibilityChildren=function(){var e;return[(null==(e=this._buttonBack)?void 0:e.parent)&&__assign(__assign({},this._buttonBack.getAccessibilityData()),{labelObject:{id:"shellBackButton"}}),(null==(e=this._buttonKeyboard)?void 0:e.parent)&&__assign(__assign({},this._buttonKeyboard.getAccessibilityData()),{labelObject:{id:"shellKeyboardButton"}}),(null==(e=this._infoButton)?void 0:e.parent)&&__assign(__assign({},this._infoButton.getAccessibilityData()),{labelObject:{id:"shellInfoButton"}}),(null==(e=this._feedbackButton)?void 0:e.parent)&&__assign(__assign({},this._feedbackButton.getAccessibilityData()),{labelObject:{id:"shellFeedbackButton"}})].filter(function(e){return!!e})},s.GenericBottomBar=e})(engagement_shared=engagement_shared||{}),(t=>{var n,i=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),e=(t.TOPBAR_EVENT_HELP="help",t.TOPBAR_EVENT_SKIP="skip",n=createjs.Container,__extends(s,n),Object.defineProperty(s.prototype,"enabled",{set:function(e){this._btnHelp.enabled=e,this._btnSkip.enabled=e},enumerable:!1,configurable:!0}),s.prototype.cleanup=function(){},s.prototype.onHelpClick=function(e){DBLAsset.playSound(i),this.dispatchEvent(new createjs.Event(t.TOPBAR_EVENT_HELP,!0,!0))},s.prototype.onSkipClick=function(e){DBLAsset.playSound(i),this.dispatchEvent(new createjs.Event(t.TOPBAR_EVENT_SKIP,!0,!0))},Object.defineProperty(s.prototype,"enableHelp",{get:function(){return this._btnHelp.enabled},set:function(e){this.enableHelpImmediate=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enableHelpImmediate",{set:function(e){this._btnHelp.enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enableSkip",{get:function(){return this._btnSkip.enabled},set:function(e){this.enableSkipImmediate=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enableSkipImmediate",{set:function(e){this._btnSkip.enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"showSkipButton",{get:function(){return this._skipMode},set:function(e){this.showSkipButtonImmediate=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"showSkipButtonImmediate",{set:function(e){this._skipMode=e,this._btnSkip.visible=e,this._btnHelp.visible=!e},enumerable:!1,configurable:!0}),s.prototype.highlightHelpPulse=function(){this._pulseOnce=!0,this.highlightHelp=!0},Object.defineProperty(s.prototype,"highlightHelp",{set:function(e){e?(this._highlightHelp||(this._highlightHelp=DBLAsset.create("DBLAHelpButtonCallout",t.SHELL_BUNDLE)),this.addChild(this._highlightHelp),this._highlightHelp.visible=!0,this._highlightHelp.x=-21,this._highlightHelp.y=-21):(this.removeChild(this._highlightHelp),this._highlightHelp=null)},enumerable:!1,configurable:!0}),s.prototype.tick24=function(){null!=this._highlightHelp&&(DBLAsset.advanceMovieClip(this._highlightHelp),this._pulseOnce)&&this._highlightHelp.currentFrame==this._highlightHelp.totalFrames-1&&(this._pulseOnce=!1,this.highlightHelp=!1),__domTestHooks&&(this._btnHelp.tickDOM(),this._btnSkip.tickDOM())},s.prototype.setHelpDownState=function(e){this._btnHelp.state=e?DBLBaseButton.STATE_DOWN:DBLBaseButton.STATE_UP,(this.highlightHelp=e)&&this._highlightHelp.gotoAndStop(s.HELP_HIGHLIGHT_FRAME_FOR_REPLAY)},Object.defineProperty(s.prototype,"skipButton",{get:function(){return this._btnSkip},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"helpButton",{get:function(){return this._btnHelp},enumerable:!1,configurable:!0}),s.prototype.getAccessibilityData=function(){return this._skipMode?{role:"button",display:{object:this._btnSkip},labelObject:{id:"shellSkipButton"}}:{role:"button",display:{object:this._btnHelp},labelObject:{id:"shellHelpButton"}}},s.HELP_HIGHLIGHT_FRAME_FOR_REPLAY=35,s);function s(){var e=n.call(this)||this;return e._pulseOnce=!1,e._btnHelp=new DBLClipClassButton(DBLAsset.resolve("DBLAHelpButton",t.SHELL_BUNDLE),DBLAsset.resolve("DBLAHelpButton_Down",t.SHELL_BUNDLE),DBLAsset.resolve("DBLAHelpButton_Over",t.SHELL_BUNDLE),DBLAsset.resolve("DBLAHelpButton_Disabled",t.SHELL_BUNDLE),!0,!1),e._btnHelp.addEventListener("click",e.onHelpClick.bind(e)),e.addChild(e._btnHelp),e._btnSkip=new DBLClipClassButton(DBLAsset.resolve("DBLASkipButton",t.SHELL_BUNDLE),DBLAsset.resolve("DBLASkipButton_Down",t.SHELL_BUNDLE),DBLAsset.resolve("DBLASkipButton_Over",t.SHELL_BUNDLE),DBLAsset.resolve("DBLASkipButton_Disabled",t.SHELL_BUNDLE),!0,!1),e._btnSkip.addEventListener("click",e.onSkipClick.bind(e)),e.addChild(e._btnSkip),e._btnSkip.enabled=!0,e._btnHelp.enabled=!1,e._btnSkip.enabled=!1,e._btnHelp.visible=!0,e._btnSkip.visible=!1,e._skipMode=!1,__domTestHooks&&(DBLTestUtil.createTestDOMElement(e._btnSkip,"qaskipbutton",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(e._btnHelp,"qahelpbutton",PERM_TEST_DIV)),e}t.HelpSkipButton=e})(engagement_shared=engagement_shared||{}),(e=>{e.INFOPOPUP_EVENT_BACK="play";var n,i=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.Info"),t=(replayMode||DBLRuntime.requireBundle("assets.bundles.engagement.primary.FeedbackDialog"),DBLRuntime.requireAudio("assets.audio.components.shared.Click")),s=653*(r=1.094),o=207*r,a=338*r,r=(n=createjs.Container,__extends(l,n),l.prototype.cleanup=function(){this._backButton.removeAllEventListeners(),this._backButton.cleanup()},l.prototype.resize=function(){this._background.scale=DBLGraphicUtils.getEffectiveScale(this)},l.prototype.onOkClick=function(){DBLAsset.playSound(t),this.dispatchEvent(e.INFOPOPUP_EVENT_BACK)},l.prototype.getAccessibilityData=function(){return{tabIndex:0,type:"modaldialog",display:{object:this},labelObject:{id:"shellInfoModal"},children:[__assign(__assign({},this._backButton.getAccessibilityData()),{labelObject:{id:"shellInfoClose"}})],onEsc:null}},l);function l(){var e=n.call(this)||this,t=(e._icon=DBLAsset.create("DBLAInfoIcon",i),e._background=new DBLScale9Container(DBLAsset.create("DBLAInfoBackground",i)),e._background.setSize(s-25,o-25,DBLGraphicUtils.getEffectiveScale(e)),e._background.x=25,e._background.y=25,e.addChild(e._background),e.addChild(e._icon),appVersion&&(t="Version: "+appVersion,e._label1=new createjs.Text(t,"22px arial, bold","#c9ddf0"),e._label1.x=a-e._label1.getBounds().width/2,e._label1.y=43.760000000000005,e.addChild(e._label1)),"Copyright © "+(new Date).getFullYear()+" Discovery Education, Inc. All Rights Reserved.");return e._label2=new createjs.Text(t,"18px arial, bold","#c9ddf0"),e._label2.x=a-e._label2.getBounds().width/2,e._label2.y=appVersion?76.58000000000001:60.17,e.addChild(e._label2),e._backButton=new DBLTimelineButton(DBLAsset.create("DBLAButtonBack_Blue",i)),e._backButton.x=369.77200000000005,e._backButton.y=153.16000000000003,e.addChild(e._backButton),e._backButton.addEventListener("click",e.onOkClick.bind(e)),e.setBounds(0,0,s,o),e}e.InfoPopup=r})(engagement_shared=engagement_shared||{}),(n=>{function e(e){this._externalButtons=[],this._keyPadView=e,this._keyPadView.addEventListener(n.KeyPadEvent.KEY_PRESS,this.onKeyPress.bind(this)),this._keyPadView.addEventListener(n.KeyPadEvent.MINIMIZE_PRESS,this.onMinimizePress.bind(this)),this._keyPadView.addEventListener(n.KeyPadEvent.FEEDBACK_PRESS,this.onFeedbackPress.bind(this)),this._keyCount=0,this._minimizeCount=0,this._restoreCount=0}DBLRuntime.requireLibrary("library.generatorcore"),e.prototype.cleanup=function(){this._keyPadView&&(this._keyPadView.removeAllEventListeners(n.KeyPadEvent.KEY_PRESS),this._keyPadView.removeAllEventListeners(n.KeyPadEvent.FEEDBACK_PRESS),this._keyPadView=null)},e.prototype.registerExternalButton=function(t,e){this._externalButtons.push(t),t.on("click",function(){return e(t).forEach(function(e){return t.dispatchEvent(new n.KeyPadEvent(n.KeyPadEvent.KEY_PRESS,e),!0)})}),t.on(n.KeyPadEvent.KEY_PRESS,this.onKeyPress.bind(this))},e.prototype.unregisterButton=function(t){this._externalButtons=this._externalButtons.filter(function(e){return e!=t})},e.prototype.shouldBlur=function(e){return!(this._keyPadView&&e.stageY/dblDevicePixelRatio>this._keyPadView.getTransformedBounds().y||this.hitTestExternalButtons(e.stageX,e.stageY))},e.prototype.focusIn=function(){var e=DBLTextInputFocusManager.getTextInputWithFocus();e.restrictKeys?(this.getKeyPadMinimized()||this._keyPadView.show(e.restrictKeys,e.restrictArray,e.keyPadLayoutOptions),shell.updateKeyboardButton()):DBLLog.log("missing restrict",DBLLog.ERROR)},e.prototype.focusOut=function(){this._keyPadView.hide(),shell.updateKeyboardButton()},e.prototype.onKeyPress=function(e){var t;e.charCode==DBLSoftKey.FLYOUT_OPERATION_KEYS.code?this._keyPadView.toggleFlyout():e.charCode==DBLSoftKey.FORMULAS_OPERATION_KEYS.code?this._keyPadView.toggleFormulas():((t=DBLTextInputFocusManager.getTextInputWithFocus())&&(t.simulateKeyPress(e.charCode),this._keyCount++),this._keyPadView.hideFlyout(),this._keyPadView.hideFormulas())},e.prototype.onMinimizePress=function(e){this._keyPadView.minimize(),shell.updateKeyboardButton(),this._minimizeCount++},e.prototype.onFeedbackPress=function(e){shell&&shell.showFeedbackDialog()},e.prototype.hitTestExternalButtons=function(n,i){return this._externalButtons.some(function(e){var t=e.globalToLocal(n,i);return e.getBounds().contains(t.x,t.y)})},e.prototype.getKeyPadMinimized=function(){return this._keyPadView.getKeyPadMinimized()},e.prototype.setKeyPadMinimized=function(e){this._keyPadView.setKeyPadMinimized(e)},e.prototype.popUpKeyPad=function(){var e=DBLTextInputFocusManager.getTextInputWithFocus();e?this._keyPadView.popUpKeyPad(e.restrictKeys,e.restrictArray,e.keyPadLayoutOptions):this._keyPadView.popUpKeyPad(null),this._restoreCount++,shell.updateKeyboardButton()},e.prototype.highlightKey=function(e,t){this._keyPadView.highlightKey(e,t)},e.prototype.getKeyStats=function(){return"softKeys="+this._keyCount+" minimize="+this._minimizeCount+" restore="+this._restoreCount},n.KeyPadController=e})(engagement_shared=engagement_shared||{}),(e=>{var s;function t(e,t,n,i){void 0===t&&(t=-1);e=s.call(this,e,n=void 0===n?!1:n,i=void 0===i?!1:i)||this;return e._charCode=t,e}s=createjs.Event,__extends(t,s),Object.defineProperty(t.prototype,"charCode",{get:function(){return this._charCode},enumerable:!1,configurable:!0}),t.KEY_PRESS="keyPress",t.MINIMIZE_PRESS="minimizePress",t.FEEDBACK_PRESS="feedbackPress",e.KeyPadEvent=t})(engagement_shared=engagement_shared||{}),(a=>{DBLRuntime.requireLibrary("library.manipulativecore");var r,t=DBLRuntime.requireAudio("assets.bundles.engagement.mobile.sounds.SFXKeyPadDown"),l=(a.BUNDLE=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.mobile.KeyboardSkin_2020"),DBLRuntime.requireFont("assets.fonts.Arial")),u=replayMode?"":DBLRuntime.requireFont("assets.fonts.Vollkorn-SBI"),e=(r=DBLBaseButton,__extends(d,r),d.prototype.cleanup=function(){this.killRepeatTimeout(),this._pressUpListener&&engagementStage.removeEventListener("pressup",this._pressUpListener)},d.prototype.handleUpState=function(){this._buttonArt.gotoAndStop("Up"),this._labelArt&&(this._labelArt.visible=!0,this._labelArtDown.visible=!1)},d.prototype.handleOverState=function(){this._buttonArt.gotoAndStop("Over"),this._labelArt&&(this._labelArt.visible=!0,this._labelArtDown.visible=!1)},d.prototype.handleDownState=function(){this._buttonArt.gotoAndStop("Down"),this._labelArt&&(this._labelArt.visible=!1,this._labelArtDown.visible=!0)},d.prototype.handleEnabledStateChange=function(){this.enabled?this.state==DBLBaseButton.STATE_OVER?this.handleOverState():this.handleUpState():(this._buttonArt.gotoAndStop("disabled"),this._labelArt&&(this._labelArt.visible=!0,this._labelArtDown.visible=!1)),r.prototype.handleEnabledStateChange.call(this)},d.prototype.doDraw=function(){this._buttonArt||(t=this.determineButtonClass(this._type),this._buttonArt=DBLAsset.create(t),this.addChildAt(this._buttonArt,0)),this._labelArt&&!this.contains(this._labelArt)&&(this.addChild(this._labelArt),this.addChild(this._labelArtDown),this._labelArtDown.visible=!1);var e,t=this._buttonArt.getTransformedBounds();t&&((e=new createjs.Shape).graphics.beginFill("#000"),e.graphics.drawRect(t.x,t.y,t.width,t.height),e.graphics.endFill(),this.hitArea=e),this.handleEnabledStateChange()},d.prototype.makeLabelArt=function(e,t){var n,i,s=0,o=0;return""===e?n=null:(n=new createjs.Container,i=void 0,(null==e?void 0:e.split("").some(function(e){return-1!=a.KeyPadLayout.LETTERS.indexOf(e)}))?(i=new createjs.Text(e,DBLFont.getFontString(u,28-(t?2:0),DBLFont.NORMAL),"#333333"),s=0):i=new createjs.Text(e,DBLFont.getFontString(l,28-(t?2:0)),"#333333"),o=-2,i.textAlign="center",i.textBaseline="alphabetic",n.addChild(i)),n&&(n.x=this.layoutWidth/2+s,n.y=.7*this.layoutHeight+o,t&&--n.y,n.cache(n.getBounds().x,n.getBounds().y,1.1*n.getBounds().width,n.getBounds().height,standardScale)),n},d.prototype.click=function(e){this._repeatable||this.dispatchKeyPress()},d.prototype.mouseDown=function(e){DBLAsset.playSound(t),this._repeatable&&(this.dispatchKeyPress(),this.addEventListener("rollout",this.rollOut.bind(this)),this.startRepeatDelay()),this._pressUpListener=engagementStage.addEventListener("stagemouseup",this.stageMouseUpAfterKeyDown.bind(this))},d.prototype.stageMouseUpAfterKeyDown=function(e){this._pressUpListener&&engagementStage.removeEventListener("stagemouseup",this._pressUpListener),this._repeatable&&(this.removeAllEventListeners("rollout"),this.removeAllEventListeners("rollover"),this.killRepeatTimeout())},d.prototype.rollOut=function(e){this.removeAllEventListeners("rollout"),this.addEventListener("rollover",this.rollOver.bind(this)),this.killRepeatTimeout()},d.prototype.rollOver=function(e){this.removeAllEventListeners("rollover"),this.addEventListener("rollout",this.rollOut.bind(this)),this.startRepeatDelay()},d.prototype.startRepeatDelay=function(){this.killRepeatTimeout(),this._timeout=setTimeout(this.repeat.bind(this),d.REPEAT_DELAY)},d.prototype.killRepeatTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0)},d.prototype.repeat=function(){this.dispatchKeyPress(),this._timeout=setTimeout(this.repeat.bind(this),d.TIME_BETWEEN_REPEATS)},d.prototype.dispatchKeyPress=function(){this.dispatchEvent(new a.KeyPadEvent(a.KeyPadEvent.KEY_PRESS,this._charCode,!0))},d.prototype.determineButtonClass=function(e){var t,n=DBLSoftKey.getKey(e,["type"]);if(null!=n&&null!=n.asset)return DBLAsset.resolveArtFromBundle(n.asset,a.BUNDLE);switch(e){case d.TYPE_TAB:t=DBLAsset.resolveArtFromBundle("DBLA_Tab_btn",a.BUNDLE);break;case d.TYPE_SPACE:t=DBLAsset.resolveArtFromBundle("DBLA_KeyBase_xl",a.BUNDLE);break;case d.TYPE_BACKSPACE:t=DBLAsset.resolveArtFromBundle("DBLA_Backspace_btn",a.BUNDLE);break;case d.TYPE_ARROW_LEFT:t=DBLAsset.resolveArtFromBundle("DBLA_ArrowL_btn",a.BUNDLE);break;case d.TYPE_ARROW_RIGHT:t=DBLAsset.resolveArtFromBundle("DBLA_ArrowR_btn",a.BUNDLE);break;case d.TYPE_OR:t=DBLAsset.resolveArtFromBundle("spanish"==language?"DBLA_Or_ES_btn":"DBLA_Or_btn",a.BUNDLE);break;default:t=DBLAsset.resolveArtFromBundle("DBLA_KeyBase_sm",a.BUNDLE)}return t},Object.defineProperty(d.prototype,"type",{get:function(){return this._type},set:function(e){this._type!=e&&(this._type=e,this.doDraw())},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"label",{get:function(){return this._label},set:function(e){this._label!=e&&(this._label=e,this._labelArt&&this.contains(this._labelArt)&&(this.removeChild(this._labelArt),this.removeChild(this._labelArtDown)),this._labelArt=this.makeLabelArt(this._label,!1),this._labelArtDown=this.makeLabelArt(this._label,!0),this.doDraw())},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"charCode",{get:function(){return this._charCode},set:function(e){this._charCode=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"repeatable",{get:function(){return this._repeatable},set:function(e){this._repeatable=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"showLabelWhenDisabled",{get:function(){return this._showLabelWhenDisabled},set:function(e){this._showLabelWhenDisabled!=e&&(this._showLabelWhenDisabled=e,this.doDraw())},enumerable:!1,configurable:!0}),d.prototype.highlight=function(e){e?this._buttonArt.gotoAndStop("Highlight"):(e=this.state,this.state=null,this.state=e)},Object.defineProperty(d.prototype,"layoutWidth",{get:function(){if(this._useAssetWidth&&this._buttonArt){var e=this._buttonArt.getTransformedBounds();if(e)return e.width}var t;switch(this._type){case d.TYPE_SPACE:case d.TYPE_FORMULA_AREA_TRAPEZOID:t=130;break;case d.TYPE_TAB:case d.TYPE_BACKSPACE:case d.TYPE_FORMULA_AREA_TRIANGLE:case d.TYPE_FORMULA_PERIM_RECTANGLE:t=72;break;default:t=52}return t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"layoutHeight",{get:function(){return 52},enumerable:!1,configurable:!0}),d.TYPE_CHAR_STANDARD="typeCharStandard",d.TYPE_CHAR_SPECIAL="typeCharSpecial",d.TYPE_FLYOUT=DBLSoftKey.FLYOUT_OPERATION_KEYS.type,d.TYPE_FORMULAS=DBLSoftKey.FORMULAS_OPERATION_KEYS.type,d.TYPE_BACKSPACE=DBLSoftKey.BACKSPACE.type,d.TYPE_ARROW_LEFT=DBLSoftKey.ARROW_LEFT.type,d.TYPE_ARROW_RIGHT=DBLSoftKey.ARROW_RIGHT.type,d.TYPE_OR=DBLSoftKey.OR.type,d.TYPE_SPACE="typeSpace",d.TYPE_TAB="typeTab",d.TYPE_FORMULA_AREA_TRIANGLE="typeAreaTriangle",d.TYPE_FORMULA_PERIM_RECTANGLE="typePerimRectangle",d.TYPE_FORMULA_AREA_TRAPEZOID="typeAreaTrapezoid",d.REPEAT_DELAY=700,d.TIME_BETWEEN_REPEATS=100,d);function d(e,t,n,i,s,o){void 0===e&&(e=d.TYPE_CHAR_STANDARD),void 0===t&&(t=0),void 0===n&&(n=""),void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===o&&(o=!1);var a=r.call(this)||this;return a.addEventListener("click",a.click.bind(a)),a.addEventListener("mousedown",a.mouseDown.bind(a)),a._type=e,a._charCode=t,a._label=n,a._labelArt=a.makeLabelArt(n,!1),a._labelArtDown=a.makeLabelArt(n,!0),a._showLabelWhenDisabled=i,a._useAssetWidth=o,a._repeatable=s,a.doDraw(),a}a.KeyPadKey=e})(engagement_shared=engagement_shared||{}),(u=>{var t,o=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.mobile.KeyboardSkin_2020"),e=(t=createjs.Container,__extends(_,t),_.prototype.init=function(){replayMode||(this.setupBackground(),this.setupMinimizeButton(),this.setupFeedbackButton(),this.setupContainer())},_.prototype.update=function(e,t,n){void 0===n&&(n={}),this._restrict==e&&this.arraysEqual(this._restrictArray,t)||(this._restrict=(e=[e,t,n])[0],this._restrictArray=e[1],this._options=e[2],this.updateRowKeys(),this.addKeys(),this.updateMinimizeButton(),this.updateFeedbackButton())},_.prototype.arraysEqual=function(n,i){return!(!n||!i||n.length!=i.length||n.some(function(e,t){return n[t]!=i[t]}))},_.prototype.setupBackground=function(){var e=DBLAsset.createArtFromBundle("DBLAKeyPadBackground",o);e.addEventListener("click",function(){}),e.addEventListener("mouseover",function(){}),this.addChild(e)},_.prototype.setupMinimizeButton=function(){var e=DBLAsset.createArtFromBundle("DBLA_HideKeyboard_btn",o);this._minimizeButton=new DBLTimelineButton(e),this._minimizeButton.name="minimize",this._minimizeButton.addEventListener("click",this.minimizeButton_click.bind(this)),this.updateMinimizeButton(),this.addChild(this._minimizeButton)},_.prototype.updateMinimizeButton=function(){this._minimizeButton.x=_.MINIMIZE_X,this._minimizeButton.y=this.determineTopRowButtonPoint()},_.prototype.setupFeedbackButton=function(){var e=DBLAsset.createArtFromBundle("DBLA_Feedback_btn",o);this._feedbackButton=new DBLTimelineButton(e),this._feedbackButton.name="feedback",this._feedbackButton.addEventListener("click",this.feedbackButton_click.bind(this)),this.updateFeedbackButton(),this.addChild(this._feedbackButton)},_.prototype.updateFeedbackButton=function(){this._feedbackButton.x=_.FEEDBACK_X,this._feedbackButton.y=this.determineTopRowButtonPoint()},_.prototype.determineTopRowButtonPoint=function(){return 1==this.getRowCount()?_.ROW_1_OFFSET_Y_1_ROW:_.ROW_1_OFFSET_Y_2_ROW},_.prototype.setupContainer=function(){this._keysContainer=new createjs.Container,this._keysContainer.name="container",this.addChild(this._keysContainer),this._flyoutInfo={display:{cont:null,scrim:null},config:{contName:"flyoutContainer",scrimName:"flyoutScrim",flyoutType:u.KeyPadKey.TYPE_FLYOUT,operatorKeys:[],activeBtnAsset:"DBLA_InputFlyout_Active",useAssetWidth:!1}},this.setupFlyoutDisplay(this._flyoutInfo.config,this._flyoutInfo.display),this._formulasInfo={display:{cont:null,scrim:null},config:{contName:"formulasContainer",scrimName:"formulasScrim",flyoutType:u.KeyPadKey.TYPE_FORMULAS,operatorKeys:[],activeBtnAsset:"DBLA_FormulasFlyout_Active",useAssetWidth:!0}},this.setupFlyoutDisplay(this._formulasInfo.config,this._formulasInfo.display)},_.prototype.setupFlyoutDisplay=function(e,t){t.scrim=DBLAsset.createArtFromBundle("FlyoutOverlay",o),t.scrim.addEventListener("click",this.hideFlyout.bind(this,e.flyoutType)),t.scrim.visible=!1,t.scrim.name=e.scrimName,this.addChild(t.scrim),t.cont=new createjs.Container,t.cont.visible=!1,t.cont.name=e.contName,this.addChild(t.cont)},_.prototype.filteredKeyArray=function(e){var t=this;return e.filter(function(e){return t._restrictArray&&-1!=t._restrictArray.indexOf(e)})},_.prototype.filteredCharacterArray=function(e){return DBLStringUtils.restrictCharacters(e,this._restrict).split("")},Object.defineProperty(_.prototype,"keyPadKeys",{get:function(){return this._keysContainer?this._keysContainer.children.filter(function(e){return e instanceof u.KeyPadKey}):[]},enumerable:!1,configurable:!0}),_.prototype.highlightKey=function(t,e){var n=this.keyPadKeys.filter(function(e){return e.charCode==t});1==n.length?n[0].highlight(e):DBLLog.log("No key matches charCode ".concat(t,"."),DBLLog.ERROR)},_.prototype.getRowCount=function(){return 0!=this.filteredCharacterArray(_.LETTERS).length&&!this._options.forceLettersOnFirstRow||0!=this.filteredCharacterArray(_.SPACE).length||0!=this.filteredCharacterArray(_.OTHER).length||0!=this.filteredKeyArray(_.ARROW_KEYS).length||0!=this.filteredKeyArray(_.MULTDIV_KEYS).length||0!=this.filteredKeyArray(_.COMPARISON_KEYS).length||0!=this.filteredKeyArray(_.OR_KEYS).length||0!=this.filteredKeyArray(_.SPECIAL_CONSTANT_KEYS).length?2:1},_.prototype.updateRowKeys=function(){var t,e=this.getRowCount(),n=this._firstRowKeys=[],i=this._secondRowKeys=[],s=this._flyoutInfo.config.operatorKeys=[],o=this._formulasInfo.config.operatorKeys=[];s.push.apply(s,this.filteredKeyArray(_.FLYOUT_OPERATION_KEYS)),o.push.apply(o,this.filteredKeyArray(_.FORMULAS_OPERATION_KEYS)),1==e?(n.push.apply(n,this.filteredCharacterArray(_.FIRST_ROW_SPECIAL)),n.push.apply(n,this.filteredKeyArray(_.FIRST_ROW_OPERATOR_KEYS)),n.push.apply(n,this.filteredCharacterArray(_.FIRST_ROW_OPERATORS)),n.push.apply(n,this.filteredCharacterArray(_.DIGITS)),0<s.length&&n.push(DBLSoftKey.FLYOUT_OPERATION_KEYS),0<o.length&&n.push(DBLSoftKey.FORMULAS_OPERATION_KEYS),n.push.apply(n,this.filteredCharacterArray(_.LETTERS))):(n.push.apply(n,this.filteredCharacterArray(_.FIRST_ROW_SPECIAL)),n.push.apply(n,this.filteredCharacterArray(_.DIGITS)),i.push.apply(i,this.filteredKeyArray(_.ARROW_KEYS)),this._options.useFormulaLettersLayout&&i.push.apply(i,this.filteredCharacterArray(_.UPPERCASE_LETTERS)),i.push.apply(i,this.filteredKeyArray(_.FIRST_ROW_OPERATOR_KEYS)),i.push.apply(i,this.filteredCharacterArray(_.FIRST_ROW_OPERATORS)),i.push.apply(i,this.filteredKeyArray(_.MULTDIV_KEYS)),i.push.apply(i,this.filteredKeyArray(_.COMPARISON_KEYS)),i.push.apply(i,this.filteredCharacterArray(_.OTHER)),this._options.useFormulaLettersLayout&&i.push.apply(i,this.filteredCharacterArray(_.LOWERCASE_LETTERS)),i.push.apply(i,this.filteredKeyArray(_.SPECIAL_CONSTANT_KEYS)),0<s.length&&i.push(DBLSoftKey.FLYOUT_OPERATION_KEYS),0<o.length&&i.push(DBLSoftKey.FORMULAS_OPERATION_KEYS),i.push.apply(i,this.filteredKeyArray(_.OR_KEYS)),this._options.useFormulaLettersLayout||(e=this._options.forceLettersOnFirstRow?n:i,s=this.filteredKeyArray(_.MULTI_LETTER_KEYS),t=s.map(function(e){return e.physicalKeyMapping}),o=this.filteredCharacterArray(_.LETTERS),0<t.length&&(o=o.filter(function(e){return-1==t.indexOf(e)})),e.push.apply(e,o),e.push.apply(e,s)),i.push.apply(i,this.filteredCharacterArray(_.SPACE))),n.push(DBLSoftKey.BACKSPACE)},_.prototype.createKeysRow=function(e,t,n,i,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);for(var a=[],r=0,l=t;r<l.length;r++){var u=l[r];(d=this.makeKey(e,this.getType(u),this.getCode(u),this.getLabel(u),!1,n,i,!1,o)).enabled=!0,n+=d.layoutWidth+_.SPACE_BETWEEN_KEYS,a.push(d)}if(s)for(var d,c=0,h=a;c<h.length;c++)(d=h[c]).x+=(1024-n)/2},_.prototype.addKeys=function(){this._keysContainer.removeAllChildren();var e=0<this._secondRowKeys.length?_.ROW_1_OFFSET_Y_2_ROW:_.ROW_1_OFFSET_Y_1_ROW;this.createKeysRow(this._keysContainer,this._firstRowKeys,0,e),this.createKeysRow(this._keysContainer,this._secondRowKeys,0,_.ROW_2_OFFSET_Y_2_ROW),this.createFlyoutMenu(this._flyoutInfo),this.createFlyoutMenu(this._formulasInfo)},_.prototype.flyoutButton=function(t){return this._keysContainer.children.filter(function(e){return e instanceof u.KeyPadKey&&e.type==t}).pop()},_.prototype.createFlyoutMenu=function(e){this._flyoutType2Display[e.config.flyoutType]=e.display,e.display.cont.removeAllChildren();var t,n,i,s=this.flyoutButton(e.config.flyoutType);s&&(t=new DBLScale9Container(DBLAsset.create("DBLA_KeyboardFlyout",o)),this.createKeysRow(e.display.cont,e.config.operatorKeys,s.x,12,!1,e.config.useAssetWidth),i=e.display.cont.getBounds(),t.setSize(i.width+20,i.height+20,1),t.x=s.x-10,t.y=2,e.display.cont.x=-i.width/2+s.layoutWidth/2,(n=DBLAsset.create(e.config.activeBtnAsset,o)).x=s.x-e.display.cont.x,n.y=s.y,n.mouseChildren=n.mouseEnabled=!1,0<(i=s.x+i.width/2+20+s.layoutWidth/2-1024)&&(e.display.cont.x-=i,n.x+=i),e.display.cont.addChild(n),e.display.cont.addChildAt(t,0))},_.prototype.toggleFlyout=function(e){var t=this._flyoutType2Display[e],e=this.flyoutButton(e);e&&(t.scrim.visible=t.cont.visible=!t.cont.visible,e.alpha=t.cont.visible?0:1)},_.prototype.hideFlyout=function(e){var t=this._flyoutType2Display[e],e=this.flyoutButton(e);e&&(t.scrim.visible=t.cont.visible=!1,e.alpha=t.cont.visible?0:1)},_.prototype.getType=function(e){if("string"!=typeof e)return e.type;switch(e){case" ":return u.KeyPadKey.TYPE_SPACE;case"\t":return u.KeyPadKey.TYPE_TAB;default:return 1==e.length?u.KeyPadKey.TYPE_CHAR_STANDARD:(DBLLog.log('No type assigned to special char "'.concat(e,'"'),DBLLog.ERROR),u.KeyPadKey.TYPE_CHAR_SPECIAL)}},_.prototype.getCode=function(e){return"string"==typeof e?e.charCodeAt(0):e.code},_.prototype.getLabel=function(e){return"string"==typeof e?e:e.softKeyPadLabel},_.prototype.makeKey=function(e,t,n,i,s,o,a,r,l){t=new u.KeyPadKey(t,n,i,r,s,l);return t.x=o,t.y=a,t.name="key '"+i+"'/"+n,e.addChild(t),t},_.prototype.minimizeButton_click=function(e){this.dispatchEvent(new u.KeyPadEvent(u.KeyPadEvent.MINIMIZE_PRESS,-1,!0))},_.prototype.feedbackButton_click=function(e){this.dispatchEvent(new u.KeyPadEvent(u.KeyPadEvent.FEEDBACK_PRESS,-1,!0))},_.SPACE_BETWEEN_KEYS=8,_.ROW_1_OFFSET_Y_1_ROW=16,_.ROW_1_OFFSET_Y_2_ROW=10,_.ROW_2_OFFSET_Y_2_ROW=72,_.MINIMIZE_X=13,_.FEEDBACK_X=961,_.DIGITS="1234567890",_.FIRST_ROW_OPERATORS="+-",_.FIRST_ROW_SPECIAL="\t$%°.:,",_.OTHER="×÷/=<>()^|[]{}!?\"';`@#&_~",_.LETTERS=(_.LOWERCASE_LETTERS="abcdefghijklmnopqrstuvwxyz")+(_.UPPERCASE_LETTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),_.SPACE=" ",_.FLYOUT_OPERATION_KEYS=[DBLSoftKey.SQUARE,DBLSoftKey.CUBE,DBLSoftKey.EXPONENT,DBLSoftKey.ABSOLUTE_VALUE,DBLSoftKey.PARENS,DBLSoftKey.SQUARE_ROOT,DBLSoftKey.NTH_ROOT,DBLSoftKey.FRACTION],_.FORMULAS_OPERATION_KEYS=[DBLSoftKey.FORMULA_AREA_RECT,DBLSoftKey.FORMULA_PERIM_RECT,DBLSoftKey.FORMULA_AREA_PARALLELOGRAM,DBLSoftKey.FORMULA_AREA_TRIANGLE,DBLSoftKey.FORMULA_AREA_TRAPEZOID,DBLSoftKey.FORMULA_AREA_CIRCLE,DBLSoftKey.FORMULA_PERIM_CIRC,DBLSoftKey.FORMULA_PERIM_CIRC2],_.FIRST_ROW_OPERATOR_KEYS=[DBLSoftKey.PLUS,DBLSoftKey.MINUS],_.ARROW_KEYS=[DBLSoftKey.ARROW_LEFT,DBLSoftKey.ARROW_RIGHT],_.MULTDIV_KEYS=[DBLSoftKey.MULTIPLICATION,DBLSoftKey.DIVISION],_.COMPARISON_KEYS=[DBLSoftKey.EQ,DBLSoftKey.LT,DBLSoftKey.GT,DBLSoftKey.LE,DBLSoftKey.GE],_.OR_KEYS=[DBLSoftKey.OR,DBLSoftKey.PLUSMINUS],_.SPECIAL_CONSTANT_KEYS=[DBLSoftKey.PI],_.MULTI_LETTER_KEYS=[DBLSoftKey.SA],_);function _(){var e=t.call(this)||this;return e._options={},e._flyoutType2Display={},e.name="layout",e}u.KeyPadLayout=e})(engagement_shared=engagement_shared||{}),(e=>{var t;function n(){var e=t.call(this)||this;return e._currentTween=null,e._minimized=replayMode,e.mouseChildren=!1,e.visible=!1,e.name="keypad",e.setupLayout(),engagementStage.addChild(e),e.resize(),e}replayMode||DBLRuntime.requireBundle("assets.bundles.engagement.mobile.KeyboardSkin_2020"),t=createjs.Container,__extends(n,t),n.prototype.resize=function(){this.scaleX=lessonContent.scaleX,this.scaleY=lessonContent.scaleY},n.prototype.cleanup=function(){this.clearHideTimeout(),this._layout&&(this._layout.removeAllEventListeners(),this._layout=null)},n.prototype.clearHideTimeout=function(){this._keyPadHideTimeout&&(clearTimeout(this._keyPadHideTimeout),this._keyPadHideTimeout=void 0)},n.prototype.toggleFlyout=function(){this._layout.toggleFlyout(e.KeyPadKey.TYPE_FLYOUT)},n.prototype.hideFlyout=function(){this._layout.hideFlyout(e.KeyPadKey.TYPE_FLYOUT)},n.prototype.toggleFormulas=function(){this._layout.toggleFlyout(e.KeyPadKey.TYPE_FORMULAS)},n.prototype.hideFormulas=function(){this._layout.hideFlyout(e.KeyPadKey.TYPE_FORMULAS)},n.prototype.highlightKey=function(e,t){this._layout.highlightKey(e,t)},n.prototype.show=function(e,t,n){void 0===n&&(n={}),this.clearHideTimeout(),this._currentTween&&(this._currentTween.kill(),this._currentTween=null),this._layout.update(e,t,n),this._visiblePosition=this.determineVisiblePosition(),this.visible&&this.isCompletelyVisible?this.onShowKeypadComplete():(this.visible=!0,this._minimized||this.popUpKeyboard())},n.prototype.popUpKeyboard=function(){engagementStage.addChild(this),this._visiblePosition=this.determineVisiblePosition();var e=(this._layout.y-this._visiblePosition)/(n.HIDDEN_POSITION_Y-this._visiblePosition);this._currentTween=gsap.TweenLite.to(this._layout,e*n.KEYPAD_TWEEN_TIME,{y:this._visiblePosition,onComplete:this.onShowKeypadComplete.bind(this)})},n.prototype.determineVisiblePosition=function(){return 1==this._layout.getRowCount()?n.VISIBLE_POSITION_Y_1_ROW:2==this._layout.getRowCount()?n.VISIBLE_POSITION_Y_2_ROW:void 0},n.prototype.onShowKeypadComplete=function(){this.isCompletelyVisible||(this._layout.y=this._visiblePosition),this.mouseChildren=!0,this._currentTween=null},n.prototype.setupLayout=function(){this._layout=new e.KeyPadLayout,this._layout.init(),this._layout.y=n.HIDDEN_POSITION_Y,this.addChild(this._layout)},n.prototype.hide=function(){this.mouseChildren=!1,this.clearHideTimeout(),this._keyPadHideTimeout=setTimeout(this.onHideKeypadDelayComplete.bind(this),n.KEYPAD_HIDE_DELAY_TIME)},n.prototype.hideImmediate=function(){this.onHideKeypadDelayComplete()},n.prototype.onHideKeypadDelayComplete=function(){var e;this._keyPadHideTimeout=void 0,!this._minimized&&this._layout&&this._layout.y!=n.HIDDEN_POSITION_Y&&(e=Math.max(0,(n.HIDDEN_POSITION_Y-this._layout.y)/(n.HIDDEN_POSITION_Y-this._visiblePosition)),this._currentTween=gsap.TweenLite.to(this._layout,e*n.KEYPAD_TWEEN_TIME,{y:n.HIDDEN_POSITION_Y,onComplete:this.onHideKeypadComplete.bind(this)}))},n.prototype.onHideKeypadComplete=function(){this._currentTween=null,this.visible=!1},Object.defineProperty(n.prototype,"isCompletelyVisible",{get:function(){return this._layout.y==this._visiblePosition},enumerable:!1,configurable:!0}),n.prototype.isInTheProcessOfHiding=function(){return null!=this._keyPadHideTimeout||null!=this._currentTween},n.prototype.minimize=function(){var e;this._minimized||(this._minimized=!0,e=Math.max(0,(n.HIDDEN_POSITION_Y-this._layout.y)/(n.HIDDEN_POSITION_Y-this._visiblePosition)),this._currentTween=gsap.TweenLite.to(this._layout,e*n.KEYPAD_TWEEN_TIME,{y:n.HIDDEN_POSITION_Y,onComplete:this.onMinimizeKeypadDropComplete.bind(this)}))},n.prototype.onMinimizeKeypadDropComplete=function(){this._currentTween=null},n.prototype.getKeyPadMinimized=function(){return this._minimized},n.prototype.setKeyPadMinimized=function(e){this._minimized=e},n.prototype.popUpKeyPad=function(e,t,n){e&&this._layout.update(e,t,n),this._minimized=!1,this.visible=!0,this.popUpKeyboard()},n.KEYPAD_HIDE_DELAY_TIME=250,n.KEYPAD_TWEEN_TIME=.3,n.VISIBLE_POSITION_Y_1_ROW=682,n.VISIBLE_POSITION_Y_2_ROW=638,n.HIDDEN_POSITION_Y=768,n.TAB_TWEEN_TIME=.3,e.KeyPadView=n})(engagement_shared=engagement_shared||{}),(e=>{e.KEYBOARD_INFOPOPUP_EVENT_BACK="play";var i,a=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.shared.KeyboardNavDisplay"),s=DBLRuntime.requireBundle("assets.bundles.lessons.shared.ButtonsShared"),t=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),n=(i=createjs.Container,__extends(o,i),o.prototype.getTextAssetId=function(e){e=e.length;return e<=10?"txt_Small":e<=40?"txt_Medium":"txt_Long"},o.prototype.getKeyAssetIdAndWidth=function(e){e=e.length;return e<=3?{id:"img_KeySmall",width:52}:e<=6?{id:"img_KeyMedium",width:72}:e<=10?{id:"img_KeyLarge",width:113}:{id:"img_KeyExtraLarge",width:163}},o.prototype.parseLine=function(e){for(var t,n=[],i=/<([^>]+)>/g,s=0;null!==(t=i.exec(e));){var o=t.index,o=(s<o&&(o=e.substring(s,o),n.push({type:"text",content:o})),t[1]);n.push({type:"key",content:o}),s=i.lastIndex}return s<e.length&&n.push({type:"text",content:e.substring(s)}),n},o.prototype.createLineContainer=function(e){var i=this,s=new createjs.Container,e=this.parseLine(e),o=0;return e.forEach(function(e){var t,n;e.content&&""!==e.content.trim()&&("text"===e.type?(t=i.getTextAssetId(e.content),(t=DBLAsset.create(t,a)).lblText.text=e.content,e.content.trim().length<2&&(o-=7),t.x=o,t.y=0,s.addChild(t),o+=t.lblText.x+t.lblText.getMeasuredWidth()):"key"===e.type&&("group"===e.content?(i._groupRepresentation.x=o,i._groupRepresentation.y=0,s.addChild(i._groupRepresentation),o+=i._groupRepresentation.getBounds().width):(t=i.getKeyAssetIdAndWidth(e.content),(n=DBLAsset.create(t.id,a)).lblText.text=e.content,n.x=o,n.y=0,s.addChild(n),o+=t.width)))}),s},o.prototype.createBackground=function(e){this._background=DBLAsset.create("DBLAToolHelpMainModule",a),this._background.ToolHelpText.text=translate("Keyboard Info");for(var t=0;t<e.length&&!(6<=t);t++){var n="lct_line0".concat(t+1),i=e[t],i=this.createLineContainer(i),n=this._background[n];n&&(i.x=n.x,i.y=n.y),this._background.addChild(i)}this.addChild(this._background)},o.prototype.cleanup=function(){this._backButton.removeAllEventListeners(),this._backButton.cleanup()},o.prototype.resize=function(){},o.prototype.onOkClick=function(){DBLAsset.playSound(t),this.dispatchEvent(e.KEYBOARD_INFOPOPUP_EVENT_BACK)},o.prototype.getAccessibilityData=function(){return{tabIndex:0,type:"modaldialog",display:{object:this},labelObject:{id:"shellKeyboardInfo"},children:[{role:"heading1",display:{object:this._background.ToolHelpText},labelObject:{id:"shellKeyboardInfo"},tabIndex:-1},__assign(__assign({},this._backButton.getAccessibilityData()),{labelObject:{id:"shellKeyboardInfoClose"}})],onEsc:function(){return a11y.closeDialog()}}},o);function o(){var e=i.call(this)||this,t=(e._groupRepresentation=DBLAsset.create("img_FocusGroup",a),e.createBackground(["Use <space bar> or <enter>  to interact with something.","Use <tab> or <shift> + <tab> to move around the screen.","Use <←> <↑> and <→> <↓> to move inside a group <group>","Use <esc> to exit an action.","Use <del> to remove an object."].map(function(e){return translate(e)})),e._background.getBounds()),n=(t&&(t.width+=-40),lessonContent.getBounds()),n=(t&&n&&(e._background.x=(n.width-t.width)/2,e._background.y=(n.height-t.height)/2),e._backButton=new DBLTimelineButton(DBLAsset.resolve("DBLAButtonContinuePopUp",s)),e.addChild(e._backButton),e._backButton.addEventListener("click",e.onOkClick.bind(e)),e._backButton.getBounds());return t&&n&&(e._backButton.x=e._background.x+t.width/2,e._backButton.y=e._background.y+t.height-n.height),e.setBounds(0,0,t.width,t.height),e}e.KeyboardInfoPopup=n})(engagement_shared=engagement_shared||{}),(e=>{e.LessonFeedbackQuestions={HINTS:"The tasks and hints in this lesson were clear.",MATH:"The lesson helped me understand more.",TOOLS:"The tools in this lesson were easy to use.",LOOK:"I liked the look and feel of the lesson."},e.StudentEnjoymentQuestions={GOALS:"I understand the learning goals of DreamBox.",FEEDBACK:"I receive the feedback I need to succeed.",ENCOURAGED:"I am encouraged by the improvement of my skills.",GRAPHICS:"I liked the graphics and images of DreamBox.",FUN:"I had fun while playing DreamBox.",SMARTER:"DreamBox makes me feel like I can get smarter.",HARDER:"You can get smarter if you work harder.",LEARN:"DreamBox makes me feel like I can learn hard things."},e.GatesStudentEnjoymentQuestions={preview_finish:"I can finish this lesson",preview_worried:"This lesson makes me feel worried",banners_finish:"I can finish this lesson",banners_fun:"This lesson looks fun",repeat_confident:"I feel more confident about math after this lesson",repeat_worried:"I feel less worried about math after this lesson",world_excited:"This lesson makes me excited to learn math",world_useful:"This lesson will be useful for me"}})(engagement_shared=engagement_shared||{}),(e=>{DBLRuntime.requireAudio("assets.bundles.engagement.shared.sounds.SFXSubmit"),e.QuestionBlockData=function(e,t,n){this.questionBlock=e,this.questionsData=t,this.buttons=n},(n=t=e.LessonFeedbackEvents||(e.LessonFeedbackEvents={})).SUBMIT_CLOSE="submitClose",n.DISMISS_CLOSE="dismissClose",(n=e.RatingLocations||(e.RatingLocations={})).PERCENT_AFTER_LESSON="Percent after lesson ends.",n.OPT_IN_FROM_LESSON_END="Opt-in from LessonEnd screen.",n.PERCENT_ON_EARLY_EXIT="Percent after lesson abandoned.",n.PERCENT_ENTER_CHOOSER="Percent on enter Chooser.",(n=e.GatesRatingLocations||(e.GatesRatingLocations={})).pre_preview="Gates Lesson Preview Pre-Student Survey",n.pre_banners="Gates Lesson Banner Pre-Student Survey",n.pre_repeat="Gates Repeat Missed Problems Pre-Student Survey",n.pre_world="Gates Real World Pre-Student Survey",n.preview="Gates Lesson Preview Post Launch Student Survey",n.banners="Gates Lesson Banner Post Launch Survey",n.repeat="Gates Repeat Missed Problems Post Launch Student Survey",n.world="Gates Real World Post Launch Student Survey",i=createjs.Container,__extends(s,i),Object.defineProperty(s.prototype,"location",{get:function(){return this._initLocation},enumerable:!1,configurable:!0}),s.prototype.onSubmit=function(){this.mouseEnabled=!1,this.mouseChildren=!1,this._submitButton.enabled=!1,this.stopSpeaker();var e={ratings:this._questionsData.map(function(e){return{question:e.questionId,score:e.score}}),location:this._initLocation,dismissed:!1,lessonId:this._selectedLessonId};DBLEngagementManager.sendLessonFeedback(e),this.dispatchEvent(t.SUBMIT_CLOSE)},s.prototype.onExit=function(){var e;this.stopSpeaker(),this._sendDataOnDismiss&&(e={location:this._initLocation,dismissed:!0,lessonId:this._selectedLessonId},DBLEngagementManager.sendLessonFeedback(e)),this.dispatchEvent(t.DISMISS_CLOSE)},s.prototype.startSpeaker=function(){var t=this,n=(fastForwardPause(),this.toggleSpeakerAndSkipButtons(!1),this._activeSpeakerItems=this._speakerItems.concat(),__ff=function(){__ff=null,t._activeSpeakerItems=[],DBLPlay.fastForwardPlay(),t._speakerItems.forEach(function(e){e.block.gotoAndStop("Default"),e.fields.forEach(function(e){return e.color=t.TEXT_COLOR.DEFAULT})}),t.toggleSpeakerAndSkipButtons(!0)},function(){var e=t._activeSpeakerItems.shift();e&&!fastForwarding?(e.block.gotoAndStop("Highlight"),e.fields.forEach(function(e){return e.color=t.TEXT_COLOR.HIGHLIGHT}),DBLPlay.play(e.text,function(){pause(t.SPEAKER_PAUSE_TIME,function(){e.block.gotoAndStop("Default"),e.fields.forEach(function(e){return e.color=t.TEXT_COLOR.DEFAULT}),n()})})):t.toggleSpeakerAndSkipButtons(!0)});n()},s.prototype.stopSpeaker=function(){"function"==typeof __ff&&__ff.call(__ffObj)},s.prototype.toggleSpeakerAndSkipButtons=function(e){this._speakerButton.enabled=e,this._speakerButton.visible=e,this._skipButton.enabled=!e,this._skipButton.visible=!e},s.prototype.getAccessibilityData=function(){var i=this,t=[],e=this._speakerButton.getAccessibilityData(),e=(e.labelObject={id:"replayIconLabel"},t.push(e),this._exitButton.getAccessibilityData());return e.labelObject={id:"exitButtonLabel"},t.push(e),this._questionBlocksData.forEach(function(n){var e=[n.questionBlock.btnRadio1,n.questionBlock.btnRadio2,n.questionBlock.btnRadio3,n.questionBlock.btnRadio4].map(function(e,t){return{role:"radio",display:{object:e},label:i.BUTTON_LABELS[t],enabled:!0,onSubmit:function(){i.mouseEnabled&&i.onRate(n.questionsData.questionId,t+1,n.buttons[t])},focus:{boundsDisplayObject:e}}});t.push({role:"group",display:{object:n.questionBlock},labelObject:{id:"lessonFeedbackQuestionLabel",params:{question:n.questionsData.question}},children:e})}),this._submitButton.enabled&&((e=this._submitButton.getAccessibilityData()).labelObject={id:"lessonFeedbackSubmitBtnLabel"},t.push(e)),{type:"modaldialog",display:{object:this._background},tabIndex:-1,visible:(null==(e=this._background)?void 0:e.visible)&&this.visible,children:t,onEsc:function(){return i.onExit()}}};var t,i,n=s;function s(e,t){var n=i.call(this)||this;return n.SPEAKER_PAUSE_TIME=1500,n.TEXT_COLOR={DEFAULT:"#000000",HIGHLIGHT:"#FFFFFF"},n._questionBlocksData=[],n._buttons={},n._speakerItems=[],n._activeSpeakerItems=[],n._sendDataOnDismiss=!0,n._sendDataOnDismiss=e,n._initLocation=t,n}e.LessonFeedbackDialogBase=n})(engagement_shared=engagement_shared||{}),(i=>{var n,s=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.shared.FeedbackFeature"),u=replayMode?"":DBLRuntime.requireFont("assets.fonts.MontrealSerial"),d=replayMode?"":DBLRuntime.requireFont("assets.fonts.MontrealSerial",DBLFont.MEDIUM),o=replayMode?"":DBLRuntime.requireFont("assets.fonts.MontrealSerial",DBLFont.BOLD),c=DBLRuntime.requireAudio("assets.bundles.engagement.shared.sounds.SFXClick"),h=DBLRuntime.requireAudio("assets.bundles.engagement.shared.sounds.SFXRollover"),a=DBLRuntime.requireAudio("assets.bundles.engagement.shared.sounds.SFXSubmit"),e=(n=i.LessonFeedbackDialogBase,__extends(t,n),Object.defineProperty(t.prototype,"location",{get:function(){return this._initLocation},enumerable:!1,configurable:!0}),t.prototype.setupBackgroundAndTitle=function(){this._background=DBLAsset.create("FeedbackModalAst",s),this._background.gotoAndStop(0),DBLAsset.setNameAndBounds(this,"lessonratingdialog",this._background),DBLAsset.setChildrenBounds(this._background),this.addChild(this._background);var e=this._background.astTitle,t=e.lblTitle.title,n=(DBLFont.fixFont(t,o,"",DBLFont.BOLD),n=this._initLocation==i.RatingLocations.PERCENT_ENTER_CHOOSER?translate("How are we feeling today?"):translate("What do you think of this lesson?"),t.text=n,this._speakerItems.push({text:n,block:e,fields:[t]}),this._background.btnHighlight),e=(this._speakerButton=new DBLTimelineButton(n,c,null,h),this._speakerButton.addEventListener("click",this.startSpeaker.bind(this)),this._background.addChild(this._speakerButton),this._background.btnSkip),t=(this._skipButton=new DBLTimelineButton(e,c,null,h),this._skipButton.addEventListener("click",this.stopSpeaker.bind(this)),this._background.addChild(this._skipButton),this.toggleSpeakerAndSkipButtons(!0),this._background.btnExit);this._exitButton=new DBLTimelineButton(t,c,null,h),this._exitButton.addEventListener("click",this.onExit.bind(this)),this._background.addChild(this._exitButton)},t.prototype.setupQuestionBlocks=function(){var l=this;this._background&&(this._buttons={},this._initLocation==i.RatingLocations.PERCENT_ENTER_CHOOSER?this._questionsData=this.shuffle(Object.keys(i.StudentEnjoymentQuestions).map(function(e){return{questionId:e,question:i.StudentEnjoymentQuestions[e],score:null}})).slice(0,4):this._questionsData=this.shuffle(Object.keys(i.LessonFeedbackQuestions).map(function(e){return{questionId:e,question:i.LessonFeedbackQuestions[e],score:null}})),this._questionsData.forEach(function(s,o){var a=l._background["astQuestionFrame"+(o+1)],e=(l._questionBlocksData[o]=new i.QuestionBlockData(a,s,[]),a.lblQuestion.question),t=(DBLFont.fixFont(e,d,"",DBLFont.MEDIUM),e.text.textAlign="left",e.text.x=0,translate(s.question)),r={text:e.text=t,block:a,fields:[e]};l.BUTTON_LABELS.forEach(function(e,t){var n=a["btnRadio"+(t+1)],i=n.lblRadio.radio,e=(r.fields.push(i),i.text=e,DBLFont.fixFont(i,u),new DBLSelectTimelineButton(n,c,null,h));(l._questionBlocksData[o].buttons[t]=e).addEventListener("click",l.onRate.bind(l,s.questionId,t+1,e)),l._buttons[s.questionId]=l._buttons[s.questionId]||[],l._buttons[s.questionId].push(e),a.addChild(e)}),l._speakerItems.push(r)}),this.BUTTON_LABELS.forEach(function(e,t){var t=l._background["astAnswer"+(t+1)],n=t.lblAnswer.answer;DBLFont.fixFont(n,u),n.textBaseline="bottom",n.text=e,l._speakerItems.push({text:e,block:t,fields:[n]}),n.getBounds().height===n.lineHeight&&(n.y+=n.lineHeight)}))},t.prototype.shuffle=function(e){return e.sort(function(){return.5<Math.random()?1:-1})},t.prototype.setupSubmitButton=function(){var e=this._background.btnSubmit,t=e.lblSubmit.submit;DBLFont.fixFont(t,d,"",DBLFont.MEDIUM),t.text=translate("Submit"),this._submitButton=new DBLTimelineButton(e,c,null,h),this._submitButton.addEventListener("click",this.onSubmit.bind(this)),this._submitButton.enabled=!1,t.textBaseline="alphabetic",t.y+=this._submitButton.getBounds().height/2,this._background.addChild(this._submitButton)},t.prototype.onRate=function(t,e,n){this._buttons[t].forEach(function(e){e.selected=e==n&&!e.selected}),this._questionsData.filter(function(e){return e.questionId==t})[0].score=n.selected?e:null,this._submitButton.enabled=this._questionsData.every(function(e){return!!e.score})},t.prototype.cleanup=function(){var t=this;Object.keys(this._buttons).forEach(function(e){t._buttons[e].forEach(function(e){return e.removeAllEventListeners()})}),this._submitButton.removeAllEventListeners(),this._skipButton.removeAllEventListeners(),this._exitButton.removeAllEventListeners(),this._speakerButton.removeAllEventListeners()},t);function t(e,t){e=n.call(this,e,t)||this;return e.BUTTON_LABELS=[translate("Definitely Yes"),translate("A Little Yes"),translate("A Little No"),translate("Definitely No")],e.setupBackgroundAndTitle(),e.setupQuestionBlocks(),e.setupSubmitButton(),DBLAsset.playSound(a),e}i.LessonFeedbackDialog=e})(engagement_shared=engagement_shared||{}),(e=>{var t;function n(){return t.call(this)||this}t=createjs.Container,__extends(n,t),Object.defineProperty(n.prototype,"keyboardInX",{get:function(){return 30*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keyboardOutX",{get:function(){return-30*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keyboardY",{get:function(){return 25*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"backInX",{get:function(){return 30*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"backOutX",{get:function(){return-30*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"backY",{get:function(){return 75*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"infoInX",{get:function(){return 995*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"infoOutX",{get:function(){return 1055*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"infoY",{get:function(){return 25*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"feedInX",{get:function(){return 995*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"feedOutX",{get:function(){return 1055*lessonContent.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"feedY",{get:function(){return 75*lessonContent.scaleX},enumerable:!1,configurable:!0}),n.prototype.ready=function(){this._buttonBack=new DBLClipClassButton(DBLAsset.resolve("DBLANavButtonBackTiny_Up",e.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBackTiny_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBackTiny_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLANavButtonBackTiny_Disabled",e.SHELL_BUNDLE),!0,!1),this._buttonBack.name="buttonBack",this.addChild(this._buttonBack),this._buttonKeyboard=new DBLClipClassButton(DBLAsset.resolve("DBLAKeyboardButtonTiny_idle",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButtonTiny_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButtonTiny_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAKeyboardButtonTiny_Disabled",e.SHELL_BUNDLE),!0,!1),this._buttonKeyboard.name="buttonKeyboard",this.addChild(this._buttonKeyboard),this._infoButton=new DBLClipClassButton(DBLAsset.resolve("DBLAInfoButtonTiny",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButtonTiny_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButtonTiny_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAInfoButtonTiny_Disabled",e.SHELL_BUNDLE),!0,!1),this._infoButton.name="infoButton",this.addChild(this._infoButton),this._feedbackButton=new DBLClipClassButton(DBLAsset.resolve("DBLAFeedbackButtonTiny",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButtonTiny_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButtonTiny_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackButtonTiny_Disabled",e.SHELL_BUNDLE),!0,!1),this._feedbackButton.enabled=!0,this._feedbackButton.name="feedbackButton",this.addChild(this._feedbackButton),this._feedbackButtonNewMessages=new DBLClipClassButton(DBLAsset.resolve("DBLAFeedbackNewButtonTiny",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButtonTiny_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButtonTiny_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAFeedbackNewButtonTiny_Disabled",e.SHELL_BUNDLE),!0,!1),this._feedbackButtonNewMessages.enabled=!0,this._feedbackButtonNewMessages.name="feedbackButton",this._feedbackButtonNewMessages.visible=!1,this.addChild(this._feedbackButtonNewMessages),this.resize()},n.prototype.resize=function(){engagementStage.getBounds().width,engagementStage.getBounds().height;this._buttonKeyboard&&(this._buttonKeyboard.scaleX=this._buttonKeyboard.scaleY=lessonContent.scaleX,this._buttonKeyboard.x=this.visible?this.keyboardInX:this.keyboardOutX,this._buttonKeyboard.y=this.keyboardY),this._buttonBack.scaleX=this._buttonBack.scaleY=lessonContent.scaleX,this._buttonBack.x=this.visible?this.backInX:this.backOutX,this._buttonBack.y=this.backY,this._infoButton.scaleX=this._infoButton.scaleY=lessonContent.scaleX,this._infoButton.x=this.visible?this.infoInX:this.infoOutX,this._infoButton.y=this.infoY,this._feedbackButton.scaleX=this._feedbackButton.scaleY=lessonContent.scaleX,this._feedbackButton.x=this.visible?this.feedInX:this.feedOutX,this._feedbackButton.y=this.feedY,this._feedbackButtonNewMessages.scaleX=this._feedbackButtonNewMessages.scaleY=lessonContent.scaleX,this._feedbackButtonNewMessages.x=this.visible?this.feedInX:this.feedOutX,this._feedbackButtonNewMessages.y=this.feedY},Object.defineProperty(n.prototype,"infoEnabled",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keyboardButton",{get:function(){return this._buttonKeyboard},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"navBackButton",{get:function(){return this._buttonBack},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"infoButton",{get:function(){return this._infoButton},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"feedbackButton",{get:function(){return this._feedbackButton},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"feedbackButtonNewMessages",{get:function(){return this._feedbackButtonNewMessages},enumerable:!1,configurable:!0}),n.prototype.cleanup=function(){this._buttonKeyboard&&(this.removeChild(this._buttonKeyboard),this._buttonKeyboard=null),this._buttonBack&&(this.removeChild(this._buttonBack),this._buttonBack=null),this._infoButton&&(this.removeChild(this._infoButton),this._infoButton=null),this._feedbackButton&&(this.removeChild(this._feedbackButton),this._feedbackButton=null),this._feedbackButtonNewMessages&&(this.removeChild(this._feedbackButtonNewMessages),this._feedbackButtonNewMessages=null)},n.prototype.tick24=function(e){this._feedbackButtonNewMessages&&this._feedbackButtonNewMessages.visible&&this._feedbackButtonNewMessages.tick24(e),this._buttonKeyboard&&this._buttonKeyboard.tick24(e)},n.prototype.tweenIn=function(){fastForwarding?(this._buttonKeyboard&&(this._buttonKeyboard.x=this.keyboardInX),this._buttonBack.x=this.backInX,this._infoButton.x=this.infoInX,this._feedbackButton.x=this.feedInX,this._feedbackButtonNewMessages.x=this.feedInX):(this._buttonKeyboard&&gsap.TweenLite.to(this._buttonKeyboard,.5,{x:this.keyboardInX}),gsap.TweenLite.to(this._buttonBack,.5,{x:this.backInX}),gsap.TweenLite.to(this._infoButton,.5,{x:this.infoInX}),gsap.TweenLite.to(this._feedbackButton,.5,{x:this.feedInX,delay:.05}),gsap.TweenLite.to(this._feedbackButtonNewMessages,.5,{x:this.feedInX,delay:.05}))},n.prototype.tweenOut=function(e){fastForwarding?(this._buttonKeyboard&&(this._buttonKeyboard.x=this.backOutX),this._buttonBack.x=this.backOutX,this._infoButton.x=this.infoOutX,this._feedbackButton.x=this.feedOutX,this._feedbackButtonNewMessages.x=this.feedOutX,e()):(this._buttonKeyboard&&gsap.TweenLite.to(this._buttonKeyboard,.5,{x:this.backOutX}),gsap.TweenLite.to(this._buttonBack,.5,{x:this.backOutX}),gsap.TweenLite.to(this._infoButton,.5,{x:this.infoOutX}),gsap.TweenLite.to(this._feedbackButton,.5,{x:this.feedOutX,delay:.05}),gsap.TweenLite.to(this._feedbackButtonNewMessages,.5,{x:this.feedOutX,delay:.05,onComplete:e}))},e.MinimalBar=n})(engagement_shared=engagement_shared||{}),(n=>{var i,s="primary"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.primary.TopBottomThin_2020"):"squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.squiggly.SquigglyShared"):"",e=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),t=(n.TOPBAR_EVENT_SOUNDOFF="soundoff",n.TOPBAR_EVENT_SOUNDON="soundon",n.TOPBAR_EVENT_CCSOUNDON="ccsoundon",n.TOPBAR_EVENT_CCSOUNDOFF="ccsoundoff",i=createjs.Container,__extends(o,i),o.prototype.cleanup=function(){this._btnMute.removeAllEventListeners(),this._btnSound.removeAllEventListeners()},Object.defineProperty(o.prototype,"enabled",{set:function(e){this._btnMute.enabled=e,this._btnSound.enabled=e,this._btnCCMute.enabled=e,this._btnCCSound.enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"interactive",{set:function(e){this.mouseEnabled=e},enumerable:!1,configurable:!0}),o.prototype.onClick=function(){switch(DBLAsset.playSound(e),this._toggled++,!__ccEnabled&&1<this._toggled&&(this._toggled=0),this.updateButtons(),this._toggled){case this.SOUND:this.dispatchEvent(new createjs.Event(n.TOPBAR_EVENT_SOUNDON,!0,!0));break;case this.MUTE:this.dispatchEvent(new createjs.Event(n.TOPBAR_EVENT_SOUNDOFF,!0,!0));break;case this.CCSOUND:this.dispatchEvent(new createjs.Event(n.TOPBAR_EVENT_CCSOUNDON,!0,!0));break;case this.CCMUTE:this.dispatchEvent(new createjs.Event(n.TOPBAR_EVENT_CCSOUNDOFF,!0,!0))}},o.prototype.updateButtons=function(){3<this._toggled&&(this._toggled=this.SOUND),this._btnSound.visible=this._toggled==this.SOUND,this._btnMute.visible=this._toggled==this.MUTE,this._btnCCSound.visible=this._toggled==this.CCSOUND,this._btnCCMute.visible=this._toggled==this.CCMUTE},o.prototype.tick24=function(){this._btnSound.tickDOM(),this._btnMute.tickDOM(),this._btnCCSound.tickDOM(),this._btnCCMute.tickDOM()},Object.defineProperty(o.prototype,"muteButton",{get:function(){return this._btnMute},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"soundButton",{get:function(){return this._btnSound},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ccMuteButton",{get:function(){return this._btnCCMute},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ccSoundButton",{get:function(){return this._btnCCSound},enumerable:!1,configurable:!0}),o);function o(){var e=i.call(this)||this,t=(e.SOUND=0,e.MUTE=1,e.CCSOUND=2,e.CCMUTE=3,e._toggled=0,e._btnSound=new DBLClipClassButton(DBLAsset.resolve("DBLASoundButton",s),DBLAsset.resolve("DBLASoundButton_Down",s),DBLAsset.resolve("DBLASoundButton_Over",s),DBLAsset.resolve("DBLASoundButton_Disabled",s),!0,!1),e._btnSound.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnSound),e._btnMute=new DBLClipClassButton(DBLAsset.resolve("DBLAMuteButton",s),DBLAsset.resolve("DBLAMuteButton_Down",s),DBLAsset.resolve("DBLAMuteButton_Over",s),DBLAsset.resolve("DBLAMuteButton_Disabled",s),!0,!1),e._btnMute.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnMute),e._btnCCSound=new DBLClipClassButton(DBLAsset.resolve("DBLASoundCCButton",s),DBLAsset.resolve("DBLASoundCCButton_Down",s),DBLAsset.resolve("DBLASoundCCButton_Over",s),DBLAsset.resolve("DBLASoundCCButton_Disabled",s),!0,!1),e._btnCCSound.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnCCSound),e._btnCCMute=new DBLClipClassButton(DBLAsset.resolve("DBLAMuteCCButton",s),DBLAsset.resolve("DBLAMuteCCButton_Down",s),DBLAsset.resolve("DBLAMuteCCButton_Over",s),DBLAsset.resolve("DBLAMuteCCButton_Disabled",s),!0,!1),e._btnCCMute.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnCCMute),DBLStateManager.getProperty(n.PROPERTY_SOUND_OPTIONS));return e._toggled=e.SOUND,t&&(t.sound?t.cc&&(e._toggled=e.CCSOUND):(t.cc?e._toggled=e.CCMUTE:e._toggled=e.MUTE,muted=!0)),__domTestHooks&&(DBLTestUtil.createTestDOMElement(e._btnSound,"qatopbarsound",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(e._btnMute,"qatopbarmute",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(e._btnCCSound,"qatopbarccsound",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(e._btnCCMute,"qatopbarccmute",PERM_TEST_DIV)),e.updateButtons(),e}n.MuteButton=t})(engagement_shared=engagement_shared||{}),(e=>{var t,n="primary"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.primary.TopBottomThin_2020"):"squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.squiggly.SquigglyShared"):"",i=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),s=(e.TOPBAR_EVENT_PAUSE="pause",e.TOPBAR_EVENT_PLAY="play",t=createjs.Container,__extends(o,t),o.prototype.cleanup=function(){this._btnPause.removeAllEventListeners(),this._btnPlay.removeAllEventListeners()},o.prototype.resize=function(){},Object.defineProperty(o.prototype,"enabled",{set:function(e){this._btnPause.enabled=e,this._btnPlay.enabled=e},enumerable:!1,configurable:!0}),o.prototype.resetPlay=function(){this._toggled=!1,this._btnPause.visible=!0,this._btnPlay.visible=!1},o.prototype.setPause=function(){this._toggled=!0,this._btnPause.visible=!1,this._btnPlay.visible=!0},Object.defineProperty(o.prototype,"interactive",{set:function(e){this.mouseEnabled=e},enumerable:!1,configurable:!0}),o.prototype.onClick=function(){DBLAsset.playSound(i),this.dispatchEvent(new createjs.Event(this._toggled?e.TOPBAR_EVENT_PLAY:e.TOPBAR_EVENT_PAUSE,!0,!0))},o.prototype.tick24=function(){this._btnPause.tickDOM(),this._btnPlay.tickDOM()},Object.defineProperty(o.prototype,"pauseButton",{get:function(){return this._btnPause},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"playButton",{get:function(){return this._btnPlay},enumerable:!1,configurable:!0}),o);function o(){var e=t.call(this)||this;return e._toggled=!1,e._btnPause=new DBLClipClassButton(DBLAsset.resolve("DBLAPauseButton",n),DBLAsset.resolve("DBLAPauseButton_Down",n),DBLAsset.resolve("DBLAPauseButton_Over",n),DBLAsset.resolve("DBLAPauseButton_Disabled",n),!0,!1),e._btnPause.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnPause),e._btnPlay=new DBLClipClassButton(DBLAsset.resolve("DBLAPlayButton",n),DBLAsset.resolve("DBLAPlayButton_Down",n),DBLAsset.resolve("DBLAPlayButton_Over",n),DBLAsset.resolve("DBLAPlayButton_Disabled",n),!0,!1),e._btnPlay.addEventListener("click",e.onClick.bind(e)),e._btnPlay.visible=!1,e.addChild(e._btnPlay),e._toggled=!1,__domTestHooks&&(DBLTestUtil.createTestDOMElement(e._btnPause,"qatopbarpause",PERM_TEST_DIV),DBLTestUtil.createTestDOMElement(e._btnPlay,"qatopbarplay",PERM_TEST_DIV)),e}e.PauseButton=s})(engagement_shared=engagement_shared||{}),(t=>{t.PAUSEPOPUP_EVENT_PLAY="play";var n,i=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.Pause"),e=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),s=1.094,o=537*s,a=311*s,r=(n=createjs.Container,__extends(l,n),l.prototype.cleanup=function(){this._playButton.removeAllEventListeners(),this._playButton.cleanup()},l.prototype.resize=function(){this._background.scale=DBLGraphicUtils.getEffectiveScale(this)},l.prototype.tickDOM=function(){this._playButton.tickDOM()},l.prototype.onPlayClick=function(){DBLAsset.playSound(e),this.dispatchEvent(t.PAUSEPOPUP_EVENT_PLAY)},l.prototype.getAccessibilityData=function(){return{tabIndex:0,type:"modaldialog",display:{object:this},labelObject:{id:"shellPauseModal"},children:[__assign(__assign({},this._playButton.getAccessibilityData()),{labelObject:{id:"shellPauseContinue"}})],onEsc:null}},l);function l(){var e=n.call(this)||this;return e._title=DBLAsset.create("DBLAPauseTitle",i,{localizeSymbol:!0}),e._background=new DBLScale9Container(DBLAsset.create("SCAPausedBackground",i)),e._background.setSize(o,a-30,DBLGraphicUtils.getEffectiveScale(e)),e._background.y=30,e.addChild(e._background),e._title.x=(o-e._title.getBounds().width)/2,e.addChild(e._title),e._playButton=new DBLTimelineButton(DBLAsset.create(t.BUTTON_PLAY,t.BUTTON_BUNDLE)),e._playButton.scaleX=1.6,e._playButton.scaleY=1.6,e._playButton.x=404.78000000000003,e._playButton.y=196.92000000000002,e.addChild(e._playButton),e._playButton.addEventListener("click",e.onPlayClick.bind(e)),e._stella=DBLAsset.create("SCAPauseStella",i),e._stella.scaleX=e._stella.scaleY=s,e._stella.x=27.35,e._stella.y=52.512,e.addChild(e._stella),e.setBounds(0,0,o,a),__domTestHooks&&DBLTestUtil.createTestDOMElement(e._playButton,"qaresume",TEMP_TEST_DIV),e}t.PausePopup=r})(engagement_shared=engagement_shared||{}),(n=>{var i,s="squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.squiggly.SquigglyShared"):DBLRuntime.requireBundle("assets.bundles.engagement.primary.TopBottomThin_2020"),e=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),t=(n.TOPBAR_EVENT_PAUSE="pause",n.TOPBAR_EVENT_PLAY="play",i=createjs.Container,__extends(o,i),o.prototype.cleanup=function(){this._btnSettings.removeAllEventListeners()},o.prototype.resize=function(){},Object.defineProperty(o.prototype,"enabled",{set:function(e){this._btnSettings.enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"interactive",{set:function(e){this.mouseEnabled=e},enumerable:!1,configurable:!0}),o.prototype.onClick=function(){DBLAsset.playSound(e),this.dispatchEvent(new createjs.Event(n.TOPBAR_EVENT_PAUSE,!0,!0))},o.prototype.tick24=function(){this._btnSettings.tickDOM()},Object.defineProperty(o.prototype,"settingsButton",{get:function(){return this._btnSettings},enumerable:!1,configurable:!0}),o.prototype.getAccessibilityData=function(){return{role:"button",display:{object:this._btnSettings},labelObject:{id:"shellSettingsButton"}}},o);function o(){var e=i.call(this)||this,t=(e._toggled=!1,e._btnSettings=new DBLClipClassButton(DBLAsset.resolve("DBLASettingsGear_Up",s),DBLAsset.resolve("DBLASettingsGear_Down",s),DBLAsset.resolve("DBLASettingsGear_Over",s),DBLAsset.resolve("DBLASettingsGear_Disabled",s),!0,!1),e._btnSettings.addEventListener("click",e.onClick.bind(e)),e.addChild(e._btnSettings),e._toggled=!1,__domTestHooks&&DBLTestUtil.createTestDOMElement(e._btnSettings,"qatopbarpause",PERM_TEST_DIV),DBLStateManager.getProperty(n.PROPERTY_SOUND_OPTIONS));return t&&(t.sound||(muted=!0),t.cc,!1===t.sfx)&&(sfxMuted=!0),e}n.SettingsButton=t})(engagement_shared=engagement_shared||{}),(s=>{s.PAUSEPOPUP_EVENT_PLAY="play";var o,a=replayMode?"":"squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.squiggly.SquigglyShared"):"primary"==engagement?DBLRuntime.requireBundle("assets.bundles.engagement.primary.SettingsMenu_Primary"):DBLRuntime.requireBundle("assets.bundles.engagement.intermediate."+BWtoPF(engagement)+".SettingsMenu_"+("paperfrenzy"==BWtoPF(engagement)?"PF":"CF")),r=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),l=replayMode?"":"squiggly"==engagement?DBLRuntime.requireBundle("assets.bundles.lessons.shared.SquigglyButtonsShared"):"primary"==engagement?DBLRuntime.requireBundle("assets.bundles.lessons.shared.PrimaryButtons"):DBLRuntime.requireBundle("assets.bundles.engagement.intermediate."+BWtoPF(engagement)+".DBLAShell"),u=1033!=lcid,e=(o=createjs.Container,__extends(t,o),t.prototype.positionHelper=function(e,t){e.x=this._background[t].x,e.y=this._background[t].y,e.regX=this._background[t].regX,e.regY=this._background[t].regY},t.prototype.tick24=function(e){for(this._voiceButton&&this._voiceButton.tick24(e);0<e--;)this._voiceAnimation&&this._voiceAnimation.visible&&this._voiceAnimation.advance();!this._switchingVoices||"cycleLeft_stop"!=this._voiceAnimation.currentLabel&&"cycleRight_stop"!=this._voiceAnimation.currentLabel||this.voiceSwitchComplete()},t.prototype.resize=function(){this._background.scaleX=this._background.scaleY=DBLGraphicUtils.getEffectiveScale(this)},t.prototype.cleanup=function(){this._playButton.removeAllEventListeners(),this._playButton.cleanup()},Object.defineProperty(t.prototype,"enabled",{set:function(e){this.mouseChildren=e},enumerable:!1,configurable:!0}),t.prototype.onPlayClick=function(){DBLAsset.playSound(r),this.dispatchEvent(s.PAUSEPOPUP_EVENT_PLAY),this.stopSample(),DBLStateManager.syncProperties(function(){})},t.prototype.onToggleClick=function(e){e.target instanceof DBLToggleButtonContainer&&(e.target.name==this._musicContainer.name?e.type==DBLToggleButtonContainer.TOGGLE_OFF_EVENT?(this.onMusicOffClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsMusic",!0)):(this.onMusicOnClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsMusic",!1)):e.target.name==this._sfxContainer.name?e.type==DBLToggleButtonContainer.TOGGLE_OFF_EVENT?(this.onSFXOffClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsSFX",!0)):(this.onSFXOnClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsSFX",!1)):e.type==DBLToggleButtonContainer.TOGGLE_OFF_EVENT?(this.onCaptionOffClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsCC",!0)):(this.onCaptionOnClick(),"squiggly"==engagement&&DBLClientEventManager.recordClientEvent("DblShellModal","SettingsCC",!1)))},t.prototype.onMusicOnClick=function(){__mutedDueToPause=!1,this.toggleMusic(!1)},t.prototype.onMusicOffClick=function(){__mutedDueToPause=!0,this.toggleMusic(!0)},t.prototype.toggleMusic=function(e){var t=this,n=(this.enabled=!1,__shellAuto&&logShellAction("> click shell at sound"),DBLStateManager.getProperty(s.PROPERTY_SOUND_OPTIONS));n.sound=e,this._musicIcon.icn_On.visible=e,this._musicIcon.icn_Off.visible=!e,DBLStateManager.setProperty(s.PROPERTY_SOUND_OPTIONS,n),DBLStateManager.syncProperties(function(){t.enabled=!0,DBLLog.log("Sound options synched (sound: "+n.sound+", cc: "+n.cc+", sfx: "+n.sfx+").",DBLLog.INFO)})},t.prototype.onSFXOffClick=function(){this.toggleSFX(!0)},t.prototype.onSFXOnClick=function(){this.toggleSFX(!1)},t.prototype.toggleSFX=function(e){var t=this,n=(this.enabled=!1,__shellAuto&&logShellAction("> click shell at sfx"),DBLStateManager.getProperty(s.PROPERTY_SOUND_OPTIONS));n.sfx=e,sfxMuted=!e,this._sfxIcon.icn_On.visible=e,this._sfxIcon.icn_Off.visible=!e,DBLStateManager.setProperty(s.PROPERTY_SOUND_OPTIONS,n),DBLStateManager.syncProperties(function(){t.enabled=!0,DBLLog.log("Sound options synched (sound: "+n.sound+", cc: "+n.cc+", sfx: "+n.sfx+").",DBLLog.INFO)})},t.prototype.onCaptionOnClick=function(){this.toggleCaption(!1),this.dispatchEvent(new createjs.Event(s.TopBar.TOPBAR_EVENT_CCON,!0,!0))},t.prototype.onCaptionOffClick=function(){this.toggleCaption(!0),this.dispatchEvent(new createjs.Event(s.TopBar.TOPBAR_EVENT_CCOFF,!0,!0))},t.prototype.toggleCaption=function(e){var t=this,n=(this.enabled=!1,__shellAuto&&logShellAction("> click shell at cc"),DBLStateManager.getProperty(s.PROPERTY_SOUND_OPTIONS));n.cc=e,this._ccIcon.icn_On.visible=e,this._ccIcon.icn_Off.visible=!e,DBLStateManager.setProperty(s.PROPERTY_SOUND_OPTIONS,n),DBLStateManager.syncProperties(function(){t.enabled=!0,DBLLog.log("Sound options synched (sound: "+n.sound+", cc: "+n.cc+", sfx: "+n.sfx+").",DBLLog.INFO)})},t.prototype.enterLightMode=function(){this._background.gotoAndStop("light"),this._lightModeButton.enabled=!1,this._darkModeButton.enabled=!0},t.prototype.enterDarkMode=function(){this._background.gotoAndStop("dark"),this._lightModeButton.enabled=!0,this._darkModeButton.enabled=!1},t.prototype.updateButtonsFromSoundOptions=function(){var e=this,t=DBLStateManager.getProperty(s.PROPERTY_SOUND_OPTIONS)||{};DBLUtils.isUndefOrNull(t.sound)&&(t.sound=!0),DBLUtils.isUndefOrNull(t.sfx)&&(t.sfx=!0),DBLUtils.isUndefOrNull(t.cc)&&(t.cc=!1),this._musicContainer.selected=t.sound,this._musicIcon.icn_On.visible=t.sound,this._musicIcon.icn_Off.visible=!t.sound,this._sfxContainer.selected=t.sfx,this._sfxIcon.icn_On.visible=t.sfx,this._sfxIcon.icn_Off.visible=!t.sfx,this._captionContainer.selected=t.cc,this._ccIcon.icn_On.visible=t.cc,this._ccIcon.icn_Off.visible=!t.cc,DBLStateManager.setProperty(s.PROPERTY_SOUND_OPTIONS,t),DBLStateManager.syncProperties(function(){e.enabled=!0,DBLLog.log("Sound options synched (sound: "+t.sound+", cc: "+t.cc+", sfx: "+t.sfx+").",DBLLog.INFO)})},t.prototype.onVoiceLeftClick=function(){DBLAsset.playSound(r);var e,t=DBLVoiceChoice.getVoices(),n=DBLVoiceChoice.voice,n=t.indexOf(n);0<n?e=n-1:0==n&&(e=t.length-1),DBLVoiceChoice.setVoicePermanently(t[e]),this.updateVoiceButton(),this.animate(n,e,"left"),DBLClientEventManager.recordClientEvent("DblShellModal","VoiceChoice",DBLVoiceChoice.voice)},t.prototype.onVoiceRightClick=function(){DBLAsset.playSound(r);var e,t=DBLVoiceChoice.getVoices(),n=DBLVoiceChoice.voice,n=t.indexOf(n);n<t.length-1?e=n+1:n==t.length-1&&(e=0),DBLVoiceChoice.setVoicePermanently(t[e]),this.updateVoiceButton(),this.animate(n,e,"right"),DBLClientEventManager.recordClientEvent("DblShellModal","VoiceChoice",DBLVoiceChoice.voice)},t.prototype.animate=function(e,t,n){var i=DBLVoiceChoice.getVoices(),s=(this._voiceButton.visible=!1,this._voiceAnimation.visible=!0,this._voiceAnimation.btn_playAudio_current.lblVoiceName),o=this._voiceAnimation.btn_playAudio_current.inst_avatar,s=(s.text=DBLVoiceChoice.info[i[e]].character,DBLFont.fixTextFields(s),o.gotoAndStop(DBLVoiceChoice.info[i[e]].avatar),this._voiceAnimation.btn_playAudio_next.lblVoiceName),o=this._voiceAnimation.btn_playAudio_next.inst_avatar;s.text=DBLVoiceChoice.info[i[t]].character,DBLFont.fixTextFields(s),o.gotoAndStop(DBLVoiceChoice.info[i[t]].avatar),this._switchingVoices=!0,"right"==n?this._voiceAnimation.gotoAndPlay("cycleRight_start"):this._voiceAnimation.gotoAndPlay("cycleLeft_start")},t.prototype.voiceSwitchComplete=function(){this._switchingVoices=!1,this._voiceAnimation.visible=!1,this._voiceButton.visible=!0,this.playSample()},t.prototype.onVoiceClick=function(){DBLAsset.playSound(r),this.playSample()},t.prototype.playSample=function(){var e=this;this.stopSample(),this._ttsRunning=!0,this._voiceButton.playing=!0,DBLPlay._playTTSDirect_(DBLVoiceChoice.info[DBLVoiceChoice.voice].sample,function(){e._ttsRunning=!1,e._voiceButton.playing=!1})},t.prototype.stopSample=function(){this._ttsRunning&&(DBLPlay.fastForwardSohlisg(),this._voiceButton.playing=!1,this._ttsRunning=!1)},t.prototype.updateVoiceButton=function(){this._voiceButton.character=DBLVoiceChoice.info[DBLVoiceChoice.voice].character,this._voiceButton.avatar=DBLVoiceChoice.info[DBLVoiceChoice.voice].avatar},t.prototype.getAccessibilityData=function(){var e=this._voiceChoice?[__assign(__assign({},this._leftButton.getAccessibilityData()),{labelObject:{id:"shellSettingsLeftArrow"}}),__assign(__assign({},this._voiceButton.getAccessibilityData()),{labelObject:{id:"shellSettingsVoice",params:{name:this._voiceButton.character}}}),__assign(__assign({},this._rightButton.getAccessibilityData()),{labelObject:{id:"shellSettingsRightArrow"}})]:[];return{tabIndex:0,type:"modaldialog",display:{object:this},labelObject:{id:"shellSettingsModal"},children:__spreadArray(__spreadArray([__assign(__assign({},this._musicContainer.getAccessibility()),{labelObject:{id:"shellSettingsMusic"}}),__assign(__assign({},this._sfxContainer.getAccessibility()),{labelObject:{id:"shellSettingsSfx"}}),__assign(__assign({},this._captionContainer.getAccessibility()),{labelObject:{id:"shellSettingsCaptions"}})],e,!0),[__assign(__assign({},this._playButton.getAccessibilityData()),{labelObject:{id:"shellSettingsDone"}})],!1),onEsc:null}},t);function t(){var e,t=o.call(this)||this,n=(t._ttsRunning=!1,DBLStateManager.requestProperty(s.PROPERTY_SOUND_OPTIONS),t._voiceChoice=__application!=APPID_EARLY_LITERACY&&1033==lcid&&!1!==rootParams.voicechoice,t._background=DBLAsset.create("SettingsModal",a),DBLAsset.setChildrenBounds(t._background),t.addChild(t._background),t._voiceChoice||t._background.gotoAndStop("NoVoiceChoice"),DBLFont.fixTextFields(t._background.lblHeader,u),"primary"==engagement&&21514==lcid?t._background.lblHeader.gotoAndStop("header_es"):t._background.lblHeader&&(t._background.lblHeader.children[0].text=translate("Settings")),t._playButton=new DBLTimelineButton(DBLAsset.create("primary"==engagement?"DBLAButtonDone_P":"squiggly"==engagement?"DBLAButtonSubmit":"DBLAPopupButtonAccept",l)),t._playButton.x=t._background.lctModalBtn02.x,t._playButton.y=t._background.lctModalBtn02.y,t.addChild(t._playButton),t._playButton.addEventListener("click",t.onPlayClick.bind(t)),t._musicContainer=new DBLToggleButtonContainer("SettingsTgl_On","SettingsTgl_Off",a,r),DBLFont.fixTextFields(t._musicContainer),t._musicContainer.name="music",t._musicIcon=DBLAsset.create("SettingsMusicIcn",a),t._background.audioToggle.lctMusicTgl.addChild(t._musicContainer),t._background.audioToggle.lctMusicIcn.addChild(t._musicIcon),t._background.audioToggle.lblMusic.text="Music",DBLFont.fixTextFields(t._background.audioToggle.lblMusic,u),t._sfxContainer=new DBLToggleButtonContainer("SettingsTgl_On","SettingsTgl_Off",a,r),DBLFont.fixTextFields(t._sfxContainer),t._sfxContainer.name="sfx",t._sfxIcon=DBLAsset.create("SettingsSoundIcn",a),t._background.audioToggle.lctSoundTgl.addChild(t._sfxContainer),t._background.audioToggle.lctSoundIcn.addChild(t._sfxIcon),t._background.audioToggle.lblSound.text="Sound",DBLFont.fixTextFields(t._background.audioToggle.lblSound,u),t._captionContainer=new DBLToggleButtonContainer("SettingsTgl_On","SettingsTgl_Off",a,r),DBLFont.fixTextFields(t._captionContainer),t._captionContainer.name="cc",t._ccIcon=DBLAsset.create("SettingsCCIcn",a),t._background.audioToggle.lctCCTgl.addChild(t._captionContainer),t._background.audioToggle.lctCCIcn.addChild(t._ccIcon),t._background.audioToggle.lblCC.text="Captions",DBLFont.fixTextFields(t._background.audioToggle.lblCC,u),t._voiceChoice&&(t._leftButton=new DBLTimelineButton(DBLAsset.create("voicePagination_btn_L",a)),t.positionHelper(t._leftButton,"tabLeft"),DBLGraphicUtils.replaceDisplayObject(t._background,t._background.tabLeft,t._leftButton),t._leftButton.addEventListener("click",t.onVoiceLeftClick.bind(t)),t._voiceAnimation=t._background.voiceSelector,t._voiceButton=new s.VoiceButton(DBLAsset.create("speechSample",a)),t.positionHelper(t._voiceButton,"voiceSelector"),t._background.addChildAt(t._voiceButton,t._background.getChildIndex(t._voiceAnimation)),t._voiceButton.addEventListener("click",t.onVoiceClick.bind(t)),t._voiceAnimation.visible=!1,t._rightButton=new DBLTimelineButton(DBLAsset.create("voicePagination_btn_R",a)),t.positionHelper(t._rightButton,"tabRight"),DBLGraphicUtils.replaceDisplayObject(t._background,t._background.tabRight,t._rightButton),t._rightButton.addEventListener("click",t.onVoiceRightClick.bind(t)),DBLFont.fixTextFields(t._background.lblVoice)),rootParams.assistiveCheckbox),i=t._background.ast_screenReader;return n&&i?(DBLFont.fixTextFields(i.txt_screenReader),t._queryDisplay=new createjs.Container,t._queryDisplay.addChild(i.txt_screenReader),t._queryCheckbox=DBLAsset.create("DBLAPopupCheckbox",l),n=i.lct_SRCheckbox,t._queryCheckbox.x=n.x,t._queryCheckbox.y=n.y,t._queryCheckbox.gotoAndStop(0),n=new createjs.Shape,e=t._queryDisplay.getBounds(),n.graphics.beginFill("#000000"),n.graphics.drawRect(0,0,e.width,e.height),n.graphics.endFill(),t._queryDisplay.hitArea=n,t._queryDisplay.addChild(t._queryCheckbox),t._queryDisplay.regX=i.regX,t._queryDisplay.regY=i.regY,t._queryDisplay.x=i.x,t._queryDisplay.y=i.y,DBLGraphicUtils.replaceDisplayObject(t._background,i,t._queryDisplay),t._queryCheck=t._queryCheckbox.check,DBLAsset.setNameAndBounds(t._queryCheck,"querycheck",t._queryCheck),t._queryDisplay.addEventListener("click",function(){return t._queryCheck.visible=!t._queryCheck.visible}),t._queryDisplay.addEventListener("mouseover",function(){return DBLCursor.setCursor(DBLCursor.POINTER)}),t._queryDisplay.addEventListener("mouseout",function(){return DBLCursor.setCursor(DBLCursor.AUTO)})):i&&(i.visible=!1),t._background.txt_copyright.text="Copyright "+(new Date).getFullYear()+" Discovery Education, Inc. All Rights Reserved.",DBLFont.fixTextFields(t._background.txt_copyright),t._background.addEventListener(DBLToggleButtonContainer.TOGGLE_OFF_EVENT,function(e){return t.onToggleClick(e)}),t._background.addEventListener(DBLToggleButtonContainer.TOGGLE_ON_EVENT,function(e){return t.onToggleClick(e)}),t.updateButtonsFromSoundOptions(),t._voiceChoice&&t.updateVoiceButton(),t}s.SettingsPopup=e})(engagement_shared=engagement_shared||{}),(l=>{l.PROPERTY_SOUND_OPTIONS="Property.soundOptions",l.PROPERTY_CLOSED_CAPTION="Session.closedCaption",l.SEASONAL_DATA_FQN="assets.data.engagement.shared.SeasonalData",l.parseSeasonalData=function(){var e=[];if(season)e.push(season);else{var t,n=objectFromFQN(l.SEASONAL_DATA_FQN),i=new Date,s=i.getFullYear();for(t in n){var o,a,r=n[t];r.start_date&&r.end_date&&-1!=r.supported_engagements.replace(/\s/g,"").toLowerCase().split(",").indexOf(engagement)&&(o=new Date(r.start_date+"/"+s),(a=new Date(r.end_date+"/"+s)).getMonth()<o.getMonth()&&(a=new Date(r.end_date+"/"+(s+1))),o<=i)&&i<=a&&e.push(t)}}return e},l.PROPERTY_MESSAGES_EVER="Property.messagesEver",l.PROPERTY_DREAMBOX_REACTIONS="Property.dreamboxReactions"})(engagement_shared=engagement_shared||{}),(e=>{var t,n=DBLRuntime.requireBundle("assets.bundles.lessons.shared.DBLALongPressFX"),i=(t=createjs.Container,__extends(s,t),s.prototype.init=function(){var e;this._art||(this._art=DBLAsset.create("LongPressFX",n),this.addChild(this._art),e=this._art.getBounds(),this._art.x=-.5*e.width,this._art.y=-.5*e.height),this._art.gotoAndPlay(0),this.x=engagementStage.mouseX/dblDevicePixelRatio,this.y=engagementStage.mouseY/dblDevicePixelRatio},s.prototype.tick24=function(e){if(this.stage&&this.visible&&this._art)for(this.x=engagementStage.mouseX/dblDevicePixelRatio,this.y=engagementStage.mouseY/dblDevicePixelRatio;0<e--;)DBLAsset.advanceMovieClip(this._art),manualInvalidate(this,100)},s);function s(){return null!==t&&t.apply(this,arguments)||this}e.StickyDragFx=i})(engagement_shared=engagement_shared||{}),(n=>{n.STOPPOPUP_EVENT_PLAY="play",n.STOPPOPUP_EVENT_EXIT="exit";var i,s=replayMode?"":DBLRuntime.requireBundle("assets.bundles.engagement.primary.Exit"),e=DBLRuntime.requireAudio("assets.audio.components.shared.Click");engagement;var o=534*(t=1.094),a=295.38,t=(i=createjs.Container,__extends(r,i),r.prototype.tickDOM=function(){this._yesButton.tickDOM(),this._noButton.tickDOM()},r.prototype.cleanup=function(){this._noButton.removeAllEventListeners(),this._noButton.cleanup(),this._yesButton.removeAllEventListeners(),this._yesButton.cleanup()},r.prototype.onPlayClick=function(){DBLAsset.playSound(e),this.dispatchEvent(n.STOPPOPUP_EVENT_PLAY)},r.prototype.onExitClick=function(){DBLAsset.playSound(e),this.dispatchEvent(n.STOPPOPUP_EVENT_EXIT)},r);function r(){var e=i.call(this)||this,t=DBLAsset.create("SCAStopBackground",s);return e._background=new DBLScale9Container(t,null,o,a),e._background.setSize(o,a-25,DBLGraphicUtils.getEffectiveScale(e)),e._background.y=25,e.addChild(e._background),e._title=DBLAsset.create("DBLAExitGameTitle",s,{localizeSymbol:!0}),e._title.x=(o-e._title.getBounds().width)/2,e.addChild(e._title),e._yesButton=new DBLTimelineButton(DBLAsset.create(n.BUTTON_DONE,n.BUTTON_BUNDLE)),e._yesButton.scaleX=1.4,e._yesButton.scaleY=1.4,e._yesButton.x=169.57000000000002,e._yesButton.y=191.45000000000002,e.addChild(e._yesButton),e._yesButton.addEventListener("click",e.onExitClick.bind(e)),e._noButton=new DBLTimelineButton(DBLAsset.create(n.BUTTON_CANCEL,n.BUTTON_BUNDLE)),e._noButton.scaleX=1.4,e._noButton.scaleY=1.4,e._noButton.x=397.122,e._noButton.y=191.45000000000002,e.addChild(e._noButton),e._noButton.addEventListener("click",e.onPlayClick.bind(e)),e.setBounds(0,0,o,a),__domTestHooks&&(DBLTestUtil.createTestDOMElement(e._yesButton,"qaexitgameyes",TEMP_TEST_DIV),DBLTestUtil.createTestDOMElement(e._noButton,"qaexitgameno",TEMP_TEST_DIV)),e}n.StopPopup=t})(engagement_shared=engagement_shared||{}),(e=>{var t,n=DBLRuntime.requireFont("assets.fonts.Arial"),i=(e.ANDIKA=DBLRuntime.requireFont("assets.fonts.DBLAndika"),e.ANDIKA_BOLD=DBLRuntime.requireFont("assets.fonts.DBLAndika"),t=createjs.Container,__extends(s,t),s.prototype.ready=function(){this._background=DBLAsset.create("DBLAFrameTop",e.SHELL_BUNDLE),this.addChild(this._background),this._avatarRing=new e.AvatarRing,this._avatarRing.avatarID=__user._avatar_,this._avatarRing.name="avatarRing",this.addChild(this._avatarRing),this._labelName=new createjs.Text("",DBLFont.getFontString("squiggly"==engagement?e.ANDIKA:n,28),"#99CCFF"),this._labelName.shadow=new createjs.Shadow("#000000",2,2,2),this._labelName.textAlign="left",this._labelName.textBaseline="alphabet",this._labelName.maxWidth=200,this._labelName.name="userName",this._labelName.setBounds(0,0,0,0),this.addChild(this._labelName),this._coinGraphic=DBLAsset.create("DBLACoinIcon",e.SHELL_BUNDLE),this._coinGraphic.name="coinGraphic",this.addChild(this._coinGraphic),this._labelCoins=new createjs.Text("",DBLFont.getFontString(n,28),"#E0E04A"),this._labelCoins.textAlign="left",this._labelCoins.textBaseline="alphabet",this._labelCoins.shadow=new createjs.Shadow("#000000",2,2,2),this._labelCoins.name="userName",this._labelCoins.setBounds(0,0,0,0),this.addChild(this._labelCoins),this._logo=DBLAsset.create(this.getLogoAssetName(),e.SHELL_BUNDLE),this._logo.name="logo",this.addChild(this._logo),this._settingsButton=new e.SettingsButton,this._settingsButton.name="settingsButton",this.addChild(this._settingsButton),this._helpSkip=new e.HelpSkipButton,this._helpSkip.name="helpskip",this.addChild(this._helpSkip),this._exitButton=new DBLClipClassButton(DBLAsset.resolve("DBLAXButton"+("squiggly"==engagement?"_Up":""),e.SHELL_BUNDLE),DBLAsset.resolve("DBLAXButton_Down",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAXButton_Over",e.SHELL_BUNDLE),DBLAsset.resolve("DBLAXButton_Disabled",e.SHELL_BUNDLE),!0,!1),this._exitButton.name="exitButton",this.addChild(this._exitButton),this.resize(),__domTestHooks&&DBLTestUtil.createTestDOMElement(this._exitButton,"qaexittopbar",PERM_TEST_DIV)},s.prototype.tick24=function(e){this._avatarRing&&this._avatarRing.tick24(e),this._helpSkip&&this._helpSkip.tick24(),this._pauseButton&&this._pauseButton.tick24(),this._exitButton&&this._exitButton.tickDOM()},s.prototype.resize=function(){var e=engagementStage.getBounds().width;engagementStage.getBounds().height;this._background.scaleY=lessonContent.scaleX,this._background.scaleX=e/1024,this._avatarRing.scaleX=this._avatarRing.scaleY=.59*lessonContent.scaleX,this._avatarRing.x=16*lessonContent.scaleX,this._avatarRing.y=-12*lessonContent.scaleX,this._coinGraphic.scaleX=this._coinGraphic.scaleY=lessonContent.scaleX,this._coinGraphic.y=11*lessonContent.scaleX,this._labelName.scaleX=this._labelName.scaleY=lessonContent.scaleX,this._labelCoins.scaleX=this._labelCoins.scaleY=lessonContent.scaleX,this._logo.scaleX=this._logo.scaleY=lessonContent.scaleX,this._logo.x=427*lessonContent.scaleX,this._logo.y=1.6*lessonContent.scaleX,this._settingsButton&&(this._settingsButton.scaleX=.9*lessonContent.scaleX,this._settingsButton.scaleY=.9*lessonContent.scaleX,this._settingsButton.x=e-(1024-("squiggly"==engagement?767:832))*lessonContent.scaleX,this._settingsButton.y=26*lessonContent.scaleX),this._helpSkip.scaleX=.9*lessonContent.scaleX,this._helpSkip.scaleY=.9*lessonContent.scaleX,this._helpSkip.x=e-119*lessonContent.scaleX,this._helpSkip.y=26*lessonContent.scaleX,this._exitButton.scaleX=.9*lessonContent.scaleX,this._exitButton.scaleY=.9*lessonContent.scaleX,this._exitButton.x=e-46*lessonContent.scaleX,this._exitButton.y=26*lessonContent.scaleX,this.updateText(__user._name_,0==audienceType?__user._data_:NaN)},s.prototype.updateText=function(e,t){void 0===t&&(t=NaN);var n=80*lessonContent.scaleX,e=(this._labelName.text=e,this._labelName.x=n,this._labelName.y=(11+this._labelName.getMeasuredHeight()-2)*lessonContent.scaleX,this._labelName.setBounds(0,0,this._labelName.getMeasuredWidth(),this._labelName.getMeasuredHeight()),n+=(Math.min(this._labelName.getMeasuredWidth(),200)+20)*lessonContent.scaleX,this._coinGraphic.x=n,n+=this._coinGraphic.getTransformedBounds().width+5*lessonContent.scaleX,Math.max(0,t).toString());this._labelCoins.x=n,this._labelCoins.text=isNaN(t)?"":e,this._labelCoins.y=11*lessonContent.scaleX,this._labelCoins.y=this._labelName.y,this._labelCoins.setBounds(0,-this._labelCoins.getMeasuredHeight(),this._labelCoins.getMeasuredWidth(),2*this._labelCoins.getMeasuredHeight()),this.updateCoinsVisibility()},s.prototype.updateCoinsVisibility=function(){this.coinsVisible=!0},Object.defineProperty(s.prototype,"coinsVisible",{set:function(e){var t=parseInt(this._labelCoins.text);e=e&&!isNaN(t),this._coinGraphic.visible=e,this._labelCoins.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"settingButton",{get:function(){return this._settingsButton},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"helpSkipButton",{get:function(){return this._helpSkip},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"exitButton",{get:function(){return this._exitButton},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"avatarRing",{get:function(){return this._avatarRing},enumerable:!1,configurable:!0}),s.prototype.cleanup=function(){this._avatarRing.cleanup(),this._pauseButton.cleanup(),this._muteButton.cleanup()},s.prototype.showLessonAnimation=function(e){this._avatarRing.showLessonAnimation(e)},s.prototype.fastForwardShowLessonAnimation=function(){this._avatarRing.fastForwardShowLessonAnimation()},s.prototype.addToken=function(e){this._avatarRing.addEventListener("UpdateTokens",this.onUpdateTokens.bind(this)),this._avatarRing.addToken(e)},s.prototype.fastForwardAddToken=function(){this._avatarRing.fastForwardAddToken()},s.prototype.onUpdateTokens=function(){assert(0==audienceType,"audience type"),this.updateText(__user._name_,__user._data_),this._avatarRing.removeAllEventListeners("UpdateTokens")},s.prototype.addFriend=function(e,t){this._avatarRing.addFriend(e,t)},s.prototype.fastForwardAddFriend=function(){this._avatarRing.fastForwardAddFriend()},s.prototype.getBundle=function(){return e.SHELL_BUNDLE},s.prototype.getLogoAssetName=function(){return"squiggly"===engagement?"DBLAShellLogo":"GB"===dialect?"DBLA_LogoUK":"DBLA_Logo"},s.prototype.getAccessibilityChildren=function(){return[this._avatarRing.getAccessibilityData(),{type:"img",display:{object:this._labelCoins},tabIndex:-1,labelObject:{id:"shellCoins",params:{coins:this._labelCoins.text}}},this._settingsButton.getAccessibilityData(),this._helpSkip.getAccessibilityData(),{role:"button",display:{object:this._exitButton},labelObject:{id:"shellExitButton"}}]},s.TOPBAR_EVENT_SOUNDOFF="soundoff",s.TOPBAR_EVENT_SOUNDON="soundon",s.TOPBAR_EVENT_CCSOUNDOFF="ccsoundoff",s.TOPBAR_EVENT_CCSOUNDON="ccsoundon",s.TOPBAR_EVENT_CCON="ccon",s.TOPBAR_EVENT_CCOFF="ccoff",s.TOPBAR_EVENT_HELP="help",s.TOPBAR_EVENT_SKIP="skip",s.TOPBAR_EVENT_PAUSE="pause",s.TOPBAR_EVENT_PLAY="play",s.TOPBAR_EVENT_EXIT="exit",s);function s(){return t.call(this)||this}e.TopBar=i})(engagement_shared=engagement_shared||{}),(e=>{var t;function n(e){e=t.call(this,e,null,null,null)||this;return e.playing=!1,e}t=DBLTimelineButton,__extends(n,t),Object.defineProperty(n.prototype,"character",{get:function(){return this._character},set:function(e){this._character=e,this._clip.lblVoiceName.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"avatar",{set:function(e){this._clip.inst_avatar.gotoAndStop(e)},enumerable:!1,configurable:!0}),n.prototype.gotoFrame=function(e){t.prototype.gotoFrame.call(this,e),DBLFont.fixTextFields(this._clip.lblVoiceName)},n.prototype.tick24=function(e){for(;0<e--;)this.playing&&this._clip.voiceArt.advance()},e.VoiceButton=n})(engagement_shared=engagement_shared||{}),(o=>{var s,a=DBLRuntime.requireBundle("assets.bundles.engagement.intermediate.paperfrenzy.GATES.DBLA_GATES_Survey"),e=(o.SURVEY_POPUP_TIMESTAMP_PREFIX="lastSeenGatesSurveyTimestamp",__extends(t,s=o.LessonFeedbackDialogBase),t.prototype.init=function(){this._art=DBLAsset.create("DBLA_GATES_Survey",a),DBLFont.fixFont(this._art.DBLASurveyModal.lblText,COOPER_BLACK),DBLFont.fixFont(this._art.DBLASurveyModal.lblText_1,COOPER_BLACK),DBLAsset.calculateBoundsFromChildren(this._art),this.addChild(this._art),this.resize()},t.prototype.setupSurveyModal=function(e){function t(){shell.showContentScrim(!1),shell.enableShellComponents(!0,!0,!0,!0),engagementStage.removeChild(n),n.cleanup()}var n=this,i=(shell.showContentScrim(!0),shell.enableShellComponents(!1,!1,!1,!1),this._exitButton=this.initButtonWithExistingArtCoords(this._art.DBLASurveyModal.btnClose,"DBLAButtonClose"),this._art.DBLASurveyModal.addChild(this._exitButton),engagementStage.addChild(this),DBLUtils.setLastShownPopupTimestamp(o.SURVEY_POPUP_TIMESTAMP_PREFIX,this._activeQuestion.questionId),e.submit),s=e.exit;this._submitButton.addEventListener("click",function(){n._questionsData=[n._activeQuestion],n.onSubmit(),t(),i()}),this._exitButton.addEventListener("click",function(){n.onExit(),t(),s()})},t.prototype.setupSubmitButton=function(){this._submitButton=this.initButtonWithExistingArtCoords(this._art.DBLASurveyModal.btnSubmit,"btnSubmit"),this._submitButton.clip.lblText.text=translate("Submit"),this._art.DBLASurveyModal.addChild(this._submitButton),this._submitButton.enabled=!1},t.prototype.setupQuestionBlocks=function(){for(var s=this,o=(this._art.DBLASurveyModal.lblText.text=this._questionsData.find(function(e){return e===s._activeQuestion}).question,this),e=0;e<4;e++)(t=>{var e=DBLAsset.create("DBLAemote".concat(4-t),a),n=DBLAsset.create("DBLASurveyButton",a),i=o._art.DBLASurveyModal["lctSelection".concat(t+1)],e=(n.lctEmote.addChild(e),n.lblText.text=o.BUTTON_LABELS[t],DBLFont.fixFont(n.lblText,COOPER_BLACK),new DBLSelectTimelineButton(n));o._buttons[o._activeQuestion.questionId]=o._buttons[o._activeQuestion.questionId]||[],o._buttons[o._activeQuestion.questionId].push(e),i.addChild(e),e.addEventListener("click",function(e){return s.onSurveyButtonClick(e,t+1)})})(e);"preview_worried"===this._activeQuestion.questionId&&this.reverseSurveyButtonsOrder()},t.prototype.reverseSurveyButtonsOrder=function(){var n=this;this._buttons[this._activeQuestion.questionId].reverse().forEach(function(e,t){t=n._art.DBLASurveyModal["lctSelection".concat(t+1)];t.removeAllChildren(),t.addChild(e)})},t.prototype.onRate=function(e,t,n){this._submitButton.enabled=!0,this._buttons[e].forEach(function(e){e.selected=e==n&&e.selected}),this._activeQuestion.score=n.selected?t:null},t.prototype.cleanup=function(){var t=this;Object.keys(this._buttons).forEach(function(e){t._buttons[e].forEach(function(e){return e.removeAllEventListeners()})}),this._exitButton.removeAllEventListeners(),this._exitButton.cleanup(),this._submitButton.removeAllEventListeners(),this._submitButton.cleanup(),this.removeAllChildren()},t.prototype.resize=function(){var e=engagementStage.getBounds().width/1024;this.scaleX=this.scaleY=e,this.x=this.scaleX,this.y=this.scaleY},t.prototype.tick24=function(){this._art&&DBLAsset.advanceMovieClip(this._art)},t.prototype.initButtonWithExistingArtCoords=function(e,t){t=new DBLTimelineButton(DBLAsset.create(t,a));return t.clip.lblText&&DBLFont.fixFont(t.clip.lblText,COOPER_BLACK),e.visible=!1,t.x=e.x,t.y=e.y,t},t.shouldShowSurveyPopup=function(e){return DBLUtils.popupTimerChecker(o.SURVEY_POPUP_TIMESTAMP_PREFIX,e,7)},t.getFormattedLocationString=function(){var e=__gatesSurvey.split("_")[0];return e=__gatesPreviewEnabled||__gatesBannersEnabled?e:"pre_"+e},t.shouldShowForLocation=function(e,t){var n=this.getFormattedLocationString();if(__gatesSurvey&&this.shouldShowSurveyPopup(__gatesSurvey))switch(e){case"LessonChooser":return!__gatesBannersEnabled&&!__gatesBannersEnabled&&"repeat"!==n&&"pre_repeat"!==n||__gatesBannersEnabled&&"banners"===n&&(null==t?void 0:t.lessonBanner);case"LessonPreview":return __gatesPreviewEnabled&&"preview"===n;case"LessonEnd":return"pre_repeat"===n;case"RepeatEnd":return"repeat"===n;default:return!1}return!1},t);function t(e,t,n){var i=s.call(this,e,t)||this;return i.BUTTON_LABELS=[translate("Strongly Disagree"),translate("Disagree"),translate("Agree"),translate("Strongly Agree")],i._selectedButton=null,i.onSurveyButtonClick=function(e,t){i._selectedButton&&(i._selectedButton.selected=!1);e=e.currentTarget;i._selectedButton=e,i._selectedButton.selected=!i._selectedButton.selected,i.onRate(i._activeQuestion.questionId,t,i._selectedButton)},i._selectedLessonId=n,i.init(),i.setupSubmitButton(),i._questionsData=Object.keys(o.GatesStudentEnjoymentQuestions).map(function(e){return{questionId:e,question:o.GatesStudentEnjoymentQuestions[e],score:null}}),i._activeQuestion=i._questionsData.find(function(e){return e.questionId===__gatesSurvey}),i.setupQuestionBlocks(),i}o.GatesLessonFeedbackDialog=e})(engagement_shared=engagement_shared||{}),(t=>{var n;function e(e){var t=n.call(this)||this;if(t.LOCKED_MODAL_BUNDLE_PATH=DBLRuntime.requireBundle("assets.bundles.engagement.intermediate."+BWtoPF(engagement)+".DBLAShell"),t.LOCKED_MODAL_SYMBOL="LockedModal",t.LOCKED_MODAL_BUNDLE_ICON_KEY="instance",t.LOCKED_MODAL_BUNDLE_TITLE_KEY="txt_header",t.LOCKED_MODAL_BUNDLE_BODY_HEADER_KEY="txt_body01",t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_1_KEY="txt_body02",t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_2_KEY="txt_body03",t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_3_KEY="txt_body04",t.LOCKED_MODAL_BUNDLE_COPYRIGHT_KEY="txt_copyright",e)return t._parameters=e,t._parent=t._parameters.modalParent,t.initializeVisibilityParameters(),t.initializeCallbacksFromParameters(),t._scrim=t.initializeScrim(),t._container=t.initializeBundle(t.LOCKED_MODAL_SYMBOL,t.LOCKED_MODAL_BUNDLE_PATH,t._parameters.modalName),t._icon=t.initializeIcon(t._container,t._parameters.showIcon),t._title=t.initializeTitle(t._container,t._parameters.title),t._bodyHeader=t.initializeBodyHeader(t._container,t._parameters.bodyHeader),t._bodyContentLeft=t.initializeBodyContent(t._container,t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_1_KEY,t._parameters.bodyContent1),t._bodyContent=t.initializeBodyContent(t._container,t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_2_KEY,t._parameters.bodyContent2),t._bodyContentRight=t.initializeBodyContent(t._container,t.LOCKED_MODAL_BUNDLE_BODY_CONTENT_3_KEY,t._parameters.bodyContent3),t._copyright=t.initializeCopyright(t._container,t._parameters.copyright),t.initializeLayoutParameters(),t.createTimers(),t._parent.addChild(t),t;throw new Error("LockedModal must be initiated with parameters")}n=createjs.Container,__extends(e,n),e.prototype.show=function(){this._isShowing||(this._isShowing=!0,this.parent.mouseEnabled=!1,this.parent.mouseChildren=!1,this.createTimers(),gsap.TweenLite.killTweensOf(this),gsap.TweenLite.killTweensOf(this._container),null!=this._showTimeline&&this._showTimeline.kill(),this._showTimeline=new gsap.TimelineLite({delay:this._modalShowDelay}),this._showTimeline.add(gsap.TweenLite.to(this,this._modalFadeDuration,{alpha:1})),this._showTimeline.add(gsap.TweenLite.to(this._container,this._contentBounceDuration,{scaleX:1.1,scaleY:1.1})),this._showTimeline.add(gsap.TweenLite.to(this._container,this._contentBounceDuration,{scaleX:1,scaleY:1})),this.visible=!0,this._isShowing=!1,this._onShowCallback&&this._onShowCallback())},e.prototype.hide=function(e){var t=this;this.destroyTimers(),this.parent.mouseEnabled=!0,this.parent.mouseChildren=!0,gsap.TweenLite.killTweensOf(this),gsap.TweenLite.killTweensOf(this._container),null!=this._hideTimeline&&this._hideTimeline.kill(),gsap.TweenLite.to(this._container,this._contentBounceDuration,{scaleX:0,scaleY:0,onComplete:function(){t.visible=!1,t._scrim.visible=!1,e&&e(),t._onHideCallback&&t._onHideCallback()}}),gsap.TweenLite.to(this,this._modalFadeDuration,{alpha:0})},e.prototype.tick24=function(e){var t;null!=(t=this._icon)&&t.isVisible&&DBLAsset.advanceMovieClip(this._icon)},e.prototype.cleanup=function(){null!=this._showTimeline&&this._showTimeline.clear(),null!=this._hideTimeline&&this._hideTimeline.clear()},e.prototype.initializeLayoutParameters=function(){var e;null!=(e=this._parameters)&&e.fillContainer&&this.setBounds(0,0,1024,768)},e.prototype.initializeCallbacksFromParameters=function(){var e;this._onShowCallback=null==(e=this._parameters)?void 0:e.onShow,this._onHideCallback=null==(e=this._parameters)?void 0:e.onHide},e.prototype.initializeVisibilityParameters=function(){var e;this.alpha=0,this.visible=!1,this._modalShowDelay=null!=(e=null==(e=this._parameters)?void 0:e.modalShowDelaySec)?e:t.DEFAULT_LOCKED_MODAL_SHOW_DELAY_SEC,this._modalFadeDuration=null!=(e=null==(e=this._parameters)?void 0:e.modalFadeDurationSec)?e:t.DEFAULT_LOCKED_MODAL_FADE_DURATION_SEC,this._contentBounceDuration=null!=(e=null==(e=this._parameters)?void 0:e.contentBounceDurationSec)?e:t.DEFAULT_LOCKED_MODAL_CONTENT_BOUNCE_DURATION_SEC,this._scrimAlpha=null!=(e=null==(e=this._parameters)?void 0:e.scrimMaxAlpha)?e:t.DEFAULT_LOCKED_MODAL_SCRIM_MAX_ALPHA},e.prototype.createTimers=function(){var t=this;this._autoShowCondition=this._parameters.autoShowCondition,this._autoShowConditionFrequency=this._parameters.autoShowConditionFrequency,this._autoShowCondition&&this._autoShowConditionFrequency&&(this._autoShowConditionInterval||(this._autoShowConditionInterval=setInterval(function(){var e=t._autoShowCondition();e&&!t.visible&&t.show(),!1===e&&t.visible&&t.hide()},this._autoShowConditionFrequency)))},e.prototype.destroyTimers=function(){this._autoShowConditionInterval&&clearInterval(this._autoShowConditionInterval)},e.prototype.updateText=function(e,t,n){if(void 0===n&&(n=!1),this.visible||n){var i=void 0;switch(e){case"title":i=this._title;break;case"bodyheader":i=this._bodyHeader;break;case"bodycontent1":i=this._bodyContentLeft;break;case"bodycontent2":i=this._bodyContent;break;case"bodycontent3":i=this._bodyContentRight;break;case"copyright":i=this._copyright}n=translate(t);(null==i?void 0:i.text)!==n&&(i.text=n,i.visible=!0)}},e.prototype.initializeScrim=function(){var e=new createjs.Shape,t=new createjs.Rectangle(0,0,1024,768),n=t.x,i=t.y,s=t.width,o=t.height;return e.graphics.beginFill(createjs.Graphics.getRGB(0,0,0,this._scrimAlpha)),e.graphics.drawRect(n,i,s,o),e.graphics.endFill(),e.x=n,e.y=i,e.name="scrim",e.mouseEnabled=!1,DBLAsset.setNameAndBounds(e,"shellscrim",t),this.addChild(e),e},e.prototype.initializeBundle=function(e,t,n){e=DBLAsset.create(e,t),DBLAsset.setNameAndBounds(this,n,e),t=this._parent.getBounds(),n=t.width;return e.setTransform(n/2,t.height/2),this.addChild(e),e},e.prototype.initializeIcon=function(e,t){if(e)return(e=e[this.LOCKED_MODAL_BUNDLE_ICON_KEY]).visible=t,this._container.addChild(e),e;throw new Error("Could not initialize locked modal icon with no art bundle")},e.prototype.initializeTitle=function(e,t){if(e)return(e=e[this.LOCKED_MODAL_BUNDLE_TITLE_KEY]).visible=!1,t&&(e.text=translate(t),e.visible=!0),DBLFont.fixFont(e,FONT_TYPE_HEADER_ONE,"",FONT_TYPE_HEADER_ONE_WEIGHT),this._container.addChild(e),e;throw new Error("Could not initialize locked modal title with no art bundle")},e.prototype.initializeBodyHeader=function(e,t){if(e)return(e=e[this.LOCKED_MODAL_BUNDLE_BODY_HEADER_KEY]).visible=!1,t&&(e.text=translate(t),e.visible=!0),DBLFont.fixFont(e,FONT_TYPE_BODY_COPY,"",FONT_TYPE_BODY_COPY_WEIGHT),this._container.addChild(e),e;throw new Error("Could not initialize locked modal body header with no art bundle")},e.prototype.initializeBodyContent=function(e,t,n){if(e)return(e=e[t]).visible=!1,n&&(e.text=translate(n),e.visible=!0),DBLFont.fixFont(e,FONT_TYPE_BODY_COPY,"",FONT_TYPE_BODY_COPY_WEIGHT),this._container.addChild(e),e;throw new Error("Could not initialize locked modal ".concat(t," with no art bundle"))},e.prototype.initializeCopyright=function(e,t){if(e)return(e=e[this.LOCKED_MODAL_BUNDLE_COPYRIGHT_KEY]).visible=!1,t&&(e.text=translate(t),e.visible=!0),DBLFont.fixFont(e,FONT_TYPE_BODY_COPY,"",FONT_TYPE_BODY_COPY_WEIGHT),this._container.addChild(e),e;throw new Error("Could not initialize locked modal body header with no art bundle")},t.LockedModal=e})(engagement_shared_lockedmodal=engagement_shared_lockedmodal||{}),(e=>{e.DEFAULT_LOCKED_MODAL_SHOW_DELAY_SEC=.25,e.DEFAULT_LOCKED_MODAL_FADE_DURATION_SEC=.25,e.DEFAULT_LOCKED_MODAL_CONTENT_BOUNCE_DURATION_SEC=.125,e.DEFAULT_LOCKED_MODAL_SCRIM_MAX_ALPHA=.75})(engagement_shared_lockedmodal=engagement_shared_lockedmodal||{}),(s=>{var n;function e(e){var t=n.call(this)||this;return t._data=e,t._service=new DBLPlayService,t}s.advancePlayingMovieClip=function e(t){if(t&&(t instanceof createjs.MovieClip&&!t.paused&&1<t.totalFrames&&t.advance(),t instanceof createjs.Container))for(var n=0,i=t.children;n<i.length;n++)e(i[n])},n=createjs.Container,__extends(e,n),e.prototype.hide=function(e){e()},e.prototype.getMappings=function(){return[]},e.prototype.load=function(e){var t=this;DBLRuntime.loadLinkedAssets(this._data.bundle,"*",function(){return t._data.load(function(){return t._service.addMapping("assets.audio.engagement.screener.Play").load(e)})})},e.prototype.getBackScreen=function(){return""},e.prototype.ready=function(){var e=this._data.startedScreener,t=e&&!screenerMode;t?this._data.state="outro":!e||this._data.pressedBack?this._data.state="start":this.setStateAfterStart(),t?this._data.endScreener(function(){}):this.getNextRecommendations(),this.drawState(),this.loaded()},e.prototype.getNextRecommendations=function(){var t=this;this._data.recommendedLessons=null,DBLLessonManager.getRecommendations([],1,null,function(e){return t.onLessonsAvailable(e)})},e.prototype.onLessonsAvailable=function(e){this._data.recommendedLessons=e,this.loadRecommendedLessonIfReady()},e.prototype.doChooseLesson=function(e){this.runLesson(e)},e.prototype.setStateAfterStart=function(){this._data.seenIntro?this._data.state="transition":this._data.state="intro"},e.prototype.nextState=function(){switch(this._data.state){case"start":this.setStateAfterStart();break;case"intro":this._data.state="transition"}this.drawState()},e.prototype.prevState=function(){"intro"===this._data.state&&(this._data.state="start"),this.drawState()},e.prototype.removeSequence=function(){this._sequence&&(this.removeChild(this._sequence),this._sequence=null)},e.prototype.drawState=function(){"transition"==this._data.state?(this.removeSequence(),this._data.lessonReadyToStart=!0,this.loadRecommendedLessonIfReady()):this._sequence&&this._sequence.sequenceName==this._data.sequenceData.art||this.setupSequence()},e.prototype.onFirst=function(){this.prevState()},e.prototype.onLaunch=function(){this._sequence.goto(this._sequence.sequencesCount,!0)},e.prototype.onNext=function(){this.sendFeedback(!1),this._sequence.playNext()},e.prototype.onExit=function(){this.sendFeedback(!0),this._sequence.playNext()},e.prototype.onSubmit=function(){this.sendFeedback(!1),this._sequence.playNext()},e.prototype.sendFeedback=function(e){var t,n,i=this._sequence.survey;i&&(t={location:"Launchpad end",dismissed:e},e||(n=i.ratings,e=Object.keys(n),t.ratings=e.map(function(e){return{question:s.ScreenerQuestionMap[e],score:n[e]}})),DBLEngagementManager.sendScreenerFeedback(t),this._sequence.clearButtons())},e.prototype.onPrevious=function(){this._sequence.gotoPrevious()},e.prototype.setupSequence=function(){var t=this;switch(this.removeSequence(),this._sequence=new s.ScreenerSequence(this._data.sequenceData,this._data.bundle,this._service),this.addChild(this._sequence),this._sequence.onEvent("next",function(){return t.onNext()}),this._sequence.onEvent("previous",function(){return t.onPrevious()}),this._sequence.onEvent("first",function(){return t.onFirst()}),this._sequence.onEvent("launch",function(){return t.onLaunch()}),this._sequence.onEvent("submit",function(){return t.onSubmit()}),this._sequence.onEvent("exit",function(){return t.onExit()}),this._data.state){case"start":DBLClientEventManager.recordClientEvent("DblShellScreen",this._data.seenIntro?"ScreenerResumed":"ScreenerOffered",!0),this._sequence.playNext(),this._sequence.onReady(this._sequence.sequencesCount,function(){t._data.startScreener(function(){return t.nextState()})}),this.started(),s.ROBOT_INTRO_EVENT_NAMES.forEach(function(e){return t._sequence.onEvent(e,function(){return t._service.playAudio(e,function(){})})});break;case"intro":this._sequence.playNext(),this._sequence.onReady(this._sequence.sequencesCount,function(){t._data.seenIntro=!0,DBLClientEventManager.recordClientEvent("DblShellScreen","ScreenerIntroComplete",!0),t._data.sync(function(){return t.nextState()})}),this.intro();break;case"outro":DBLClientEventManager.recordClientEvent("DblShellScreen","ScreenerLessonsComplete",!0),this.outro(),this._sequence.playNext(),this._sequence.onReady(this._sequence.sequencesCount,function(){DBLClientEventManager.recordClientEvent("DblShellScreen","ScreenerRewardsComplete",!0),userRunScreen(t.exitScreen)})}this._sequence.update()},e.prototype.loadRecommendedLessonIfReady=function(){this._data.lessonReadyToStart&&this._data.recommendedLessons&&this._data.recommendedLessons.length&&this.doChooseLesson(this._data.recommendedLessons[0])},e.prototype.pause=function(){this._sequence&&(this._sequence.paused=!0)},e.prototype.resume=function(){this._sequence&&(this._sequence.paused=!1)},e.prototype.tick24=function(e){this._sequence&&this._sequence.tick24(e)},e.prototype.cleanup=function(){},e.prototype.getAccessibilityData=function(){return{role:"button",display:{object:this},label:"TODO: Implement!",labelObject:{id:this.name||"dblTimelineButton"},enabled:!0,visible:!0}},s.ScreenerBase=e})(engagement_shared_screener=engagement_shared_screener||{}),(e=>{function t(e,t,n){this.bundle=e,this._statesData=t,this._sessionProperties=n,this._state="start",this.lessonReadyToStart=!1,this.recommendedLessons=[]}Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this.transitioningToLesson="transition"==e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sequenceData",{get:function(){return this._statesData[this.state]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seenIntro",{get:function(){return DBLStateManager.getProperty(this._sessionProperties.seenIntro)},set:function(e){DBLStateManager.setProperty(this._sessionProperties.seenIntro,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pressedBack",{get:function(){return shell.pressedBack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitioningToLesson",{set:function(e){shell.transitioningToLesson=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedScreener",{get:function(){return getSessionProperty(this._sessionProperties.startedScreener)},set:function(e){setSessionProperty(this._sessionProperties.startedScreener,e)},enumerable:!1,configurable:!0}),t.prototype.startScreener=function(e){this.startedScreener=!0,"function"==typeof shell.updateHeader&&shell.updateHeader(),this.sync(e)},t.prototype.endScreener=function(e){this.clearProperties(),this.sync(e)},t.prototype.clearProperties=function(){this.seenIntro=!1,this.startedScreener=!1},t.prototype.load=function(e){DBLStateManager.requestProperty(this._sessionProperties.seenIntro),this.sync(e)},t.prototype.sync=function(e){DBLStateManager.syncProperties(e)},e.ScreenerData=t})(engagement_shared_screener=engagement_shared_screener||{}),(l=>{l.ROBOT_INTRO_EVENT_NAMES=["welcome","pressRocketship","notReady","myHouse","arcade","pressLaunch","myStuff"];var s,e={btnLauncher:{},btnHouse:{},btnArcade:{},HelpShellBtn:{},AudioShellBtn:{},btnMyStuff:{}},t=(s=createjs.Container,__extends(n,s),Object.defineProperty(n.prototype,"survey",{get:function(){return this._survey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sequenceName",{get:function(){return this._state.art},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sequencesCount",{get:function(){return Math.max.apply(Math,__spreadArray([0],this._art.labels.filter(function(e){return e&&e.label}).map(function(e){return e.label}).map(function(e){return parseInt(e.split("_")[0])}),!1))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentSequence",{get:function(){var e;return 0==this._art.currentFrame?0:(e=this._art.currentLabel)&&-1!=e.indexOf("_")?parseInt(e.split("_")[0]):-1},enumerable:!1,configurable:!0}),n.prototype.getArt=function(){return this._art},n.prototype.stopAudio=function(){this._audioIds.forEach(function(e){DBLAsset.stopSound(e)})},n.prototype.pauseAudio=function(){var t=this;this._pausedAudioIds=[],this._audioIds.forEach(function(e){DBLAsset.pauseSound(e)&&t._pausedAudioIds.push(e)})},n.prototype.resumeAudio=function(){this._pausedAudioIds.forEach(function(e){DBLAsset.resumeSound(e)}),this._pausedAudioIds=[]},n.prototype.playNext=function(){var e=this.currentSequence;this.goto(e+1)},n.prototype.skipNext=function(){var e=this.currentSequence;this.goto(e+1,!1)},n.prototype.gotoPrevious=function(){var e=this.currentSequence;this.goto(e-1)},n.prototype.onReady=function(e,t){this._art.on("0".concat(e,"_startAnimationEnd"),t)},n.prototype.onEvent=function(e,t){this._art.on(e,t)},n.prototype.onButtonEvent=function(t){var n=this;Object.keys(e).forEach(function(e){n._art.on("highlight_".concat(e),function(){t(e,"highlightOn")}),n._art.on("end_highlight_".concat(e),function(){t(e,"highlightOff")})})},n.prototype.dispatch=function(e,t,n){(n=void 0===n?!0:n)&&(this.buttonsEnabled=!1);n=new createjs.Event(e,!1,!1);n.data=t,this._art.dispatchEvent(n)},Object.defineProperty(n.prototype,"paused",{set:function(e){e?this.pauseAudio():this.resumeAudio()},enumerable:!1,configurable:!0}),n.prototype.tick24=function(e){if(this._art){for(var t=!this._art.paused;e--;)l.advancePlayingMovieClip(this._art);t&&this._art.paused&&this.update()}},n.prototype.update=function(){this._playText=null,this._survey=null,this.updateArt(this._art)},n.prototype.updateArt=function(e,t){void 0===t&&(t=!1);var n=!1;e.name==l.FEEDBACK_MODAL_NAME&&(e.survey||(this.clearButtons(),e.survey=new l.ScreenerSurvey(e,this._service),t=!0),this._survey=e.survey),t&&e instanceof createjs.MovieClip&&e.gotoAndStop(0);for(var i=0,s=e.children.concat();i<s.length;i++){var o,a=s[i],r=a.name||"";0==r.indexOf("lbl")&&a instanceof createjs.Text?(DBLFont.fixTextFields(a),this._playText=a.text):0==r.indexOf("btn")&&a instanceof createjs.MovieClip?(o=this.addButton(a))&&(e[r]=o):a instanceof createjs.Container&&!(a instanceof DBLBaseButton)&&(n=this.updateArt(a,t)||n)}return n},n.prototype.goto=function(e,t){void 0===t&&(t=!0),this.stopAudio(),shell.notifyClosedCaptionPlayComplete();e="0"+(t?e+"_start":e+"_stop");t?this._art.gotoAndPlay(e):this._art.gotoAndStop(e),this.recreateButtons&&this.clearButtons(),this.update(),this._survey&&this._survey.update({updateLabels:!0})},n.prototype.clearButtons=function(){for(var e=0,t=this._buttons;e<t.length;e++){var n=t[e];n.parent&&n.parent.removeChild(n)}this._buttons=[]},Object.defineProperty(n.prototype,"buttonsEnabled",{set:function(t){this._buttons.forEach(function(e){return e.enabled=t})},enumerable:!1,configurable:!0}),n.prototype.fastForwardSequence=function(){for(;this._art&&!this._art.paused&&this._art.currentFrame<this._art.totalFrames;)this._art.advance()},n.prototype.isNavigationButton=function(t){return["prev","next"].some(function(e){return-1!=t.toLowerCase().indexOf(e)})},n.prototype.addButton=function(e){var t=this,n=e.name||"",i=l.createButton(e);return i?(e=-1!=(i.name=n).toLowerCase().indexOf("radio"),this.buttonActions[n]?i.on("click",function(){return t.onActionClicked(n)}):this.isNavigationButton(n)?i.on("click",function(){return t.onNavigationClicked(n)}):i instanceof l.AudioButton?i.on("click",function(){return t.onAudioClicked(i)}):e&&i.on("click",function(){return t.onRadioClicked(i)}),this._buttons.push(i),i):null},n.prototype.onActionClicked=function(e){this.fastForwardSequence(),this.dispatch(this.buttonActions[e])},n.prototype.onNavigationClicked=function(e){this.fastForwardSequence();var e=-1==e.toLowerCase().indexOf("prev"),t=this.currentSequence;0!=t||e?t==this.sequencesCount&&e?this.dispatch("last"):this.dispatch(e?"next":"previous"):this.dispatch("first")},n.prototype.onAudioClicked=function(e){var t;this.fastForwardSequence(),null!=(t=this._survey)&&t.toggleButton(e)},n.prototype.onRadioClicked=function(e){this.fastForwardSequence(),this._survey.selectButton(e)},n);function n(e,t,n){var i=s.call(this)||this,n=(i._state=e,i._service=n,i._buttons=[],i._enabled=!0,i.recreateButtons=!1,i._pausedAudioIds=[],i._prefix=null,i.buttonActions={btnHouse:"enterHouse",btnArcade:"enterArcade",btnLauncher:"launch",btnSubmit:"submit",btnExit:"exit"},i._art=DBLAsset.create(e.art,t),i._audioIds=DBLAsset.getBundleAudioIds(t)||[],i._pausedAudioIds=[],i._art.x=512,"primary"==engagement),t="Assessment_Launcher"==e.art;return i._art.y=n&&t?307:n?353:358,i._art.scaleX=i._art.scaleY=n&&t?1.1:1,i.addChild(i._art),i.onButtonEvent(function(t,n){switch(t){case"HelpShellBtn":shell.highlightHelp("highlightOn"==n);break;case"AudioShellBtn":shell.highlightAudioButton("highlightOn"==n);break;default:i._buttons.filter(function(e){return e.stage&&e.name==t}).forEach(function(e){return e.highlight("highlightOn"==n)})}}),i}l.ScreenerSequence=t})(engagement_shared_screener=engagement_shared_screener||{}),(t=>{var n,e="Session.screener_spinner_frame",i=(n=createjs.Container,__extends(s,n),s.prototype.cleanup=function(){this.removeArt()},s.prototype.ready=function(){},s.prototype.resize=function(){},s.prototype.show=function(){this.isRunning=!0,this.hide=!1,this.createArt(),this._art&&(this._art.gotoAndStop(0),this.loadState(getSessionProperty(e)))},Object.defineProperty(s.prototype,"currentTransition",{get:function(){return this.transitions[this.transitionIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"currentTransitionFrame",{get:function(){var e;return null==(e=this.currentTransition)?void 0:e.currentFrame},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"transitions",{get:function(){return this._art.children.filter(function(e){return e.name&&-1!=e.name.indexOf("animTransition")})},enumerable:!1,configurable:!0}),s.prototype.showTransition=function(e){var t=this;void 0===e&&(e=0);this.transitions.forEach(function(e){return e.visible=!1});var n=this.currentTransition;if(n)for(n.visible=!0,n.on("transitionComplete",function(){t.isRunning=!1,t.clearState()}),n.on("Trans_startAnimationEnd",function(){t.hide&&(t.clearState(),n.gotoAndPlay("Trans_exit"))});n.currentFrame<e;)DBLAsset.advanceMovieClip(n)},s.prototype.loadState=function(e){var t;e?(t=e.index,e=e.frame,this.transitionIndex=t,this.showTransition(e)):(t=this.transitions,this.transitionIndex=Math.floor(DBLRandom.seededRandomGeneralPurpose()*t.length),this.showTransition())},s.prototype.saveState=function(){setSessionProperty(e,{index:this.transitionIndex,frame:this.currentTransitionFrame})},s.prototype.clearState=function(){setSessionProperty(e,void 0)},s.prototype.tick24=function(e){for(;this._art&&e--;)t.advancePlayingMovieClip(this._art)},s.prototype.createArt=function(){this._art&&(this.removeArt(),this._art=null),this._art=DBLAsset.create("Assessment_Transitions",this.bundle),this._art?(this._art.stop(),this._art.x=512,this._art.y=355,this.addChild(this._art)):DBLLog.log("error loading LoadingScreener",DBLLog.ERROR)},s.prototype.removeArt=function(){var e=this._art&&this._art.parent;e&&(e.removeChild(this._art),e.stage)&&e.stage.update()},s);function s(e){var t=n.call(this)||this;return t.bundle=e,t.hide=!1,t}t.ScreenerSpinner=i})(engagement_shared_screener=engagement_shared_screener||{}),(t=>{t.FEEDBACK_MODAL_NAME="astFeedbackModal",t.ScreenerQuestionMap={question1:"LP_EASE",question2:"LP_EXCITEMENT",question3:"LP_EFFORT",question4:"LP_LENGTH"},i=DBLSelectTimelineButton,__extends(e,i),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.gotoFrame(this._clip.currentLabel)},enumerable:!1,configurable:!0}),e.prototype.gotoFrame=function(e,t){var n=this;t?this._clip.gotoAndPlay(e):i.prototype.gotoFrame.call(this,e),this.label&&l(this._clip,function(e){e instanceof createjs.Text&&(e.text=n.label)})},e.prototype.setClip=function(e){(this._clip=e).gotoAndStop("Over");var t=e.nominalBounds;e.gotoAndStop("Up"),t&&e.setBounds(t.x,t.y,t.width,t.height)},Object.defineProperty(e.prototype,"selected",{get:function(){return this._isSelected},set:function(e){!!this._isSelected!=!!e&&(e=(this._isSelected=e)?"SelectAnimation":"DeselectAnimation",this.gotoFrame(e,!0),console.log("".concat(this.name," -> playing('").concat(e,"')")))},enumerable:!1,configurable:!0}),e.prototype.gotoAndStop=function(e){this.selected="Highlight"==e};var i,s=e;function e(){return null!==i&&i.apply(this,arguments)||this}t.ScreenerButton=s,__extends(a,n=s),Object.defineProperty(a.prototype,"skipBtn",{get:function(){return this._clipContainer.btnSkip},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playBtn",{get:function(){return this._clipContainer.btnHighlight},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playing",{get:function(){var e;return null==(e=this.skipBtn)?void 0:e.visible},set:function(e){this.setPlaying(e)},enumerable:!1,configurable:!0}),a.prototype.setPlaying=function(e){this.skipBtn.visible=e,this.playBtn.visible=!e,this.setClip(e?this.skipBtn:this.playBtn)};var n,o=a;function a(e){var t=n.call(this,e)||this;return t._clipContainer=e,t.setPlaying(!1),t}function r(e,t){this._surveyAsset=e,this._service=t,this._ratings={}}function l(e,t){for(var n=!1,i=0,s=e.children.concat();i<s.length;i++){var o=s[i],a=o.name||"";0==a.indexOf("lbl")&&o instanceof createjs.Text?t(o):0==a.indexOf("btn")&&o instanceof createjs.MovieClip?t(u(o)):o instanceof createjs.Container&&!(o instanceof DBLBaseButton)&&(n=l(o,t)||n)}return n}function u(e){var t,n,i=e.parent;return e.visible&&i?(t=i.children.indexOf(e),(n=new("btnAudio"==e.name?o:s)(e)).name=e.name,i.addChildAt(n,t),n):null}t.AudioButton=o,r.prototype.cleanup=function(){this.stopAudio()},Object.defineProperty(r.prototype,"ratings",{get:function(){return this._ratings},enumerable:!1,configurable:!0}),r.prototype.playQuestionText=function(e,t){var e=this.isTitleButton(e)?null:e.parent,n=e?[this.getQuestionId(e),"score1","score2","score3","score4"]:["title"];e&&this.updateFrameSelection(e,void 0),this.playText(n,function(){t()})},Object.defineProperty(r.prototype,"currentFrame",{get:function(){return this.questionFrames.filter(function(e){return null==(e=e.btnAudio)?void 0:e.playing})[0]},enumerable:!1,configurable:!0}),r.prototype.playText=function(e,t){var n,i,s,o,a=this;e.length?(n=e[0],e=e.slice(1),i=this._audioId=n,s=this.currentFrame,o=s&&s[this.getAssetId(n)],this.highlightAsset(o,!0),this._service.playAudio(i,function(){a.highlightAsset(o,!1),a._audioId=null,a.playText(e,t)})):(this._audioId=null,t())},Object.defineProperty(r.prototype,"answerHeaders",{get:function(){return[this._surveyAsset.astAnswer1,this._surveyAsset.astAnswer2,this._surveyAsset.astAnswer3,this._surveyAsset.astAnswer4].filter(function(e){return e&&e.lblAnswer})},enumerable:!1,configurable:!0}),r.prototype.update=function(t){var n=this;void 0===t&&(t={}),this._surveyAsset.btnAudio&&this.highlightAsset(this._surveyAsset.astTitle,this._surveyAsset.btnAudio.playing),this.answerHeaders.forEach(function(e,t){e.lblAnswer.text=null==(e=n._service.getMapping("score".concat(t+1)))?void 0:e.script}),this.questionFrames.forEach(function(e){n.updateFrame(e,t)})},r.prototype.toggleButton=function(e){var t=this,n=e.playing;this.fastForwardAudio(),e.playing=!n,e.playing&&this.playQuestionText(e,function(){e.playing=!1,t.fastForwardAudio()}),this.update({updateSelection:!e.playing})},r.prototype.isTitleButton=function(e){return(null==(e=e.parent)?void 0:e.name)==t.FEEDBACK_MODAL_NAME},r.prototype.selectButton=function(t){this.fastForwardAudio();var e=t.parent,e=(this.frameRadioButtons(e).forEach(function(e){return e!=t&&(e.selected=!1)}),t.selected=!0,this.getQuestionId(e)),n=Object.keys(this._ratings).length,e=(this._ratings[e]=this.getIndex(t.name),Object.keys(this._ratings).length);n<e&&e==this.questionFrames.length&&this._surveyAsset.parent.play()},r.prototype.frameRadioButtons=function(e){return[e.btnRadio1,e.btnRadio2,e.btnRadio3,e.btnRadio4]},r.prototype.getQuestionId=function(e){return"question"+this.getIndex(e.name)},r.prototype.getAssetId=function(e){return{score1:"btnRadio1",score2:"btnRadio2",score3:"btnRadio3",score4:"btnRadio4",question1:"question",question2:"question",question3:"question",question4:"question"}[e]},r.prototype.getIndex=function(e){return parseInt(e[e.length-1])},r.prototype.updateFrameSelection=function(e,t){var n=this;this.highlightAsset(e.question,!1),this.frameRadioButtons(e).forEach(function(e){return e.selected=n.getIndex(e.name)===t})},r.prototype.updateFrame=function(e,t){var n,i=this;(t=void 0===t?{}:t).updateLabels&&(e.question.lblQuestion.text=null==(n=this._service.getMapping(this.getQuestionId(e)))?void 0:n.script,this.frameRadioButtons(e).forEach(function(e){e.label=null==(e=i._service.getMapping("score".concat(i.getIndex(e.name))))?void 0:e.script})),e.btnAudio&&this.highlightAsset(e.background,e.btnAudio.playing),t.updateSelection&&this.updateFrameSelection(e,this._ratings[this.getQuestionId(e)])},r.prototype.highlightAsset=function(e,t){e&&(t=t?"Highlight":"Default",e instanceof createjs.MovieClip&&e.currentLabel==t||e.gotoAndStop(t))},Object.defineProperty(r.prototype,"questionFrames",{get:function(){return[this._surveyAsset.astQuestionFrame1,this._surveyAsset.astQuestionFrame2,this._surveyAsset.astQuestionFrame3,this._surveyAsset.astQuestionFrame4]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"audioButtons",{get:function(){return this.questionFrames.map(function(e){return e.btnAudio}).filter(function(e){return e}).concat(this._surveyAsset.btnAudio)},enumerable:!1,configurable:!0}),r.prototype.stopAudio=function(){this._service.stopAudio(this._audioId)},r.prototype.fastForwardAudio=function(){this.stopAudio(),this.audioButtons.forEach(function(e){e.playing=!1}),this.update({updateSelection:!0})},t.ScreenerSurvey=r,t.updateArt=l,t.createButton=u})(engagement_shared_screener=engagement_shared_screener||{}),(n=>{n.HELPPOPUP_EVENT_EXIT="HelpPopup_Exit";var i,t=DBLRuntime.requireAudio("assets.audio.components.shared.Click"),e=(i=createjs.Container,__extends(s,i),s.prototype.load=function(e,t){this._loaded=!1;var e=getActualFromSignature(e);this._fqnAnimation=e.animation,this._fqnAudio=e.audio,this._title=e.title,this._loadCallback=t,this._loader=new createjs.LoadQueue,this._loader.stopOnError=!0,this._loader.on("error",this.onLoadFailed.bind(this)),this._loader.on("complete",this.onAssetsLoaded.bind(this)),this._loader.on("fileload",onPotentialAnimateFileLoad),this._backer.load(this._loader),objectFromFQN(this._fqnAnimation)||(e=fileFromFQN(this._fqnAnimation,".js"),DBLLog.log("Loading "+e,DBLLog.INFO),this._loader.loadFile({src:e,id:this._fqnAnimation,crossOrigin:!0,loadTimeout:DEFAULT_LOAD_TIMEOUT},!1)),this._loader.load()},s.prototype.onLoadFailed=function(){DBLLog.log("Failed to load core bundle or "+this._fqnAnimation+" - recovering",DBLLog.ERROR),this.cleanup();var e=this._loadCallback;this._loadCallback=null,e(!1)},s.prototype.onAssetsLoaded=function(){this._clipMovie=DBLAsset.create("",this._fqnAnimation),this._clipMovie.visible=!1,this._backer.onLoad(this,this._clipMovie,this._title),this.resize(),(0,this._loadCallback)(!(this._loadCallback=null))},s.prototype.resize=function(){this._backer.resize()},s.prototype.onExitClick=function(e){DBLAsset.playSound(t),this.hide()},s.prototype.onAudioClick=function(e){DBLAsset.playSound(t),this.playAudio()},s.prototype.playAudio=function(){this._backer.disable(),this._playLoader=new createjs.LoadQueue,this._playLoader.installPlugin(createjs.Sound),this._playLoader.on("complete",this.onSoundLoaded.bind(this),this),this._playLoader.on("error",this.onSoundLoaded.bind(this),this);var e=fileFromFQN(this._fqnAudio,".mp3");DBLLog.log("Loading "+e,DBLLog.INFO),this._playLoader.loadFile({src:e,id:this._fqnAudio,type:"sound",loadTimeout:DEFAULT_LOAD_TIMEOUT},!0)},s.prototype.onSoundLoaded=function(){this._playSound=createjs.Sound.play(this._fqnAudio),"playFailed"==this._playSound.playState?(DBLLog.log("Failed to load "+this._fqnAudio+" - recovering",DBLLog.ERROR),this.cleanupSound()):(this._playSound.on("complete",this.cleanupSound.bind(this),this),this._playSound.on("failed",this.cleanupSound.bind(this),this))},s.prototype.cleanupSound=function(){this._playSound&&(createjs.Sound.removeSound(this._fqnAudio,null),this._playSound.removeAllEventListeners(),this._playSound=null),this._playLoader&&(this._playLoader.removeAllEventListeners(),this._playLoader=null),this._backer.enable()},s.prototype.show=function(){this.visible=!0,this._backer.show(this._clipMovie)},s.prototype.tick24=function(e){for(;0<e--;)this._backer.advanceModal(),this._clipMovie&&this._clipMovie.visible&&!this._loaded&&(this._loaded=!0,this.playAudio())},s.prototype.hide=function(){var e=this;this.cleanupSound(),this._clipMovie.stop(),this._clipMovie.visible=!1,this._backer.hide(function(){e.cleanup(),e.dispatchEvent(n.HELPPOPUP_EVENT_EXIT)})},s.prototype.cleanup=function(){this.cleanupSound(),this.visible=!1,this._loader&&this._loader.removeAllEventListeners(),this._loader=null,this._backer.cleanup(this)},s);function s(e){var t=i.call(this)||this;return t._backer=new(e?n.IntermediateBacker:n.PrimaryBacker),t.visible=!1,t}n.HelpPopup=e})(engagement_shared_toolhelp=engagement_shared_toolhelp||{}),(e=>{function t(){this.CORE_BUNDLE="assets.bundles.engagement.intermediate.bookworm.BookwormHelpDisplay",this.MODAL_WIDTH=650,this.MODAL_HEIGHT=550}DBLRuntime.requireFont("assets.fonts.Corbel",DBLFont.BOLD),t.prototype.load=function(e){var t;objectFromFQN(this.CORE_BUNDLE)||(t=fileFromFQN(this.CORE_BUNDLE,".js"),DBLLog.log("Loading "+t,DBLLog.INFO),e.loadFile({src:t,id:this.CORE_BUNDLE,crossOrigin:!0,loadTimeout:DEFAULT_LOAD_TIMEOUT},!1))},t.prototype.onLoad=function(e,t,n){this._modal=DBLAsset.create("DBLAToolHelpMainModule",this.CORE_BUNDLE),this._modal.name="toolhelp",this._modal.x=(1024-this.MODAL_WIDTH)/2,this._modal.y=(768-this.MODAL_HEIGHT)/2,e.addChild(this._modal),this._speakerBtn=this._modal.ast_SpeakerButton,this._speakerBtn?(this._modal.ast_SpeakerButton.visible=!1,this._speakerBtn=new DBLTimelineButton(DBLAsset.create("DBLAButtonToolHelpAudio",this.CORE_BUNDLE)),this._speakerBtn.addEventListener("click",e.onAudioClick.bind(e)),this._speakerBtn.x=17,this._speakerBtn.y=62,this._modal.addChild(this._speakerBtn)):DBLLog.log("IntermediateBacker: ast_SpeakerButton missing",DBLLog.WARN),this._modal.ast_CloseButton?(this._modal.ast_CloseButton.visible=!1,this._closeBtn=new DBLTimelineButton(DBLAsset.create("DBLAButtonCloseHelpTool",this.CORE_BUNDLE)),this._closeBtn.addEventListener("click",e.onExitClick.bind(e)),this._closeBtn.x=648,this._closeBtn.y=12,this._closeBtn.visible=!1,this._modal.addChild(this._closeBtn)):DBLLog.log("IntermediateBacker: ast_CloseButton missing",DBLLog.WARN),this._textInstruction=this._modal.ast_TextInstructions,this._textInstruction?(DBLFont.fixFont(this._textInstruction,"Corbel","20px",DBLFont.BOLD),this._textInstruction.y+=13,this._textInstruction.text=n):DBLLog.log("IntermediateBacker: ast_TextInstructions missing",DBLLog.WARN);e=this._modal.ToolHelpText;e?(DBLFont.fixFont(e,"Corbel","24px",DBLFont.BOLD),e.y+=11):DBLLog.log("IntermediateBacker: ToolHelpText missing",DBLLog.WARN),this._videoWindow=this._modal.ast_VideoWindow,this._videoWindow?(t.x+=15,t.y+=15,this._videoWindow.addChild(t)):DBLLog.log("IntermediateBacker: ast_VideoWindow missing",DBLLog.WARN)},t.prototype.resize=function(){this._modal&&(this._modal.scaleX=lessonContent.scaleX,this._modal.scaleY=lessonContent.scaleY)},t.prototype.show=function(e){e.visible=!0,e.play(),this._closeBtn.visible=!0},t.prototype.advanceModal=function(){this._modal&&this._modal.visible&&DBLAsset.advanceMovieClip(this._modal)},t.prototype.hide=function(e){this._closeBtn&&(this._closeBtn.visible=!1),this._modal.visible=!1,e()},t.prototype.cleanup=function(e){this._closeBtn&&this._closeBtn.removeAllEventListeners(),this._speakerBtn&&this._speakerBtn.removeAllEventListeners(),this._closeBtn=null,this._videoWindow=null,e.removeChild(this._modal),this._modal=null},t.prototype.enable=function(){this._speakerBtn&&(this._speakerBtn.mouseEnabled=!0),this._closeBtn&&(this._closeBtn.mouseEnabled=!0)},t.prototype.disable=function(){this._speakerBtn&&(this._speakerBtn.mouseEnabled=!1),this._closeBtn&&(this._closeBtn.mouseEnabled=!1)},e.IntermediateBacker=t})(engagement_shared_toolhelp=engagement_shared_toolhelp||{}),(e=>{i=DBLTimelineButton,__extends(t,i),t.prototype.gotoFrame=function(e){i.prototype.gotoFrame.call(this,e);var e=this.children[0],t=e.txtLabel.lblText,e=e.earIcon,n=(DBLFont.fixFontAndPosition(t,"DBLAndika"),t.text=this._title,e.nominalBounds.width+t.getMeasuredWidth());e.x=-n/2,t.x=e.x+e.nominalBounds.width};var i,s=t;function t(e,t){e=i.call(this,e)||this;return e._title=t,e.gotoFrame("Up"),e}function n(){this.CORE_BUNDLE="assets.bundles.engagement.squiggly.SquigglyHelpDisplay",this.ANIMATION_WIDTH=565,this.ANIMATION_HEIGHT=338}n.prototype.load=function(e){var t;objectFromFQN(this.CORE_BUNDLE)||(t=fileFromFQN(this.CORE_BUNDLE,".js"),DBLLog.log("Loading "+t,DBLLog.INFO),e.loadFile({src:t,id:this.CORE_BUNDLE,crossOrigin:!0,loadTimeout:DEFAULT_LOAD_TIMEOUT},!1))},n.prototype.onLoad=function(e,t,n){this._modal=DBLAsset.create("ast_Modal",this.CORE_BUNDLE),this._modal.name="toolhelp",this._modal.setBounds(0,0,1024,768),e.addChild(this._modal),this._sign=this._modal.ast_Sign,this._audioButton=new s(DBLAsset.create("btn_GameType",this.CORE_BUNDLE),n),this._audioButton.addEventListener("click",e.onAudioClick.bind(e)),this._modal.addChild(this._audioButton),this._audioButton.visible=!1;n=this._modal.lctGameType;n&&(this._audioButton.x=n.x,this._audioButton.y=n.y),this._frame=DBLAsset.create("ast_VideoFrame",this.CORE_BUNDLE),this._modal.addChild(this._frame),(n=this._modal.lctVideoFrame)&&(this._frame.x=n.x,this._frame.y=n.y),this._doneButton=new DBLTimelineButton(DBLAsset.create("btn_DoneAnim",this.CORE_BUNDLE)),this._doneButton.addEventListener("click",e.onExitClick.bind(e)),this._modal.addChild(this._doneButton),this._doneButton.visible=!1,this._doneButtonAnimation=DBLAsset.create("btn_DoneAnim",this.CORE_BUNDLE),this._modal.addChild(this._doneButtonAnimation),(n=this._modal.lctDone)&&(this._doneButton.x=n.x,this._doneButton.y=n.y,this._doneButtonAnimation.x=n.x,this._doneButtonAnimation.y=n.y),this._modal.addChild(t),t.x=this._frame.x-Math.floor(this.ANIMATION_WIDTH/2),t.y=this._frame.y-Math.floor(this.ANIMATION_HEIGHT/2)},n.prototype.resize=function(){this._modal&&(this._modal.scaleX=lessonContent.scaleX,this._modal.scaleY=lessonContent.scaleY)},n.prototype.show=function(e){var t=this;this._sign.addEventListener("EnterDone",function(){t._audioButton.visible=!0,t._audioButton.alpha=0,gsap.TweenLite.to(t._audioButton,.25,{alpha:1}),e.visible=!0,e.play(),t._doneButtonAnimation.visible=!1,t._doneButton.visible=!0}),this._sign.gotoAndPlay("EnterStart"),this._frame.gotoAndPlay("EnterStart"),this._doneButtonAnimation.gotoAndPlay("EnterStart")},n.prototype.advanceModal=function(){this._modal&&this._modal.visible&&DBLAsset.advanceMovieClip(this._modal)},n.prototype.hide=function(e){var t=this;gsap.TweenLite.to(this._audioButton,.25,{alpha:0,onComplete:function(){t._audioButton&&(t._audioButton.visible=!1,t._audioButton.alpha=1)}}),this._doneButtonAnimation.visible=!0,this._doneButton.visible=!1,this._sign.gotoAndPlay("ExitStart"),this._frame.gotoAndPlay("ExitStart"),this._doneButtonAnimation.gotoAndPlay("ExitStart"),this._sign.addEventListener("ExitDone",e)},n.prototype.cleanup=function(e){this._sign&&this._sign.removeAllEventListeners(),this._sign=null,this._audioButton&&this._audioButton.removeAllEventListeners(),this._audioButton=null,this._doneButton&&this._doneButton.removeAllEventListeners(),this._doneButton=null,this._frame=null,e.removeChild(this._modal),this._modal=null},n.prototype.enable=function(){this._audioButton&&(this._audioButton.mouseEnabled=!0)},n.prototype.disable=function(){this._audioButton&&(this._audioButton.mouseEnabled=!1)},e.PrimaryBacker=n})(engagement_shared_toolhelp=engagement_shared_toolhelp||{});